<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hmotnostn√≠ a tepeln√© bilance procesn√≠ch syst√©m≈Ø</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css" integrity="sha384-n8MVd4RsNIU0tAv4ct0nTaAbDJwPJzDEaqSD1odI+WdtXRGWt2kTvGFasHpSy3SV" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js" integrity="sha384-XjKyOOlGwcjNTAIQHIpgOno0Hl1YQqzUOEleOLALmuqehneUG+vnGctmUb0ZY0l8" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js" integrity="sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05" crossorigin="anonymous"></script>
    
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <style>
        /* KRITICK√Å SPECIFIKACE PRO OUTPUT STYLE - POVINN√â DODR≈ΩOV√ÅN√ç */
        
        /* Z√ÅKLADN√ç PRAVIDLO: PREZENTACE MUS√ç FUNGOVAT JAKO POWERPOINT
           - V≈°e mus√≠ b√Ωt v≈ædy viditeln√© (norm√°ln√≠ i fullscreen re≈æim)
           - P≈ôi fullscreen pouze zvƒõt≈°en√≠, stejn√© pozice
           - ≈Ω√°dn√© overflow, ≈æ√°dn√© scrollov√°n√≠, nikdy
           - Page counter v≈ædy viditeln√Ω
           - Obsah mus√≠ b√Ωt navr≈æen tak, aby se ve≈°el do slide
           - Pokud se nevleze ‚Üí rozdƒõlit na v√≠ce slajd≈Ø nebo pou≈æ√≠t z√°lo≈æky
           - Interaktivn√≠ v√Ωsledky MUS√ç b√Ωt na samostatn√© z√°lo≈æce "V√Ωsledky"
           - Tituln√≠ slide mus√≠ m√≠t vƒõt≈°√≠ p√≠sma (h1: 4rem, h2: 2.8rem)
           - Rozlo≈æen√≠ volit podle obsahu (nejen dvouslopcov√©)
        */

        :root {
            --bg-main: #f8f9fa;
            --bg-slide: #ffffff;
            --color-h: #003f88;
            --color-accent: #0056b3;
            --color-text: #212529;
            --bg-practice: #e6f7ff;
            --border-practice: #1890ff;
            --bg-formula: #eef2f7;
            --border-formula: #0056b3;
        }
        
        /* KRITICK√â: Statick√© v√Ωsledkov√© oblasti - NIKDY NEMƒöNIT LAYOUT! */
        .calc-result {
            visibility: hidden;
            opacity: 0;
            transition: opacity 0.4s ease-in-out;
            padding: 1rem;
            background-color: #f0f8ff;
            border-radius: 0.5rem;
            margin-top: 1rem;
            display: block; /* V≈ædy block, nikdy none! */
        }
        
        .calc-result.visible {
            visibility: visible;
            opacity: 1;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-main);
            color: var(--color-text);
            overflow: hidden;
            font-size: 24px;
        }
        
        #presentation-container {
            position: relative;
            width: 100vw;
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* Z√ÅKLADN√ç SLIDE - FIXN√ç POMƒöR STRAN 16:9 */
        .slide {
            position: absolute;
            width: 90vw;
            height: 90vh;
            aspect-ratio: 16 / 9;
            max-width: calc(90vh * 16/9); /* Zachov√° pomƒõr stran */
            max-height: 90vh;
            background-color: var(--bg-slide);
            border-radius: 1rem;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            padding: 2rem;
            opacity: 0;
            visibility: hidden;
            transform: scale(0.95);
            transition: opacity 0.4s ease, visibility 0.4s ease, transform 0.4s ease;
            display: flex;
            flex-direction: column;
            overflow: hidden; /* KRITICK√â: ≈Ω√°dn√© scrollov√°n√≠ */
        }

        .slide.active {
            opacity: 1;
            visibility: visible;
            transform: scale(1);
        }

        /* FULLSCREEN - POUZE ZVƒöT≈†EN√ç, STEJN√â POZICE */
        #presentation-container:fullscreen .slide,
        #presentation-container:-webkit-full-screen .slide,
        #presentation-container:-moz-full-screen .slide,
        #presentation-container:-ms-fullscreen .slide {
            width: 95vw;
            height: 95vh;
            max-width: calc(95vh * 16/9);
            max-height: 95vh;
            border-radius: 0.5rem;
            padding: 2.5rem;
        }

        /* NADPISY - PROPORCION√ÅLN√ç VELIKOSTI */
        .slide h2 {
            color: var(--color-h);
            font-size: 2.2rem;
            font-weight: 700;
            padding-bottom: 0.5rem;
            border-bottom: 3px solid var(--color-accent);
            margin-bottom: 1.5rem;
            flex-shrink: 0;
        }
        
        .slide h3 {
            font-size: 1.4rem;
            font-weight: 700;
            color: var(--color-h);
            margin-bottom: 0.8rem;
        }
        
        /* OBSAH SLAJDU - FLEXIBILN√ç ROZLO≈ΩEN√ç */
        .slide-content {
            flex-grow: 1;
            display: flex;
            gap: 1.5rem;
            overflow: hidden; /* KRITICK√â: ≈Ω√°dn√© scrollov√°n√≠ */
            padding-bottom: 50px; /* Prostor pro z√°pat√≠ */
            /* POVINN√â: V≈†E MUS√ç B√ùT VIDƒöT I BEZ FULLSCREENU */
            height: calc(100% - 50px); /* V≈ædy se vejde */
        }
        
        /* KOMPAKTN√ç RE≈ΩIM - pro slajdy s mnoha boxy */
        .slide.compact .slide-content {
            gap: 1rem;
            padding-bottom: 40px;
        }
        
        .slide.compact .practice-box,
        .slide.compact .formula-box,
        .slide.compact .info-box {
            padding: 0.6rem 1rem;
            margin: 0.5rem 0;
        }
        
        .slide.compact .practice-box h3,
        .slide.compact .formula-box h3,
        .slide.compact .info-box h3 {
            margin-bottom: 0.3rem;
            font-size: 1.1rem;
        }
        
        .slide.compact p {
            margin-bottom: 0.5rem;
        }
        
        .slide.compact ul {
            margin: 0.3rem 0;
        }
        
        /* ULTRA-KOMPAKTN√ç RE≈ΩIM - pro velmi hust√Ω obsah */
        .slide.ultra-compact .slide-content {
            gap: 0.8rem;
            padding-bottom: 35px;
        }
        
        .slide.ultra-compact .practice-box,
        .slide.ultra-compact .formula-box,
        .slide.ultra-compact .info-box {
            padding: 0.4rem 0.8rem;
            margin: 0.3rem 0;
        }
        
        .slide.ultra-compact .practice-box h3,
        .slide.ultra-compact .formula-box h3,
        .slide.ultra-compact .info-box h3 {
            margin-bottom: 0.2rem;
            font-size: 1rem;
        }
        
        .slide.ultra-compact p {
            margin-bottom: 0.3rem;
            font-size: 0.95rem;
            line-height: 1.3;
        }
        
        .slide.ultra-compact ul {
            margin: 0.2rem 0;
        }
        
        .slide.ultra-compact ul li {
            margin-bottom: 0.1rem;
            font-size: 0.95rem;
        }
        
        /* ULTRA-COMPACT pro custom boxy (chyby, tipy) */
        .slide.ultra-compact div[style*="background-color: #ffebee"],
        .slide.ultra-compact div[style*="background-color: #e8f5e8"] {
            padding: 0.5rem !important;
            margin: 0.4rem 0 !important;
        }
        
        .slide.ultra-compact h4 {
            margin-bottom: 0.2rem;
            font-size: 0.95rem;
        }
        
        .slide.ultra-compact .two-column {
            gap: 1rem;
        }
        
        /* STYLY PRO INTERAKTIVN√ç P≈ò√çKLADY */
        .example-tabs {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1rem;
            border-bottom: 2px solid #e0e0e0;
        }
        
        .example-tab {
            padding: 0.5rem 1rem;
            background: #f5f5f5;
            border: 1px solid #ddd;
            border-bottom: none;
            border-radius: 0.5rem 0.5rem 0 0;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .example-tab.active {
            background: white;
            border-color: var(--color-accent);
            color: var(--color-accent);
            font-weight: 600;
        }
        
        .example-tab:hover {
            background: #f0f0f0;
        }
        
        .example-content {
            display: none;
            padding: 1rem;
            background: white;
            border-radius: 0 0.5rem 0.5rem 0.5rem;
        }
        
        .example-content.active {
            display: block;
        }
        
        .example-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            height: 100%;
        }
        
        .process-schema {
            display: flex;
            align-items: center;
            justify-content: center;
            background: #f8f9fa;
            border-radius: 0.5rem;
            padding: 1rem;
        }
        
        .example-calc {
            background: #f8f9fa;
            border-radius: 0.5rem;
            padding: 1rem;
        }
        
        .calc-inputs {
            display: grid;
            gap: 0.5rem;
            margin-bottom: 1rem;
        }
        
        .calc-input-row {
            display: grid;
            grid-template-columns: 1fr 80px 40px;
            gap: 0.5rem;
            align-items: center;
        }
        
        .legacy-calc-result {
            background: white;
            border: 2px solid var(--color-accent);
            border-radius: 0.5rem;
            padding: 1rem;
            margin-top: 1rem;
            display: none;
            max-height: 250px;
            overflow-y: auto;
        }
        
        .legacy-calc-result.show {
            display: block;
            animation: fadeIn 0.3s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .example-warning {
            background: #fff3cd;
            border: 1px solid #ffc107;
            border-radius: 0.25rem;
            padding: 0.5rem;
            margin: 0.5rem 0;
            font-size: 0.9rem;
        }
        
        .example-tip {
            background: #d1ecf1;
            border: 1px solid #17a2b8;
            border-radius: 0.25rem;
            padding: 0.5rem;
            margin: 0.5rem 0;
            font-size: 0.9rem;
        }
        
        /* Na slajdech bez z√°pat√≠ odstran√≠me extra prostor */
        .title-slide .slide-content,
        .final-slide .slide-content,
        .cheat-sheet .slide-content {
            padding-bottom: 0;
        }

        /* ROZLO≈ΩEN√ç PODLE OBSAHU */
        .layout-text-visual { /* Text vlevo, vizu√°l vpravo */
            flex-direction: row;
        }
        .layout-visual-text { /* Vizu√°l vlevo, text vpravo */
            flex-direction: row-reverse;
        }
        .layout-full { /* Cel√° ≈°√≠≈ôka */
            flex-direction: column;
        }
        .layout-centered { /* Centrovan√Ω obsah */
            align-items: center;
            justify-content: center;
            text-align: center;
        }

        .content-text { 
            flex: 3;
            overflow-y: auto; /* POVINN√â: Umo≈æn√≠ scrollov√°n√≠ v textu pokud je pot≈ôeba */
            max-height: 100%;
            padding-right: 0.5rem;
        }
        .content-visual { 
            flex: 2;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }
        .content-full {
            flex: 1;
            overflow: hidden;
        }

        /* OBR√ÅZKY A GRAFY - RESPONZIVN√ç VELIKOSTI */
        .content-visual img, .content-visual canvas {
            width: 100%;
            height: 100%;
            min-width: 500px;
            min-height: 400px;
            max-width: 600px;
            max-height: 500px;
            object-fit: contain;
            border-radius: 0.5rem;
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
        }

        /* SPECI√ÅLN√ç STYLY PRO TITULN√ç A Z√ÅVƒöREƒåN√ù SN√çMEK */
        .title-slide, .final-slide {
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        .title-slide h1, .final-slide h1 {
            font-size: 4rem;
            color: var(--color-h);
            font-weight: 700;
            margin-bottom: 1rem;
        }
        .title-slide h2, .final-slide h2 {
            font-size: 2.8rem;
            color: var(--color-accent);
            border: none;
            margin-bottom: 1rem;
            font-weight: 500;
        }
        .title-slide p {
            font-size: 1.3rem;
            margin-top: 1rem;
        }

        /* BOXY - OPTIMALIZOVAN√â VELIKOSTI */
        .practice-box, .formula-box, .info-box {
            padding: 0.8rem 1.2rem;
            border-left-width: 4px;
            border-radius: 0.25rem;
            margin: 0.8rem 0;
        }
        .practice-box {
            background-color: var(--bg-practice);
            border-color: var(--border-practice);
        }
        .formula-box {
            background-color: var(--bg-formula);
            border-color: var(--border-formula);
        }
        .info-box {
            background-color: #fffbe6;
            border-color: #faad14;
        }
        .practice-box h3, .formula-box h3, .info-box h3 {
            font-weight: 700;
            color: var(--color-h);
            margin-bottom: 0.4rem;
            font-size: 1.2rem;
        }

        /* Z√ÅPAT√ç SLAJD≈Æ */
        .slide-footer {
            position: absolute;
            bottom: 15px;
            left: 30px;
            right: 30px;
            height: 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.9rem;
            color: var(--color-text);
            border-top: 1px solid #e0e0e0;
            padding-top: 8px;
            background-color: transparent;
        }
        
        .slide-footer .footer-left {
            font-weight: 500;
            color: var(--color-accent);
        }
        
        .slide-footer .footer-right {
            font-weight: 700;
            color: var(--color-h);
            background-color: rgba(0, 86, 179, 0.1);
            padding: 4px 12px;
            border-radius: 12px;
            border: 1px solid var(--color-accent);
        }
        
        /* Skryt√≠ z√°pat√≠ na tituln√≠m, z√°vƒõreƒçn√©m slajdu a souhrnu */
        .title-slide .slide-footer,
        .final-slide .slide-footer,
        .cheat-sheet .slide-footer {
            display: none;
        }

        /* Z√ÅPAT√ç VE FULLSCREEN RE≈ΩIMU */
        #presentation-container:fullscreen .slide-footer,
        #presentation-container:-webkit-full-screen .slide-footer,
        #presentation-container:-moz-full-screen .slide-footer,
        #presentation-container:-ms-fullscreen .slide-footer {
            bottom: 20px;
            left: 40px;
            right: 40px;
            z-index: 1000;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            padding: 12px 20px 8px 20px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
        }

        /* INPUT ELEMENTY A KALKUL√ÅTORY */
        .input-group {
            margin-bottom: 0.8rem;
            display: flex;
            flex-direction: column;
            gap: 0.3rem;
        }
        
        .input-group label {
            font-weight: 500;
            color: var(--color-h);
            font-size: 0.9rem;
        }
        
        .input-group input,
        .calc-input,
        input[type="number"] {
            padding: 0.4rem 0.8rem;
            border: 2px solid #e1e5e9;
            border-radius: 0.4rem;
            font-size: 0.9rem;
            font-family: 'Inter', sans-serif;
            width: 100%;
            max-width: 150px;
            transition: border-color 0.2s ease;
        }
        
        .input-group input:focus,
        .calc-input:focus,
        input[type="number"]:focus {
            outline: none;
            border-color: var(--color-accent);
            box-shadow: 0 0 0 3px rgba(0, 86, 179, 0.1);
        }
        
        .calc-button,
        button[onclick*="calculate"] {
            background-color: var(--color-accent);
            color: white;
            border: none;
            padding: 0.6rem 1.2rem;
            border-radius: 0.5rem;
            font-size: 0.9rem;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.2s ease;
            font-family: 'Inter', sans-serif;
        }
        
        .calc-button:hover,
        button[onclick*="calculate"]:hover {
            background-color: #004494;
            transform: translateY(-1px);
        }

        /* NAVIGACE - V≈ΩDY VIDITELN√Å I V FULLSCREEN */
        .nav-arrow {
            position: fixed;
            top: 50%;
            transform: translateY(-50%);
            width: 3rem;
            height: 3rem;
            background-color: rgba(0, 0, 0, 0.7);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: background-color 0.2s;
            z-index: 2147483647; /* MAXIM√ÅLN√ç Z-INDEX */
            pointer-events: auto;
        }
        .nav-arrow:hover { background-color: var(--color-accent); }
        #prev-slide { left: 1rem; }
        #next-slide { right: 1rem; }

        /* PROGRESS BAR A PAGE COUNTER - MAXIM√ÅLN√ç PRIORITA */
        #progress-bar {
            position: fixed;
            bottom: 0;
            left: 0;
            height: 4px;
            background-color: var(--color-accent);
            width: 0;
            transition: width 0.3s ease;
            z-index: 2147483647; /* MAXIM√ÅLN√ç Z-INDEX */
            pointer-events: none;
        }
        
        #page-counter {
            position: fixed;
            bottom: 1rem;
            right: 2rem;
            font-size: 1.2rem;
            background-color: rgba(0,0,0,0.9);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 1.5rem;
            z-index: 2147483647; /* MAXIM√ÅLN√ç Z-INDEX */
            font-weight: bold;
            border: 2px solid rgba(255,255,255,0.3);
            pointer-events: none;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
        }
        
        /* FULLSCREEN BUTTON - MAXIM√ÅLN√ç PRIORITA */
        #fullscreen-btn {
            position: fixed;
            top: 1rem;
            right: 1rem;
            width: 3rem;
            height: 3rem;
            background-color: rgba(0, 0, 0, 0.7);
            color: white;
            border-radius: 0.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: background-color 0.2s;
            z-index: 2147483647; /* MAXIM√ÅLN√ç Z-INDEX */
            pointer-events: auto;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
        }
        #fullscreen-btn:hover { background-color: var(--color-accent); }

        /* FULLSCREEN STYLY - SKRYT√ç NAVIGAƒåN√çCH PRVK≈Æ */
        #presentation-container:fullscreen .nav-arrow,
        #presentation-container:-webkit-full-screen .nav-arrow,
        #presentation-container:-moz-full-screen .nav-arrow,
        #presentation-container:-ms-fullscreen .nav-arrow,
        #presentation-container:fullscreen #fullscreen-btn,
        #presentation-container:-webkit-full-screen #fullscreen-btn,
        #presentation-container:-moz-full-screen #fullscreen-btn,
        #presentation-container:-ms-fullscreen #fullscreen-btn {
            display: none !important;
            visibility: hidden !important;
            opacity: 0 !important;
        }

        /* FULLSCREEN - POUZE PAGE COUNTER A PROGRESS BAR VIDITELN√â */
        :fullscreen #page-counter,
        :-webkit-full-screen #page-counter,
        :-moz-full-screen #page-counter,
        :-ms-fullscreen #page-counter,
        #presentation-container:fullscreen #page-counter,
        #presentation-container:-webkit-full-screen #page-counter,
        #presentation-container:-moz-full-screen #page-counter,
        #presentation-container:-ms-fullscreen #page-counter {
            z-index: 999999999 !important;
            position: fixed !important;
            display: block !important;
            visibility: visible !important;
            opacity: 1 !important;
            bottom: 2rem !important;
            right: 3rem !important;
            font-size: 2rem !important;
            background-color: #000000 !important;
            color: #ffffff !important;
            padding: 1rem 2rem !important;
            border-radius: 3rem !important;
            font-weight: 900 !important;
            border: 4px solid #ffffff !important;
            box-shadow: 0 10px 30px rgba(0,0,0,0.8) !important;
            font-family: 'Inter', monospace !important;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.8) !important;
            transform: none !important;
            margin: 0 !important;
            left: auto !important;
            top: auto !important;
            width: auto !important;
            height: auto !important;
            max-width: none !important;
            max-height: none !important;
            min-width: auto !important;
            min-height: auto !important;
        }

        :fullscreen #progress-bar,
        :-webkit-full-screen #progress-bar,
        :-moz-full-screen #progress-bar,
        :-ms-fullscreen #progress-bar,
        #presentation-container:fullscreen #progress-bar,
        #presentation-container:-webkit-full-screen #progress-bar,
        #presentation-container:-moz-full-screen #progress-bar,
        #presentation-container:-ms-fullscreen #progress-bar {
            z-index: 999999998 !important;
            position: fixed !important;
            display: block !important;
            visibility: visible !important;
            opacity: 1 !important;
            bottom: 0 !important;
            left: 0 !important;
            width: 100vw !important;
            height: 8px !important;
            background-color: var(--color-accent) !important;
            transform: none !important;
            margin: 0 !important;
            top: auto !important;
            right: auto !important;
        }

        /* CHEAT SHEET */
        .cheat-sheet {
            padding: 1.5rem;
            overflow-y: auto;
            font-size: 16px;
        }
        .cheat-sheet h2 { 
            font-size: 2rem; 
            margin-bottom: 1rem; 
            color: var(--color-h);
            border-bottom: 3px solid var(--color-accent);
            padding-bottom: 0.5rem;
        }
        .cheat-sheet h3 { 
            font-size: 1.2rem; 
            margin-top: 1rem; 
            margin-bottom: 0.6rem; 
            color: var(--color-h); 
            border-bottom: 2px solid var(--color-accent); 
            padding-bottom: 0.2rem;
        }

        /* INTERAKTIVN√ç PRVKY */
        .interactive-calc {
            background-color: #f8f9fa;
            border: 2px solid var(--color-accent);
            border-radius: 0.5rem;
            padding: 1rem;
            margin: 0.5rem 0;
        }

        .calc-input {
            margin: 0.3rem 0.5rem;
            padding: 0.4rem;
            border: 1px solid #ccc;
            border-radius: 0.25rem;
            width: 80px;
        }

        .calc-button {
            background-color: var(--color-accent);
            color: white;
            padding: 0.5rem 1rem;
            border: none;
            border-radius: 0.25rem;
            cursor: pointer;
            margin: 0.3rem;
            font-size: 0.9rem;
        }

        .calc-button:hover {
            background-color: var(--color-h);
        }

        .result {
            background-color: #e6f7ff;
            padding: 0.8rem;
            border-radius: 0.25rem;
            margin-top: 0.8rem;
            font-weight: bold;
            font-size: 0.9rem;
        }

        /* RESPONSIVE TEXT */
        p, li {
            font-size: 1rem;
            line-height: 1.4;
            margin-bottom: 0.5rem;
        }

        ul, ol {
            margin-left: 1.2rem;
            margin-bottom: 0.8rem;
        }

        /* GRID LAYOUTS */
        .two-column {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1.5rem;
            height: 100%;
        }

        .three-column {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 1rem;
            height: 100%;
        }
    </style>
</head>
<body>
    <div id="presentation-container">
        <!-- Sn√≠mek 1: Tituln√≠ -->
        <div class="slide title-slide active">
            <h1>Hmotnostn√≠ a tepeln√© bilance</h1>
            <h2>Procesn√≠ch syst√©m≈Ø</h2>
            <p>Komplexn√≠ p≈ôehled bilancov√°n√≠ z√°kladn√≠ch procesn√≠ch jednotek</p>
            <p style="color: var(--color-accent); margin-top: 1rem;">Pro studenty magistersk√©ho studia technick√Ωch obor≈Ø</p>
        </div>

        <!-- Sn√≠mek 2: Obsah -->
        <div class="slide">
            <h2>Obsah prezentace</h2>
            <div class="slide-content layout-full">
                <div class="content-full">
                    <div class="two-column">
                        <div>
                            <ul class="list-disc space-y-3 pl-5">
                                <li><b>1. Z√°kladn√≠ principy bilancov√°n√≠:</b> Univerz√°ln√≠ bilanƒçn√≠ rovnice</li>
                                <li><b>2. Procesn√≠ apar√°ty:</b>
                                    <ul class="list-['‚Äì'] pl-4 mt-1 space-y-1">
                                        <li>M√≠siƒç (Mixer)</li>
                                        <li>Dƒõliƒç proudu (Splitter)</li>
                                        <li>Dƒõliƒç slo≈æek (Component Splitter)</li>
                                        <li>V√Ωmƒõn√≠k tepla (Heat Exchanger)</li>
                                        <li>Reaktor</li>
                                    </ul>
                                </li>
                                <li><b>3. Pokroƒçil√© koncepty:</b> F√°zov√© zmƒõny, recykl</li>
                                <li><b>4. Systematick√° metodika ≈ôe≈°en√≠</b></li>
                            </ul>
                        </div>
                        <div>
                            <ul class="list-disc space-y-3 pl-5">
                                <li><b>5. Stupnƒõ volnosti (DOF)</b></li>
                                <li><b>6. ƒåast√© chyby a jejich prevence</b></li>
                                <li><b>7. Souhrn kl√≠ƒçov√Ωch informac√≠</b></li>
                            </ul>
                            
                            <div style="background-color: var(--bg-formula); padding: 1.5rem; border-radius: 0.8rem; margin-top: 1.5rem; text-align: center;">
                                <div style="font-size: 3rem; color: var(--color-accent); margin-bottom: 0.5rem;">‚öñÔ∏è</div>
                                <h3 style="color: var(--color-h); margin-bottom: 0.5rem;">Z√°kladn√≠ princip</h3>
                                <p style="font-weight: bold;">VSTUP + ZDROJ = V√ùSTUP + SPOT≈òEBA</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Sn√≠mek 3: Z√°kladn√≠ principy -->
        <div class="slide">
            <h2>1. Z√°kladn√≠ principy bilancov√°n√≠</h2>
            <div class="slide-content layout-text-visual">
                <div class="content-text">
                    <p>Z√°kladem bilancov√°n√≠ je <b>univerz√°ln√≠ bilanƒçn√≠ rovnice</b> pro jakoukoliv extenzivn√≠ veliƒçinu:</p>
                    
                    <div class="formula-box">
                        <h3>Obecn√° bilanƒçn√≠ rovnice</h3>
                        <div style="text-align: center; margin: 1rem 0; font-size: 0.9rem; line-height: 1.6;">
                            $$\text{VSTUP} - \text{V√ùSTUP} + \text{ZDROJ} - \text{SPOT≈òEBA}$$
                            $$= \text{AKUMULACE}$$
                        </div>
                    </div>

                    <div class="info-box">
                        <h3>Ust√°len√Ω stav</h3>
                        <p>AKUMULACE = 0:</p>
                        $$\text{VSTUP} + \text{ZDROJ} = \text{V√ùSTUP} + \text{SPOT≈òEBA}$$
                    </div>
                </div>
                <div class="content-visual">
                    <canvas id="balanceScheme" width="500" height="400"></canvas>
                </div>
            </div>
        </div>

        <!-- Sn√≠mek 4: M√≠siƒç -->
        <div class="slide">
            <h2>2.1 M√≠siƒç (Mixer)</h2>
            <div class="slide-content layout-visual-text">
                <div class="content-visual">
                    <canvas id="mixerDiagram" width="500" height="400"></canvas>
                </div>
                <div class="content-text">
                    <p><b>Princip:</b> Sm√≠ch√°n√≠ vstupn√≠ch proud≈Ø bez chemick√© reakce.</p>

                    <div class="formula-box">
                        <h3>Hmotnostn√≠ bilance</h3>
                        <p><b>Celkov√°:</b> $\dot{m}_1 + \dot{m}_2 = \dot{m}_3$</p>
                        <p><b>Slo≈ækov√°:</b></p>
                        $$\dot{m}_1 \cdot x_{A,1} + \dot{m}_2 \cdot x_{A,2} = \dot{m}_3 \cdot x_{A,3}$$
                    </div>

                    <div class="formula-box">
                        <h3>Tepeln√° bilance</h3>
                        $$\dot{m}_1 h_1 + \dot{m}_2 h_2 = \dot{m}_3 h_3$$
                        <p>Pro stejn√© $c_p$: $T_3 = \frac{\dot{m}_1 T_1 + \dot{m}_2 T_2}{\dot{m}_1 + \dot{m}_2}$</p>
                    </div>

                    <div class="practice-box">
                        <h3>Aplikace</h3>
                        <p>M√≠ch√°n√≠ surovin, blending produkt≈Ø, m√≠ch√°n√≠ frakc√≠</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Sn√≠mek 5: M√≠siƒç - p≈ô√≠klad -->
        <div class="slide">
            <h2>2.1 M√≠siƒç - Interaktivn√≠ p≈ô√≠klad</h2>
            <div class="slide-content layout-full">
                <div class="content-full">
                    <div class="interactive-calc">
                        <h3 style="text-align: center; margin-bottom: 1rem;">Kalkul√°tor m√≠ch√°n√≠ vody</h3>
                        
                        <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 1.5rem; align-items: start;">
                            <div>
                                <h4><b>Proud 1:</b></h4>
                                <div>Pr≈Øtok (kg/s): <input type="number" id="mixer-m1" class="calc-input" value="2" min="0"></div>
                                <div>Teplota (¬∞C): <input type="number" id="mixer-t1" class="calc-input" value="80" min="0"></div>
                                
                                <h4 style="margin-top: 1rem;"><b>Proud 2:</b></h4>
                                <div>Pr≈Øtok (kg/s): <input type="number" id="mixer-m2" class="calc-input" value="3" min="0"></div>
                                <div>Teplota (¬∞C): <input type="number" id="mixer-t2" class="calc-input" value="20" min="0"></div>
                                
                                <button class="calc-button" onclick="calculateMixer()" style="margin-top: 1rem; font-size: 1rem; padding: 0.7rem 1.5rem;">Vypoƒç√≠tej</button>
                            </div>
                            
                            <div id="mixer-result" class="calc-result" style="visibility: visible; opacity: 1; background: #f0f8ff; border: 2px solid #0056b3; border-radius: 0.8rem; padding: 1.5rem; display: block;">
                                <h4 style="color: #003f88; margin-bottom: 1rem; border-bottom: 2px solid #0056b3; padding-bottom: 0.5rem;">üéØ V√Ωsledky m√≠ch√°n√≠</h4>
                                
                                <div style="background: white; padding: 1rem; border-radius: 0.5rem; margin-bottom: 1rem;">
                                    <p><b>Pr≈Øtok v√Ωstup:</b> <span id="mixer-flow" style="font-weight: bold; color: #003f88;">---</span> kg/s</p>
                                    <p><b>Teplota v√Ωstup:</b> <span id="mixer-temp" style="font-weight: bold; color: #003f88;">---</span> ¬∞C</p>
                                </div>
                                
                                <div style="background: #e8f5e8; padding: 0.8rem; border-radius: 0.5rem;">
                                    <b>Kontrola bilance:</b><br>
                                    <span id="mixer-check-mass" style="font-weight: bold;">---</span><br>
                                    <span id="mixer-check-temp" style="font-weight: bold;">---</span>
                                </div>
                            </div>
                            
                            <div style="background-color: var(--bg-formula); padding: 1rem; border-radius: 0.4rem;">
                                <h4 style="color: var(--color-h); margin-bottom: 0.5rem;">Pou≈æit√© vzorce:</h4>
                                <p><b>Hmotnost:</b> $\dot{m}_3 = \dot{m}_1 + \dot{m}_2$</p>
                                <p><b>Teplota:</b> $T_3 = \frac{\dot{m}_1 T_1 + \dot{m}_2 T_2}{\dot{m}_3}$</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Sn√≠mek 6: Dƒõliƒç proudu -->
        <div class="slide ultra-compact">
            <h2>2.2 Dƒõliƒç proudu (Splitter)</h2>
            <div class="slide-content layout-text-visual">
                <div class="content-text">
                    <p><b>Princip:</b> Rozdƒõlen√≠ jednoho proudu na v√≠ce proud≈Ø <b>se stejn√Ωm slo≈æen√≠m a teplotou</b>.</p>

                    <div class="formula-box">
                        <h3>Hmotnostn√≠ bilance</h3>
                        $$\dot{m}_1 = \dot{m}_2 + \dot{m}_3$$
                        <p><b>Kl√≠ƒçov√° vlastnost:</b></p>
                        $$x_{A,1} = x_{A,2} = x_{A,3}$$
                        $$T_1 = T_2 = T_3$$
                    </div>

                    <div class="info-box">
                        <h3>Charakteristiky</h3>
                        <p>Nejjednodu≈°≈°√≠ procesn√≠ jednotka - zachov√°v√° v≈°echny intenzivn√≠ vlastnosti.</p>
                    </div>

                    <div class="practice-box">
                        <h3>Praktick√© aplikace</h3>
                        <ul class="list-disc pl-5">
                            <li>Rozdƒõlovaƒçe v potrub√≠</li>
                            <li>Bypass linie</li>
                            <li>Paraleln√≠ reaktory</li>
                        </ul>
                    </div>
                </div>
                <div class="content-visual">
                    <canvas id="splitterDiagram" width="500" height="400"></canvas>
                </div>
            </div>
        </div>

        <!-- Sn√≠mek 7: Separ√°tor slo≈æek -->
        <div class="slide compact">
            <h2>2.3 Separ√°tor slo≈æek (Component Separator)</h2>
            <div class="slide-content layout-text-visual">
                <div class="content-text">
                    <p><b>Princip:</b> Rozdƒõlen√≠ jednoho proudu na v√≠ce proud≈Ø <b>s odli≈°n√Ωm slo≈æen√≠m</b>, ale stejnou teplotou. Jednotliv√© slo≈æky jsou oddƒõlen√© podle specifikovan√©ho pomƒõru.</p>

                    <div class="formula-box">
                        <h3>Hmotnostn√≠ bilance</h3>
                        <p><b>Celkov√°:</b> $\dot{m}_1 = \dot{m}_2 + \dot{m}_3$</p>
                        <p><b>Slo≈ækov√° (pro slo≈æku A):</b></p>
                        $$\dot{m}_{A,1} = \dot{m}_{A,2} + \dot{m}_{A,3}$$
                        <p>kde $\dot{m}_{A,2} = \alpha \cdot \dot{m}_{A,1}$ a $\dot{m}_{A,3} = (1-\alpha) \cdot \dot{m}_{A,1}$</p>
                        <p>$\alpha$ = pod√≠l slo≈æky A jdouc√≠ do proudu 2</p>
                    </div>

                    <div class="info-box">
                        <h3>Tepeln√° bilance</h3>
                        <p>Teplota se nemƒõn√≠: $T_1 = T_2 = T_3$</p>
                        <p>Redukuje se na celkovou hmotnostn√≠ bilanci.</p>
                    </div>

                    <div class="practice-box">
                        <h3>Aplikace</h3>
                        <ul class="list-disc pl-5">
                            <li>Fiktivn√≠ jednotka - nahrazuje destilaƒçn√≠ kolonu</li>
                            <li>Membr√°nov√© separ√°tory</li>
                            <li>Chromatografick√© kolony</li>
                        </ul>
                    </div>
                </div>
                <div class="content-visual">
                    <canvas id="componentSeparatorSchema" width="500" height="400"></canvas>
                </div>
            </div>
        </div>

        <!-- Sn√≠mek 8: Separ√°tor slo≈æek - Interaktivn√≠ p≈ô√≠klad -->
        <div class="slide">
            <h2>2.3 Separ√°tor slo≈æek - Interaktivn√≠ p≈ô√≠klad</h2>
            <div class="slide-content layout-full">
                <div class="content-full">
                    <div class="two-column">
                        <div>
                            
                            <div class="practice-box">
                                <h3>üßÆ V√Ωpoƒçet separ√°toru slo≈æek</h3>
                                <div class="input-group">
                                    <label for="divider-m1">Vstupn√≠ pr≈Øtok (kg/s):</label>
                                    <input type="number" id="divider-m1" value="100" step="0.1">
                                </div>
                                <div class="input-group">
                                    <label for="divider-conc">Koncentrace A (%):</label>
                                    <input type="number" id="divider-conc" value="40" step="1" min="0" max="100">
                                </div>
                                <div class="input-group">
                                    <label for="divider-split-a">Separace A do proudu 2 (%):</label>
                                    <input type="number" id="divider-split-a" value="80" step="1" min="0" max="100">
                                </div>
                                <div class="input-group">
                                    <label for="divider-split-b">Separace B do proudu 2 (%):</label>
                                    <input type="number" id="divider-split-b" value="30" step="1" min="0" max="100">
                                </div>
                                <div class="input-group">
                                    <label for="divider-temp">Teplota (¬∞C):</label>
                                    <input type="number" id="divider-temp" value="80" step="1">
                                </div>
                                <button onclick="calculateDivider()" class="calc-button">Vypoƒç√≠tat</button>
                            </div>
                        </div>
                        <div>
                            <div class="calc-result" id="divider-results" style="visibility: visible; opacity: 1; background: #f0f8ff; border: 2px solid #0056b3; border-radius: 0.8rem; padding: 1.5rem; display: block;">
                                <h4 style="color: #003f88; margin-bottom: 1rem; border-bottom: 2px solid #0056b3; padding-bottom: 0.5rem;">üéØ V√Ωsledky separace</h4>
                                
                                <div style="background: white; padding: 1rem; border-radius: 0.5rem; margin-bottom: 1rem;">
                                    <h5 style="color: #0056b3; margin-bottom: 0.5rem;">PROUD 2 (Koncentr√°t):</h5>
                                    <p><b>Pr≈Øtok:</b> <span id="div-m2" style="font-weight: bold; color: #003f88;">---</span> kg/s</p>
                                    <p>‚Ä¢ Slo≈æka A: <span id="div-a2" style="font-weight: bold; color: #d32f2f;">---</span>% (<span id="div-a2-kg" style="font-weight: bold;">---</span> kg/s)</p>
                                    <p>‚Ä¢ Slo≈æka B: <span id="div-b2" style="font-weight: bold; color: #1976d2;">---</span>% (<span id="div-b2-kg" style="font-weight: bold;">---</span> kg/s)</p>
                                </div>
                                
                                <div style="background: white; padding: 1rem; border-radius: 0.5rem; margin-bottom: 1rem;">
                                    <h5 style="color: #0056b3; margin-bottom: 0.5rem;">PROUD 3 (Zbytek):</h5>
                                    <p><b>Pr≈Øtok:</b> <span id="div-m3" style="font-weight: bold; color: #003f88;">---</span> kg/s</p>
                                    <p>‚Ä¢ Slo≈æka A: <span id="div-a3" style="font-weight: bold; color: #d32f2f;">---</span>% (<span id="div-a3-kg" style="font-weight: bold;">---</span> kg/s)</p>
                                    <p>‚Ä¢ Slo≈æka B: <span id="div-b3" style="font-weight: bold; color: #1976d2;">---</span>% (<span id="div-b3-kg" style="font-weight: bold;">---</span> kg/s)</p>
                                </div>
                                
                                <div style="background: #e8f5e8; padding: 0.8rem; border-radius: 0.5rem; margin-bottom: 0.8rem;">
                                    <p><b>Teplota v≈°ech proud≈Ø:</b> <span id="div-temp" style="font-weight: bold;">---</span> ¬∞C</p>
                                </div>
                                
                                <div style="background: #fff3e0; padding: 0.8rem; border-radius: 0.5rem;">
                                    <p style="margin-bottom: 0.3rem;"><b>Kontrola bilance:</b></p>
                                    <p style="font-size: 0.9em; margin-bottom: 0.2rem;">Celkov√°: <span id="div-check-total" style="font-weight: bold;">---</span></p>
                                    <p style="font-size: 0.9em; margin-bottom: 0;">Slo≈æka A: <span id="div-check-a" style="font-weight: bold;">---</span></p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Sn√≠mek 9: V√Ωmƒõn√≠k tepla -->
        <div class="slide compact">
            <h2>2.4 V√Ωmƒõn√≠k tepla (Heat Exchanger)</h2>
            <div class="slide-content layout-visual-text">
                <div class="content-visual">
                    <canvas id="heatExchangerDiagram" width="500" height="400"></canvas>
                </div>
                <div class="content-text">
                    <p><b>Princip:</b> P≈ôenos tepla mezi oddƒõlen√Ωmi proudy.</p>

                    <div class="formula-box">
                        <h3>Hmotnostn√≠ bilance</h3>
                        <p>Trivi√°ln√≠ - proudy oddƒõlen√©:</p>
                        <p>$\dot{m}_{h,in} = \dot{m}_{h,out}$</p>
                        <p>$\dot{m}_{c,in} = \dot{m}_{c,out}$</p>
                    </div>

                    <div class="formula-box">
                        <h3>Tepeln√° bilance</h3>
                        <p><b>Z√°kladn√≠ princip:</b> $Q_h = Q_c$</p>
                        $$\dot{m}_h c_{p,h} (T_{h,in} - T_{h,out}) = \dot{m}_c c_{p,c} (T_{c,out} - T_{c,in})$$
                    </div>

                    <div class="practice-box">
                        <h3>Typy</h3>
                        <ul class="list-disc pl-5">
                            <li>Trubkov√Ω (shell & tube)</li>
                            <li>Deskov√Ω</li>
                            <li>Spir√°lov√Ω</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <!-- Sn√≠mek 9: V√Ωmƒõn√≠k tepla - p≈ô√≠klad -->
        <div class="slide">
            <h2>2.4 V√Ωmƒõn√≠k tepla - Interaktivn√≠ p≈ô√≠klad</h2>
            <div class="slide-content layout-full">
                <div class="content-full">
                    <div class="interactive-calc">
                        <h3 style="text-align: center; margin-bottom: 1rem;">Kalkul√°tor v√Ωmƒõn√≠ku tepla - oh≈ôev vody</h3>
                        
                        <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 1.5rem; align-items: start;">
                            <div>
                                <h4><b>Hork√Ω proud:</b></h4>
                                <div>Pr≈Øtok (kg/s): <input type="number" id="hex-mh" class="calc-input" value="5" min="0"></div>
                                <div>T vstup (¬∞C): <input type="number" id="hex-th1" class="calc-input" value="90" min="0"></div>
                                <div>T v√Ωstup (¬∞C): <input type="number" id="hex-th2" class="calc-input" value="50" min="0"></div>
                                
                                <h4 style="margin-top: 1rem;"><b>Studen√Ω proud:</b></h4>
                                <div>Pr≈Øtok (kg/s): <input type="number" id="hex-mc" class="calc-input" value="3" min="0"></div>
                                <div>T vstup (¬∞C): <input type="number" id="hex-tc1" class="calc-input" value="25" min="0"></div>
                                
                                <button class="calc-button" onclick="calculateHeatExchanger()" style="margin-top: 1rem; font-size: 1rem; padding: 0.7rem 1.5rem;">Vypoƒç√≠tej T v√Ωstup</button>
                            </div>
                            
                            <div id="hex-results" class="calc-result" style="visibility: visible; opacity: 1; background: #f0f8ff; border: 2px solid #0056b3; border-radius: 0.8rem; padding: 1.5rem; display: block;">
                                <h4 style="color: #003f88; margin-bottom: 1rem; border-bottom: 2px solid #0056b3; padding-bottom: 0.5rem;">üéØ V√Ωsledky v√Ωmƒõn√≠ku tepla</h4>
                                
                                <div style="background: white; padding: 1rem; border-radius: 0.5rem; margin-bottom: 1rem;">
                                    <p><b>Hork√Ω proud:</b> Odevzdalo <span id="hex-qh" style="font-weight: bold; color: #d32f2f;">---</span> kW</p>
                                    <p><b>Studen√Ω proud:</b> V√Ωstupn√≠ teplota <span id="hex-tc2" style="font-weight: bold; color: #1976d2;">---</span> ¬∞C</p>
                                </div>
                                
                                <div style="background: #e8f5e8; padding: 0.8rem; border-radius: 0.5rem;">
                                    <b>Tepeln√° bilance:</b> <span id="hex-balance" style="font-weight: bold;">---</span>
                                </div>
                            </div>
                            
                            <div style="background-color: var(--bg-formula); padding: 1rem; border-radius: 0.4rem;">
                                <h4 style="color: var(--color-h); margin-bottom: 0.5rem;">Vzorce:</h4>
                                <p><b>Q_h:</b> $\dot{m}_h c_p (T_{h,in} - T_{h,out})$</p>
                                <p><b>Q_c:</b> $\dot{m}_c c_p (T_{c,out} - T_{c,in})$</p>
                                <p><b>Bilance:</b> $Q_h = Q_c$</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Sn√≠mek 10: Reaktor - z√°klady -->
        <div class="slide compact">
            <h2>2.5 Reaktor - Stechiometrick√© bilance</h2>
            <div class="slide-content layout-text-visual">
                <div class="content-text">
                    <p><b>Princip:</b> Chemick√° p≈ôemƒõna podle stechiometrick√© rovnice.</p>
                    
                    <p>Pro obecnou reakci: $aA + bB \rightarrow cC + dD$</p>

                    <div class="formula-box">
                        <h3>Stechiometrick√© koeficienty ($\nu_i$)</h3>
                        <ul class="list-disc pl-5 space-y-1">
                            <li><b>Reaktanty:</b> $\nu_A = -a$, $\nu_B = -b$ (z√°porn√©)</li>
                            <li><b>Produkty:</b> $\nu_C = +c$, $\nu_D = +d$ (kladn√©)</li>
                        </ul>
                    </div>

                    <div class="formula-box">
                        <h3>Mol√°rn√≠ bilance pro slo≈æku i</h3>
                        $$\dot{n}_{i,out} = \dot{n}_{i,in} + \nu_i \cdot \dot{\xi}$$
                        <p>$\dot{\xi}$ je <b>reakƒçn√≠ rozsah</b> [mol/s]</p>
                    </div>

                    <div class="practice-box">
                        <h3>P≈ô√≠klad: $N_2 + 3H_2 \rightarrow 2NH_3$</h3>
                        <p>$\nu_{N_2} = -1$, $\nu_{H_2} = -3$, $\nu_{NH_3} = +2$</p>
                    </div>
                </div>
                <div class="content-visual">
                    <canvas id="reactorBalance" width="500" height="400"></canvas>
                </div>
            </div>
        </div>

        <!-- Sn√≠mek 11a: Stupe≈à konverze - definice -->
        <div class="slide compact">
            <h2>2.5 Reaktor - Stupe≈à konverze: Definice</h2>
            <div class="slide-content layout-full">
                <div class="content-full">
                    <div class="formula-box">
                        <h3>Definice stupnƒõ konverze ($X_A$)</h3>
                        <p>Pod√≠l zreagovan√© l√°tky A z p≈Øvodn√≠ho mno≈æstv√≠:</p>
                        $$X_A = \frac{\text{mol≈Ø A zreagov√°no}}{\text{mol≈Ø A na vstupu}} = \frac{\dot{n}_{A,in} - \dot{n}_{A,out}}{\dot{n}_{A,in}}$$
                    </div>

                    <div class="formula-box">
                        <h3>Souvislost s reakƒçn√≠m rozsahem</h3>
                        <p>Pro kl√≠ƒçov√Ω reaktant A (s koeficientem $\nu_A$):</p>
                        $$\dot{\xi} = \frac{X_A \cdot \dot{n}_{A,in}}{-\nu_A}$$
                        <p>Proto≈æe $\nu_A < 0$ pro reaktanty</p>
                    </div>

                    <div class="info-box">
                        <h3>‚ö†Ô∏è Pozor</h3>
                        <p>Stupe≈à konverze se definuje <b>pouze pro reaktanty</b>, ne produkty!</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Sn√≠mek 11b: Stupe≈à konverze - aplikace -->
        <div class="slide compact">
            <h2>2.5 Reaktor - Stupe≈à konverze: Praktick√© pou≈æit√≠</h2>
            <div class="slide-content layout-text-visual">
                <div class="content-text">
                    <h3>Praktick√© hranice:</h3>
                    <ul class="list-disc pl-5 space-y-1">
                        <li><b>$X_A = 0$:</b> ≈Ω√°dn√° reakce</li>
                        <li><b>$X_A = 1$:</b> √öpln√° konverze A</li>
                        <li><b>Typicky:</b> 0.7 - 0.95 v pr≈Ømyslu</li>
                    </ul>

                    <div class="practice-box">
                        <h3>V√Ωpoƒçetn√≠ postup</h3>
                        <p>1. Zadej stupe≈à konverze $X_A$</p>
                        <p>2. Vypoƒçti reakƒçn√≠ rozsah $\dot{\xi}$</p>
                        <p>3. Pou≈æij mol√°rn√≠ bilance pro v≈°echny slo≈æky</p>
                    </div>
                </div>
                <div class="content-visual">
                    <canvas id="conversionDiagram" width="500" height="400"></canvas>
                </div>
            </div>
        </div>

        <!-- Sn√≠mek 12: Reaktor - tepeln√° bilance -->
        <div class="slide">
            <h2>2.5 Reaktor - Tepeln√° bilance fiktivn√≠mi proudy</h2>
            <div class="slide-content layout-full">
                <div class="content-full">
                    <p style="text-align: center; margin-bottom: 1rem;">Slo≈æit√Ω v√Ωpoƒçet rozdƒõl√≠me na <b>t≈ôi jednoduch√© kroky</b>:</p>
                    
                    <div class="three-column">
                        <div style="background-color: #e3f2fd; padding: 1rem; border-radius: 0.5rem; text-align: center;">
                            <h3 style="color: var(--color-h);">Krok 1</h3>
                            <p><b>Oh≈ôev vstup≈Ø</b></p>
                            <p>$T_{in} \rightarrow T_{ref}$</p>
                            $$\Delta H_1 = \sum \dot{n}_{i,in} c_{p,i} (T_{ref} - T_{in})$$
                        </div>
                        
                        <div style="background-color: #fff3e0; padding: 1rem; border-radius: 0.5rem; text-align: center;">
                            <h3 style="color: var(--color-h);">Krok 2</h3>
                            <p><b>Reakce p≈ôi T_ref</b></p>
                            $$\Delta H_2 = \dot{\xi} \cdot \Delta H_r^0$$
                            <p style="font-size: 0.9rem;">Exo: $\Delta H_r^0 < 0$<br>Endo: $\Delta H_r^0 > 0$</p>
                        </div>
                        
                        <div style="background-color: #e8f5e8; padding: 1rem; border-radius: 0.5rem; text-align: center;">
                            <h3 style="color: var(--color-h);">Krok 3</h3>
                            <p><b>Oh≈ôev v√Ωstup≈Ø</b></p>
                            <p>$T_{ref} \rightarrow T_{out}$</p>
                            $$\Delta H_3 = \sum \dot{n}_{i,out} c_{p,i} (T_{out} - T_{ref})$$
                        </div>
                    </div>
                    
                    <div class="formula-box" style="margin-top: 1.5rem; text-align: center;">
                        <h3>Celkov√° tepeln√° bilance</h3>
                        $$Q = \Delta H_{procesu} = \Delta H_1 + \Delta H_2 + \Delta H_3$$
                        <p>Pro <b>adiabatick√Ω reaktor</b>: $Q = 0$ (≈ôe≈°√≠me pro $T_{out}$)</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Sn√≠mek 12: Metodika ≈ôe≈°en√≠ -->
        <div class="slide compact">
            <h2>4. Systematick√° metodika ≈ôe≈°en√≠</h2>
            <div class="slide-content layout-text-visual">
                <div class="content-text">
                    <h3 style="margin-bottom: 1rem;">Postup ≈ôe≈°en√≠ bilanƒçn√≠ch probl√©m≈Ø</h3>
                    
                    <ol class="list-decimal pl-5 space-y-2">
                        <li><b>P≈ôeƒçti a pochop:</b> Co se v procesu dƒõje?</li>
                        <li><b>Nakresli sch√©ma:</b> Oznaƒç syst√©m a proudy</li>
                        <li><b>Zvol z√°klad:</b> Nap≈ô. 100 kg vstupn√≠ suroviny</li>
                        <li><b>Napi≈° rovnice:</b> Sestav hmotnostn√≠ a tepeln√© bilance</li>
                        <li><b>Spoƒç√≠tej stupnƒõ volnosti:</b> Nezn√°m√© vs. rovnice</li>
                        <li><b>Vy≈ôe≈° rovnice:</b> Postupnƒõ nebo jako soustavu</li>
                        <li><b>Zkontroluj v√Ωsledek:</b> D√°v√° smysl? Jednotky?</li>
                    </ol>

                    <div class="formula-box">
                        <h3>Kl√≠ƒçov√° kontrola</h3>
                        <p><b>Stupnƒõ volnosti (DOF):</b></p>
                        $$\text{DOF} = \text{Nezn√°m√©} - \text{Nez√°visl√© rovnice}$$
                        <p>Pro ≈ôe≈°iteln√Ω probl√©m: DOF = 0</p>
                    </div>

                    <div class="info-box">
                        <h3>üí° Zlat√© pravidlo</h3>
                        <p><b>V≈ædy zaƒçni sch√©matem!</b> Bez nƒõj se v slo≈æitƒõj≈°√≠ch p≈ô√≠kladech ztrat√≠≈°.</p>
                    </div>
                </div>
                <div class="content-visual">
                    <canvas id="methodologyDiagram" width="500" height="400"></canvas>
                </div>
            </div>
        </div>

        <!-- Sn√≠mek 13: Stupnƒõ volnosti -->
        <div class="slide compact">
            <h2>5. Stupnƒõ volnosti (DOF - Degrees of Freedom)</h2>
            <div class="slide-content layout-text-visual">
                <div class="content-text">
                    <div class="formula-box">
                        <h3>Z√°kladn√≠ definice</h3>
                        $$\text{DOF} = \text{Nezn√°m√©} - \text{Nez√°visl√© rovnice}$$
                        <p><b>Pro ≈ôe≈°iteln√Ω probl√©m:</b> DOF = 0</p>
                    </div>

                    <h3>Interpretace v√Ωsledk≈Ø:</h3>
                    <ul class="list-disc pl-5 space-y-2">
                        <li><b>DOF = 0:</b> Syst√©m je <b>plnƒõ urƒçen</b> - m√° jedin√© ≈ôe≈°en√≠</li>
                        <li><b>DOF > 0:</b> <b>Podspecifikovan√Ω</b> syst√©m - nekoneƒçnƒõ mnoho ≈ôe≈°en√≠</li>
                        <li><b>DOF < 0:</b> <b>P≈ôespecifikovan√Ω</b> syst√©m - ≈æ√°dn√© ≈ôe≈°en√≠ (konfliktn√≠ rovnice)</li>
                    </ul>

                    <div class="info-box">
                        <h3>‚ö†Ô∏è Pozor na z√°visl√© rovnice!</h3>
                        <p>Nap≈ô√≠klad u m√≠s√≠c√≠ho syst√©mu (3 proudy, 2 slo≈æky):</p>
                        <p>‚Ä¢ 3 celkov√© hmotnostn√≠ bilance ‚Üí <b>pouze 2 nez√°visl√©</b></p>
                        <p>‚Ä¢ 6 slo≈ækov√Ωch bilanc√≠ ‚Üí <b>pouze 3 nez√°visl√©</b></p>
                    </div>

                    <div class="practice-box">
                        <h3>Praktick√Ω postup</h3>
                        <p>1. Spoƒç√≠tej DOF <b>p≈ôed</b> ≈ôe≈°en√≠m</p>
                        <p>2. Pokud DOF ‚â† 0 ‚Üí definuj dodateƒçn√© podm√≠nky</p>
                        <p>3. Ovƒõ≈ô nez√°vislost rovnic</p>
                    </div>
                </div>
                <div class="content-visual">
                    <canvas id="dofDiagram" width="500" height="400"></canvas>
                </div>
            </div>
        </div>

        <!-- Sn√≠mek 14: ƒåast√© chyby -->
        <div class="slide ultra-compact">
            <h2>6. ƒåast√© chyby a jejich prevence</h2>
            <div class="slide-content layout-full">
                <div class="content-full">
                    <div class="two-column">
                        <div>
                            <h3 style="color: #d32f2f; margin-bottom: 1rem;">‚ö†Ô∏è Nejƒçastƒõj≈°√≠ chyby</h3>
                            
                            <div style="background-color: #ffebee; border-left: 5px solid #d32f2f; padding: 1rem; margin: 0.8rem 0; border-radius: 0.25rem;">
                                <h4 style="color: #d32f2f;">Jednotky</h4>
                                <p>Nejƒçastƒõj≈°√≠ zdroj chyb - v≈ædy ps√°t jednotky!</p>
                            </div>

                            <div style="background-color: #ffebee; border-left: 5px solid #d32f2f; padding: 1rem; margin: 0.8rem 0; border-radius: 0.25rem;">
                                <h4 style="color: #d32f2f;">Hmotnost vs. moly</h4>
                                <p>Pro reaktory: v≈ædy mol√°rn√≠ bilance!</p>
                            </div>

                            <div style="background-color: #ffebee; border-left: 5px solid #d32f2f; padding: 1rem; margin: 0.8rem 0; border-radius: 0.25rem;">
                                <h4 style="color: #d32f2f;">Znam√©nka</h4>
                                <p>Q > 0 (oh≈ôev), Q < 0 (chlazen√≠)</p>
                            </div>

                            <div style="background-color: #ffebee; border-left: 5px solid #d32f2f; padding: 1rem; margin: 0.8rem 0; border-radius: 0.25rem;">
                                <h4 style="color: #d32f2f;">≈†patn√© z√°klady</h4>
                                <p>Volba nevhodn√©ho v√Ωpoƒçetn√≠ho z√°kladu</p>
                            </div>

                            <div style="background-color: #ffebee; border-left: 5px solid #d32f2f; padding: 1rem; margin: 0.8rem 0; border-radius: 0.25rem;">
                                <h4 style="color: #d32f2f;">Nez√°visl√© rovnice</h4>
                                <p>Poƒç√≠t√°n√≠ z√°visl√Ωch rovnic jako nez√°visl√Ωch</p>
                            </div>
                        </div>

                        <div>
                            <h3 style="color: #2e7d32; margin-bottom: 1rem;">‚úì Prevence a kontroly</h3>
                            
                            <div style="background-color: #e8f5e8; border-left: 5px solid #2e7d32; padding: 1rem; margin: 0.8rem 0; border-radius: 0.25rem;">
                                <h4 style="color: #2e7d32;">Systematick√Ω p≈ô√≠stup</h4>
                                <ul class="list-disc pl-4">
                                    <li>V≈ædy zaƒçni sch√©matem</li>
                                    <li>Kontroluj jednotky po ka≈æd√©m kroku</li>
                                    <li>Ovƒõ≈ô celkovou bilanci</li>
                                </ul>
                            </div>

                            <div style="background-color: #e8f5e8; border-left: 5px solid #2e7d32; padding: 1rem; margin: 0.8rem 0; border-radius: 0.25rem;">
                                <h4 style="color: #2e7d32;">Kontroln√≠ ot√°zky</h4>
                                <ul class="list-disc pl-4">
                                    <li>Fyzik√°ln√≠ smysl v√Ωsledk≈Ø?</li>
                                    <li>Sed√≠ souƒçty pr≈Øtok≈Ø?</li>
                                    <li>Realistick√© koncentrace?</li>
                                </ul>
                            </div>

                            <div style="background-color: #fff3e0; border-left: 5px solid #ff9800; padding: 1rem; margin: 0.8rem 0; border-radius: 0.25rem;">
                                <h4 style="color: #ff9800;">Software pomoc</h4>
                                <ul class="list-disc pl-4">
                                    <li><b>Excel:</b> Line√°rn√≠ soustavy</li>
                                    <li><b>Python:</b> NumPy, SciPy</li>
                                    <li><b>DWSIM:</b> Simulace</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Sn√≠mek 14: P≈ô√≠klad 1 - M√≠siƒç -->
        <div class="slide compact">
            <h2>P≈ô√≠klad 1: M√≠siƒç - M√≠sen√≠ H‚ÇÇSO‚ÇÑ</h2>
            <div class="slide-content layout-full">
                <div class="content-full">
                    <div class="example-tabs">
                        <button class="example-tab active" onclick="switchTab('mixer', 'zadani')">Zad√°n√≠</button>
                        <button class="example-tab" onclick="switchTab('mixer', 'postup')">Postup</button>
                        <button class="example-tab" onclick="switchTab('mixer', 'reseni')">≈òe≈°en√≠</button>
                        <button class="example-tab" onclick="switchTab('mixer', 'vysledky')">V√Ωsledky</button>
                        <button class="example-tab" onclick="switchTab('mixer', 'chyby')">ƒåast√© chyby</button>
                    </div>
                    
                    <div class="example-content active" id="mixer-zadani">
                        <div class="example-grid">
                            <div class="process-schema">
                                <canvas id="mixerExampleDiagram" width="400" height="300"></canvas>
                            </div>
                            <div>
                                <p><b>V chemick√©m provozu</b> p≈ôipravujeme roztok H‚ÇÇSO‚ÇÑ sm√≠ch√°n√≠m:</p>
                                <ul>
                                    <li><b>Proud 1:</b> 200 kg/h roztoku s 20 % hm. H‚ÇÇSO‚ÇÑ</li>
                                    <li><b>Proud 2:</b> 50 kg/h koncentrovan√© kyseliny s 98 % hm. H‚ÇÇSO‚ÇÑ</li>
                                </ul>
                                <p><b>Vypoƒç√≠tejte:</b> Hmotnostn√≠ pr≈Øtok a koncentraci v√Ωstupn√≠ho proudu.</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="example-content" id="mixer-postup">
                        <h3>Postup ≈ôe≈°en√≠</h3>
                        <div class="two-column">
                            <div>
                                <h4>1. Nakreslit sch√©ma</h4>
                                <p>Oznaƒçte v≈°echny proudy a jejich vlastnosti.</p>
                                
                                <h4>2. Celkov√° hmotnostn√≠ bilance</h4>
                                <p><b>Princip:</b> Vstup = V√Ωstup</p>
                                $$\dot{m}_1 + \dot{m}_2 = \dot{m}_3$$
                                
                                <h4>3. Slo≈ækov√° bilance H‚ÇÇSO‚ÇÑ</h4>
                                <p><b>Princip:</b> Hmotnost H‚ÇÇSO‚ÇÑ na vstupu = na v√Ωstupu</p>
                                $$\dot{m}_1 \cdot w_1 + \dot{m}_2 \cdot w_2 = \dot{m}_3 \cdot w_3$$
                            </div>
                            <div>
                                <div class="example-tip">
                                    <b>üí° Tip:</b> V≈ædy p≈ôeveƒète procenta na zlomky (20% = 0,20)
                                </div>
                                
                                <div class="example-warning">
                                    <b>‚ö†Ô∏è Pozor:</b> Kontrolujte jednotky - v≈°e mus√≠ b√Ωt kg/h nebo g/s
                                </div>
                                
                                <h4>4. Kontrola v√Ωsledku</h4>
                                <ul>
                                    <li>V√Ωsledn√° koncentrace mus√≠ b√Ωt mezi vstupn√≠mi (20% - 98%)</li>
                                    <li>Celkov√° hmotnostn√≠ bilance mus√≠ sedƒõt</li>
                                    <li>Hmotnostn√≠ zlomky ‚â§ 1</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    
                    <div class="example-content" id="mixer-reseni">
                        <h3>≈òe≈°en√≠ krok za krokem</h3>
                        <div class="two-column">
                            <div>
                                <h4>Dan√© hodnoty:</h4>
                                <ul>
                                    <li>$\dot{m}_1 = 200$ kg/h, $w_1 = 0,20$</li>
                                    <li>$\dot{m}_2 = 50$ kg/h, $w_2 = 0,98$</li>
                                    <li>$\dot{m}_3 = ?$, $w_3 = ?$</li>
                                </ul>
                                
                                <h4>Celkov√° bilance:</h4>
                                $$\dot{m}_3 = \dot{m}_1 + \dot{m}_2$$
                                $$\dot{m}_3 = 200 + 50 = 250 \text{ kg/h}$$
                                
                                <h4>Slo≈ækov√° bilance:</h4>
                                $$200 \cdot 0{,}20 + 50 \cdot 0{,}98 = 250 \cdot w_3$$
                                $$40 + 49 = 250 \cdot w_3$$
                                $$w_3 = \frac{89}{250} = 0{,}356$$
                            </div>
                            <div>
                                <div style="background: #e8f5e8; padding: 1rem; border-radius: 0.5rem;">
                                    <h4 style="color: #2e7d32;">‚úì V√Ωsledek:</h4>
                                    <p><b>V√Ωstupn√≠ pr≈Øtok:</b> 250 kg/h</p>
                                    <p><b>Koncentrace H‚ÇÇSO‚ÇÑ:</b> 35,6 % hm.</p>
                                </div>
                                
                                <h4>Kontrola:</h4>
                                <ul>
                                    <li>35,6% je mezi 20% a 98% ‚úì</li>
                                    <li>Hmotnostn√≠ bilance: 250 = 200 + 50 ‚úì</li>
                                    <li>H‚ÇÇSO‚ÇÑ bilance: 89 = 40 + 49 ‚úì</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    
                    <div class="example-content" id="mixer-vysledky">
                        <h3>Interaktivn√≠ v√Ωpoƒçet</h3>
                        <div class="two-column">
                            <div>
                                <div class="example-calc">
                                    <h4>Zadejte hodnoty</h4>
                                    <div class="calc-inputs">
                                        <div class="calc-input-row">
                                            <label>Proud 1 - pr≈Øtok:</label>
                                            <input type="number" id="mixer2-m1" value="200" class="calc-input">
                                            <span>kg/h</span>
                                        </div>
                                        <div class="calc-input-row">
                                            <label>Proud 1 - koncentrace:</label>
                                            <input type="number" id="mixer2-w1" value="20" class="calc-input">
                                            <span>%</span>
                                        </div>
                                        <div class="calc-input-row">
                                            <label>Proud 2 - pr≈Øtok:</label>
                                            <input type="number" id="mixer2-m2" value="50" class="calc-input">
                                            <span>kg/h</span>
                                        </div>
                                        <div class="calc-input-row">
                                            <label>Proud 2 - koncentrace:</label>
                                            <input type="number" id="mixer2-w2" value="98" class="calc-input">
                                            <span>%</span>
                                        </div>
                                    </div>
                                    <button class="calc-button" onclick="solveMixer2()">Vypoƒç√≠tej</button>
                                </div>
                            </div>
                            <div>
                                <div class="calc-result" id="mixer2-result" style="visibility: visible; opacity: 1; background: #f0f8ff; border: 2px solid #0056b3; border-radius: 0.8rem; padding: 1.5rem; display: block;">
                                    <h4 style="color: #003f88; margin-bottom: 1rem; border-bottom: 2px solid #0056b3; padding-bottom: 0.5rem;">üéØ V√Ωsledek m√≠ch√°n√≠ H‚ÇÇSO‚ÇÑ</h4>
                                    
                                    <div style="background: white; padding: 1rem; border-radius: 0.5rem; margin-bottom: 1rem;">
                                        <p><b>Celkov√° bilance:</b> <span id="mixer2-mass-balance" style="font-weight: bold; color: #003f88;">---</span></p>
                                        <p><b>Slo≈ækov√° bilance H‚ÇÇSO‚ÇÑ:</b></p>
                                        <p><span id="mixer2-component-balance" style="font-weight: bold;">---</span></p>
                                        <p><span id="mixer2-component-kg" style="font-weight: bold;">---</span></p>
                                    </div>
                                    
                                    <div style="background: #e8f5e8; padding: 0.8rem; border-radius: 0.5rem; margin-bottom: 0.8rem;">
                                        <b>Koncentrace v√Ωstupn√≠ho proudu:</b> <span id="mixer2-final-conc" style="font-weight: bold; color: #d32f2f;">---</span>
                                    </div>
                                    
                                    <div style="background: #fff3e0; padding: 0.8rem; border-radius: 0.5rem;">
                                        <b>Kontrola:</b> <span id="mixer2-checks" style="font-weight: bold;">---</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="example-content" id="mixer-chyby">
                        <h3>ƒåast√© chyby a jejich prevence</h3>
                        <div class="two-column">
                            <div>
                                <div style="background: #ffebee; border-left: 5px solid #d32f2f; padding: 1rem; margin: 0.5rem 0;">
                                    <h4 style="color: #d32f2f;">‚ùå Chyba: Procenta m√≠sto zlomk≈Ø</h4>
                                    <p><b>≈†patnƒõ:</b> 200 √ó 20 + 50 √ó 98 = 250 √ó w‚ÇÉ</p>
                                    <p><b>Spr√°vnƒõ:</b> 200 √ó 0,20 + 50 √ó 0,98 = 250 √ó w‚ÇÉ</p>
                                </div>
                                
                                <div style="background: #ffebee; border-left: 5px solid #d32f2f; padding: 1rem; margin: 0.5rem 0;">
                                    <h4 style="color: #d32f2f;">‚ùå Chyba: Nekonzistentn√≠ jednotky</h4>
                                    <p>V≈°echny pr≈Øtoky mus√≠ b√Ωt ve stejn√Ωch jednotk√°ch!</p>
                                </div>
                            </div>
                            <div>
                                <div style="background: #e8f5e8; border-left: 5px solid #4caf50; padding: 1rem; margin: 0.5rem 0;">
                                    <h4 style="color: #2e7d32;">‚úì Spr√°vn√° praxe</h4>
                                    <ul>
                                        <li>V≈ædy p≈ôev√°dƒõt % na desetinn√© zlomky</li>
                                        <li>Kontrolovat jednotky v ka≈æd√©m kroku</li>
                                        <li>Ovƒõ≈ôit fyzik√°ln√≠ smysl v√Ωsledku</li>
                                    </ul>
                                </div>
                                
                                <div class="example-tip">
                                    <b>üí° Mnemotechnick√° pom≈Øcka:</b><br>
                                    "Procenta na zlomky, jednotky stejn√©, v√Ωsledek mezi krajn√≠mi"
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Sn√≠mek 15: P≈ô√≠klad 2 - Dƒõliƒç proudu -->
        <div class="slide compact">
            <h2>P≈ô√≠klad 2: Dƒõliƒç proudu - Rozdƒõlen√≠ toluenu</h2>
            <div class="slide-content layout-full">
                <div class="content-full">
                    <div class="example-tabs">
                        <button class="example-tab active" onclick="switchTab('splitter', 'zadani')">Zad√°n√≠</button>
                        <button class="example-tab" onclick="switchTab('splitter', 'postup')">Postup</button>
                        <button class="example-tab" onclick="switchTab('splitter', 'reseni')">≈òe≈°en√≠</button>
                        <button class="example-tab" onclick="switchTab('splitter', 'vysledky')">V√Ωsledky</button>
                        <button class="example-tab" onclick="switchTab('splitter', 'chyby')">ƒåast√© chyby</button>
                    </div>
                    
                    <div class="example-content active" id="splitter-zadani">
                        <div class="example-grid">
                            <div class="process-schema">
                                <canvas id="splitterExampleDiagram" width="400" height="300"></canvas>
                            </div>
                            <div>
                                <p><b>Uhlovod√≠kov√° smƒõs</b> vstupuje do dƒõliƒçe proudu:</p>
                                <ul>
                                    <li><b>Celkov√Ω pr≈Øtok:</b> 500 kg/h</li>
                                    <li><b>Slo≈æen√≠:</b> 60% toluen, 40% benzen</li>
                                    <li><b>Rozdƒõlen√≠:</b> 70% do procesu, 30% do z√°sobn√≠ku</li>
                                </ul>
                                <p><b>Vypoƒç√≠tejte:</b> Pr≈Øtoky a slo≈æen√≠ obou v√Ωstupn√≠ch proud≈Ø.</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="example-content" id="splitter-postup">
                        <h3>Postup ≈ôe≈°en√≠</h3>
                        <p><b>Kl√≠ƒçov√Ω princip:</b> Dƒõliƒç proudu nemƒõn√≠ slo≈æen√≠ - pouze dƒõl√≠ hmotnostn√≠ tok.</p>
                        
                        <div class="formula-box">
                            <h4>Platn√© vztahy pro dƒõliƒç:</h4>
                            <p>1. Celkov√° hmotnostn√≠ bilance: $\dot{m}_1 = \dot{m}_2 + \dot{m}_3$</p>
                            <p>2. Stejn√© slo≈æen√≠: $w_{A,1} = w_{A,2} = w_{A,3}$</p>
                            <p>3. Stejn√° teplota: $T_1 = T_2 = T_3$</p>
                        </div>
                        
                        <div class="example-tip">
                            <b>üí° Tip:</b> U dƒõliƒçe proudu se ≈ôe≈°√≠ pouze rozdƒõlen√≠ celkov√©ho pr≈Øtoku. Slo≈ækov√© bilance jsou trivi√°ln√≠.
                        </div>
                    </div>
                    
                    <div class="example-content" id="splitter-reseni">
                        <h3>≈òe≈°en√≠</h3>
                        <div class="two-column">
                            <div>
                                <h4>Dan√©:</h4>
                                <ul>
                                    <li>$\dot{m}_1 = 500$ kg/h</li>
                                    <li>70% do proudu 2, 30% do proudu 3</li>
                                    <li>Slo≈æen√≠: 60% toluen, 40% benzen</li>
                                </ul>
                                
                                <h4>V√Ωpoƒçet pr≈Øtok≈Ø:</h4>
                                $$\dot{m}_2 = 0{,}70 \times 500 = 350 \text{ kg/h}$$
                                $$\dot{m}_3 = 0{,}30 \times 500 = 150 \text{ kg/h}$$
                                
                                <p>Kontrola: $350 + 150 = 500$ kg/h ‚úì</p>
                            </div>
                            <div>
                                <div style="background: #e8f5e8; padding: 1rem; border-radius: 0.5rem;">
                                    <h4 style="color: #2e7d32;">‚úì V√Ωsledek:</h4>
                                    <p><b>Proud 2 (proces):</b></p>
                                    <ul>
                                        <li>Pr≈Øtok: 350 kg/h</li>
                                        <li>60% toluen, 40% benzen</li>
                                    </ul>
                                    <p><b>Proud 3 (z√°sobn√≠k):</b></p>
                                    <ul>
                                        <li>Pr≈Øtok: 150 kg/h</li>
                                        <li>60% toluen, 40% benzen</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="example-content" id="splitter-vysledky">
                        <h3>Interaktivn√≠ v√Ωpoƒçet</h3>
                        <div class="two-column">
                            <div>
                                <div class="example-calc">
                                    <h4>Zadejte hodnoty</h4>
                                    <div class="calc-inputs">
                                        <div class="calc-input-row">
                                            <label>Vstupn√≠ pr≈Øtok:</label>
                                            <input type="number" id="splitter-m1" value="500" class="calc-input">
                                            <span>kg/h</span>
                                        </div>
                                        <div class="calc-input-row">
                                            <label>Pod√≠l do procesu:</label>
                                            <input type="number" id="splitter-split" value="70" class="calc-input">
                                            <span>%</span>
                                        </div>
                                    </div>
                                    <button class="calc-button" onclick="solveSplitter()">Vypoƒç√≠tej</button>
                                </div>
                            </div>
                            <div>
                                <div class="calc-result" id="splitter-result" style="visibility: visible; opacity: 1; background: #f0f8ff; border: 2px solid #0056b3; border-radius: 0.8rem; padding: 1.5rem; display: block;">
                                    <h4 style="color: #003f88; margin-bottom: 1rem; border-bottom: 2px solid #0056b3; padding-bottom: 0.5rem;">üéØ V√Ωsledek dƒõlen√≠ toluenu</h4>
                                    
                                    <div style="background: white; padding: 1rem; border-radius: 0.5rem; margin-bottom: 1rem;">
                                        <p><b>Proud 2:</b> <span id="splitter-m2" style="font-weight: bold; color: #1976d2;">---</span> kg/h (<span id="splitter-perc2" style="font-weight: bold;">---</span>%)</p>
                                        <p><b>Proud 3:</b> <span id="splitter-m3" style="font-weight: bold; color: #d32f2f;">---</span> kg/h (<span id="splitter-perc3" style="font-weight: bold;">---</span>%)</p>
                                    </div>
                                    
                                    <div style="background: #e8f5e8; padding: 0.8rem; border-radius: 0.5rem; margin-bottom: 0.8rem;">
                                        <b>Kontrola:</b> <span id="splitter-check" style="font-weight: bold;">---</span>
                                    </div>
                                    
                                    <div style="background: #fff3e0; padding: 0.8rem; border-radius: 0.5rem;">
                                        <b>Pozn√°mka:</b> <span id="splitter-notes" style="font-weight: bold;">---</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="example-content" id="splitter-chyby">
                        <h3>ƒåast√© chyby</h3>
                        <div style="background: #ffebee; border-left: 5px solid #d32f2f; padding: 1rem; margin: 0.5rem 0;">
                            <h4 style="color: #d32f2f;">‚ùå Zbyteƒçn√° slo≈ækov√° bilance</h4>
                            <p>Studenti ƒçasto sestavuj√≠ slo≈æitou rovnici:</p>
                            <p>$\dot{m}_1 \cdot w_{toluen,1} = \dot{m}_2 \cdot w_{toluen,2} + \dot{m}_3 \cdot w_{toluen,3}$</p>
                            <p><b>Nen√≠ pot≈ôeba!</b> U dƒõliƒçe je $w_{toluen,1} = w_{toluen,2} = w_{toluen,3}$</p>
                        </div>
                        
                        <div style="background: #e8f5e8; border-left: 5px solid #4caf50; padding: 1rem; margin: 0.5rem 0;">
                            <h4 style="color: #2e7d32;">‚úì Spr√°vn√Ω p≈ô√≠stup</h4>
                            <p>U dƒõliƒçe proudu staƒç√≠:</p>
                            <ol>
                                <li>Spoƒç√≠tat dƒõlen√≠ celkov√©ho pr≈Øtoku</li>
                                <li>P≈ôevz√≠t stejn√© slo≈æen√≠ pro v≈°echny proudy</li>
                            </ol>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Sn√≠mek 16: P≈ô√≠klad 3 - Reaktor -->
        <div class="slide compact">
            <h2>P≈ô√≠klad 3: Reaktor - Synt√©za amoniaku</h2>
            <div class="slide-content layout-full">
                <div class="content-full">
                    <div class="example-tabs">
                        <button class="example-tab active" onclick="switchTab('reactor', 'zadani')">Zad√°n√≠</button>
                        <button class="example-tab" onclick="switchTab('reactor', 'postup')">Postup</button>
                        <button class="example-tab" onclick="switchTab('reactor', 'reseni')">≈òe≈°en√≠</button>
                        <button class="example-tab" onclick="switchTab('reactor', 'vysledky')">V√Ωsledky</button>
                        <button class="example-tab" onclick="switchTab('reactor', 'chyby')">ƒåast√© chyby</button>
                    </div>
                    
                    <div class="example-content active" id="reactor-zadani">
                        <div class="example-grid">
                            <div class="process-schema">
                                <canvas id="reactorExampleDiagram" width="400" height="300"></canvas>
                            </div>
                            <div>
                                <p><b>Do reaktoru</b> vstupuje stechiometrick√° smƒõs N‚ÇÇ a H‚ÇÇ:</p>
                                <ul>
                                    <li><b>Celkov√Ω mol√°rn√≠ pr≈Øtok:</b> 100 mol/s</li>
                                    <li><b>Reakce:</b> N‚ÇÇ + 3H‚ÇÇ ‚Üí 2NH‚ÇÉ</li>
                                    <li><b>Konverze dus√≠ku:</b> 25%</li>
                                </ul>
                                <p><b>Vypoƒç√≠tejte:</b> Mol√°rn√≠ pr≈Øtoky v≈°ech slo≈æek na v√Ωstupu.</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="example-content" id="reactor-postup">
                        <h3>Postup ≈ôe≈°en√≠</h3>
                        <div class="two-column">
                            <div>
                                <h4>1. Stechiometrie a vstupn√≠ proudy</h4>
                                <p><b>N‚ÇÇ + 3H‚ÇÇ ‚Üí 2NH‚ÇÉ</b></p>
                                <p>Pomƒõr 1:3, celkem 4 "d√≠ly"</p>
                                <ul>
                                    <li>N‚ÇÇ: 1/4 √ó 100 = 25 mol/s</li>
                                    <li>H‚ÇÇ: 3/4 √ó 100 = 75 mol/s</li>
                                    <li>NH‚ÇÉ: 0 mol/s (ƒçist√Ω vstup)</li>
                                </ul>
                                
                                <h4>2. Konverze</h4>
                                <p><b>Konverze X = 25%</b> vzta≈æen√° k N‚ÇÇ</p>
                                <p>Zreagovan√Ω N‚ÇÇ = 25 √ó 0,25 = 6,25 mol/s</p>
                            </div>
                            <div>
                                <div class="example-tip">
                                    <b>üí° Tip:</b> U reaktor≈Ø pracujeme v≈ædy s moly, ne s hmotnost√≠!
                                </div>
                                
                                <div class="example-warning">
                                    <b>‚ö†Ô∏è Pozor:</b> Stechiometrick√© pomƒõry jsou mol√°rn√≠ (1:3:2)
                                </div>
                                
                                <h4>3. Mol√°rn√≠ bilance</h4>
                                <p><b>Obecn√° rovnice:</b></p>
                                <p>V√ùSTUP = VSTUP - ZREAGOVALO + VZNIKLO</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="example-content" id="reactor-reseni">
                        <h3>≈òe≈°en√≠ krok za krokem</h3>
                        <div class="two-column">
                            <div>
                                <h4>Vstupn√≠ proudy:</h4>
                                <ul>
                                    <li>n(N‚ÇÇ,in) = 25 mol/s</li>
                                    <li>n(H‚ÇÇ,in) = 75 mol/s</li>
                                    <li>n(NH‚ÇÉ,in) = 0 mol/s</li>
                                </ul>
                                
                                <h4>Zreagovan√© mno≈æstv√≠:</h4>
                                <p>n(N‚ÇÇ,reag) = 25 √ó 0,25 = <b>6,25 mol/s</b></p>
                                <p>n(H‚ÇÇ,reag) = 3 √ó 6,25 = <b>18,75 mol/s</b></p>
                                <p>n(NH‚ÇÉ,vznik) = 2 √ó 6,25 = <b>12,5 mol/s</b></p>
                                
                                <h4>V√Ωstupn√≠ mol√°rn√≠ bilance:</h4>
                                <ul>
                                    <li>N‚ÇÇ: 25 - 6,25 = <b>18,75 mol/s</b></li>
                                    <li>H‚ÇÇ: 75 - 18,75 = <b>56,25 mol/s</b></li>
                                    <li>NH‚ÇÉ: 0 + 12,5 = <b>12,5 mol/s</b></li>
                                </ul>
                            </div>
                            <div>
                                <div style="background: #e8f5e8; padding: 1rem; border-radius: 0.5rem;">
                                    <h4 style="color: #2e7d32;">‚úì V√Ωsledek:</h4>
                                    <p><b>V√Ωstupn√≠ mol√°rn√≠ toky:</b></p>
                                    <ul>
                                        <li><b>N‚ÇÇ:</b> 18,75 mol/s</li>
                                        <li><b>H‚ÇÇ:</b> 56,25 mol/s</li>
                                        <li><b>NH‚ÇÉ:</b> 12,5 mol/s</li>
                                    </ul>
                                    <p><b>Celkem:</b> 87,5 mol/s</p>
                                </div>
                                
                                <h4>Kontrola:</h4>
                                <ul>
                                    <li>Stechiometrie: N‚ÇÇ:H‚ÇÇ:NH‚ÇÉ = 6,25:18,75:12,5 = 1:3:2 ‚úì</li>
                                    <li>Konverze: 6,25/25 = 0,25 = 25% ‚úì</li>
                                    <li>Celkov√© moly se zmƒõnily (100‚Üí87,5) ‚úì</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    
                    <div class="example-content" id="reactor-vysledky">
                        <h3>Interaktivn√≠ v√Ωpoƒçet</h3>
                        <div class="two-column">
                            <div>
                                <div class="example-calc">
                                    <h4>Zadejte hodnoty</h4>
                                    <div class="calc-inputs">
                                        <div class="calc-input-row">
                                            <label>H‚ÇÇ pr≈Øtok:</label>
                                            <input type="number" id="reactorH2Input" value="100" class="calc-input">
                                            <span>mol/h</span>
                                        </div>
                                        <div class="calc-input-row">
                                            <label>Konverze N‚ÇÇ:</label>
                                            <input type="number" id="reactorConversionInput" value="80" class="calc-input">
                                            <span>%</span>
                                        </div>
                                    </div>
                                    <button class="calc-button" onclick="solveReactor()">Vypoƒç√≠tej</button>
                                </div>
                            </div>
                            <div>
                                <div class="calc-result" id="reactor-result" style="visibility: visible; opacity: 1; background: #f0f8ff; border: 2px solid #0056b3; border-radius: 0.8rem; padding: 1.5rem; display: block;">
                                    <h4 style="color: #003f88; margin-bottom: 1rem; border-bottom: 2px solid #0056b3; padding-bottom: 0.5rem;">üéØ ≈òe≈°en√≠ synt√©zy amoniaku</h4>
                                    
                                    <div style="background: white; padding: 1rem; border-radius: 0.5rem; margin-bottom: 1rem;">
                                        <p><strong>Vstup:</strong></p>
                                        <p>‚Ä¢ N‚ÇÇ: <span id="react-n2-in" style="font-weight: bold; color: #1976d2;">---</span> mol/h</p>
                                        <p>‚Ä¢ H‚ÇÇ: <span id="react-h2-in" style="font-weight: bold; color: #1976d2;">---</span> mol/h</p>
                                        <p><strong>V√Ωstup:</strong></p>
                                        <p>‚Ä¢ N‚ÇÇ: <span id="react-n2-out" style="font-weight: bold; color: #1976d2;">---</span> mol/h</p>
                                        <p>‚Ä¢ H‚ÇÇ: <span id="react-h2-out" style="font-weight: bold; color: #1976d2;">---</span> mol/h</p>
                                        <p>‚Ä¢ NH‚ÇÉ: <span id="react-nh3-out" style="font-weight: bold; color: #d32f2f;">---</span> mol/h</p>
                                    </div>
                                    
                                    <div style="background: #e8f5e8; padding: 0.8rem; border-radius: 0.5rem; margin-bottom: 0.8rem;">
                                        <b>Kontrola bilance:</b> <span id="react-check" style="font-weight: bold;">---</span>
                                    </div>
                                    
                                    <div style="background: #fff3e0; padding: 0.8rem; border-radius: 0.5rem;">
                                        <b>Konverze:</b> <span id="react-conv" style="font-weight: bold; color: #d32f2f;">---</span><br>
                                        <b>Reakƒçn√≠ extent:</b> <span id="react-extent" style="font-weight: bold;">---</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="example-content" id="reactor-chyby">
                        <h3>ƒåast√© chyby u reaktor≈Ø</h3>
                        <div class="two-column">
                            <div>
                                <div style="background: #ffebee; border-left: 5px solid #d32f2f; padding: 1rem; margin: 0.5rem 0;">
                                    <h4 style="color: #d32f2f;">‚ùå Kritick√° chyba: Hmotnost m√≠sto mol≈Ø</h4>
                                    <p>Stechiometrick√© v√Ωpoƒçty <b>MUS√ç</b> b√Ωt v molech!</p>
                                    <p><b>≈†patnƒõ:</b> Pracovat s kg a pomƒõry 1:3:2</p>
                                    <p><b>Spr√°vnƒõ:</b> P≈ôev√©st na moly, pak stechiometrie</p>
                                </div>
                                
                                <div style="background: #ffebee; border-left: 5px solid #d32f2f; padding: 1rem; margin: 0.5rem 0;">
                                    <h4 style="color: #d32f2f;">‚ùå Chyba: Celkov√Ω poƒçet mol≈Ø</h4>
                                    <p>Na rozd√≠l od hmotnosti se celkov√Ω poƒçet mol≈Ø p≈ôi reakci mƒõn√≠!</p>
                                    <p>Vstup: 100 mol/s ‚Üí V√Ωstup: 87,5 mol/s</p>
                                </div>
                            </div>
                            <div>
                                <div style="background: #e8f5e8; border-left: 5px solid #4caf50; padding: 1rem; margin: 0.5rem 0;">
                                    <h4 style="color: #2e7d32;">‚úì Spr√°vn√Ω postup</h4>
                                    <ol>
                                        <li>P≈ôev√©st v≈°e na mol√°rn√≠ toky</li>
                                        <li>Urƒçit stechiometrick√© pomƒõry</li>
                                        <li>Spoƒç√≠tat zreagovan√© mno≈æstv√≠ z konverze</li>
                                        <li>Aplikovat mol√°rn√≠ bilanci pro ka≈ædou slo≈æku</li>
                                        <li>Zkontrolovat stechiometrii</li>
                                    </ol>
                                </div>
                                
                                <div class="example-tip">
                                    <b>üí° Mnemotechnick√° pom≈Øcka:</b><br>
                                    "Reaktor = moly, stechiometrie, bilance po slo≈æk√°ch"
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Sn√≠mek 17: P≈ô√≠klad 4: Prost√Ω dƒõliƒç -->
        <div class="slide">
            <h2>P≈ô√≠klad 4: Separ√°tor slo≈æek - Rozdƒõlen√≠ smƒõsi</h2>
            <div class="slide-content layout-full">
                <div class="content-full">
                    <div class="example-tabs">
                        <button class="example-tab active" onclick="switchTab('simple-divider', 'zadani')">Zad√°n√≠</button>
                        <button class="example-tab" onclick="switchTab('simple-divider', 'postup')">Postup</button>
                        <button class="example-tab" onclick="switchTab('simple-divider', 'reseni')">≈òe≈°en√≠</button>
                        <button class="example-tab" onclick="switchTab('simple-divider', 'vysledky')">V√Ωsledky</button>
                        <button class="example-tab" onclick="switchTab('simple-divider', 'chyby')">ƒåast√© chyby</button>
                    </div>
                    
                    <div class="example-content active" id="simple-divider-zadani">
                        <div class="example-grid">
                            <div class="process-schema">
                                <canvas id="simpleDividerExampleDiagram" width="400" height="300"></canvas>
                            </div>
                            <div>
                                <p><b>V separaƒçn√≠m procesu</b> rozdƒõlujeme smƒõs podle slo≈æek:</p>
                                <ul>
                                    <li><b>Vstupn√≠ proud:</b> 1000 kg/h smƒõsi (40% etanol, 60% voda)</li>
                                    <li><b>Teplota:</b> 80¬∞C</li>
                                    <li><b>Separace etanolu:</b> 80% etanolu jde do proudu 1, 20% do proudu 2</li>
                                    <li><b>Separace vody:</b> 30% vody jde do proudu 1, 70% do proudu 2</li>
                                </ul>
                                <p><b>Vypoƒç√≠tejte:</b> Hmotnostn√≠ pr≈Øtoky a slo≈æen√≠ obou v√Ωstupn√≠ch proud≈Ø.</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="example-content" id="simple-divider-postup">
                        <h3>Postup ≈ôe≈°en√≠</h3>
                        <div class="two-column">
                            <div>
                                <p><b>1. Hmotnostn√≠ bilance vstupn√≠ch slo≈æek:</b></p>
                                <p>$$\dot{m}_{etanol,vstup} = 1000 \times 0.40 = 400 \text{ kg/h}$$</p>
                                <p>$$\dot{m}_{voda,vstup} = 1000 \times 0.60 = 600 \text{ kg/h}$$</p>
                                
                                <p><b>2. Separace etanolu podle pomƒõru:</b></p>
                                <p>$$\dot{m}_{etanol,proud1} = 400 \times 0.80 = 320 \text{ kg/h}$$</p>
                                <p>$$\dot{m}_{etanol,proud2} = 400 \times 0.20 = 80 \text{ kg/h}$$</p>
                            </div>
                            <div>
                                <p><b>3. Separace vody podle pomƒõru:</b></p>
                                <p>$$\dot{m}_{voda,proud1} = 600 \times 0.30 = 180 \text{ kg/h}$$</p>
                                <p>$$\dot{m}_{voda,proud2} = 600 \times 0.70 = 420 \text{ kg/h}$$</p>
                                
                                <p><b>4. Celkov√© pr≈Øtoky a slo≈æen√≠:</b></p>
                                <p>$$\dot{m}_{proud1} = 320 + 180 = 500 \text{ kg/h}$$</p>
                                <p>$$\dot{m}_{proud2} = 80 + 420 = 500 \text{ kg/h}$$</p>
                                <p><b>Teplota se nemƒõn√≠:</b> v≈°echny proudy 80¬∞C</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="example-content" id="simple-divider-reseni">
                        <h3>Detailn√≠ ≈ôe≈°en√≠</h3>
                        <div class="two-column">
                            <div>
                                <div class="formula-box">
                                    <h3>Hmotnostn√≠ bilance</h3>
                                    <p>$$\dot{m}_{vstup} = \dot{m}_{proud1} + \dot{m}_{proud2}$$</p>
                                    <p>$$1000 = 500 + 500 \text{ kg/h}$$</p>
                                </div>
                                
                                <div class="practice-box">
                                    <h3>Slo≈ækov√° bilance etanolu</h3>
                                    <p>$$\dot{m}_{etanol,vstup} = \dot{m}_{etanol,proud1} + \dot{m}_{etanol,proud2}$$</p>
                                    <p>$$400 = 320 + 80 \text{ kg/h}$$</p>
                                    <p><b>Separaƒçn√≠ koeficient etanolu:</b> Œ± = 0.80</p>
                                </div>
                            </div>
                            <div>
                                <div class="formula-box">
                                    <h3>Slo≈æen√≠ v√Ωstupn√≠ch proud≈Ø</h3>
                                    <p><b>Proud 1 (320 kg etanolu + 180 kg vody):</b></p>
                                    <p>‚Ä¢ Etanol: 320/500 = 64.0% hm.</p>
                                    <p>‚Ä¢ Voda: 180/500 = 36.0% hm.</p>
                                    <p><b>Proud 2 (80 kg etanolu + 420 kg vody):</b></p>
                                    <p>‚Ä¢ Etanol: 80/500 = 16.0% hm.</p>
                                    <p>‚Ä¢ Voda: 420/500 = 84.0% hm.</p>
                                </div>
                                
                                <div class="info-box">
                                    <h3>Kl√≠ƒçov√° vlastnost separ√°toru</h3>
                                    <p><b>R≈ÆZN√Å slo≈æen√≠:</b> 64% vs 16% etanolu</p>
                                    <p><b>Teplota zachov√°na:</b> v≈°echny proudy 80¬∞C</p>
                                    <p><b>Bilance sed√≠:</b> 500 + 500 = 1000 kg/h</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="example-content" id="simple-divider-vysledky">
                        <h3>Interaktivn√≠ v√Ωpoƒçet</h3>
                        <div class="two-column">
                            <div>
                                <div class="example-calc">
                                    <h4>Zadejte hodnoty</h4>
                                    <div class="calc-inputs">
                                        <div class="calc-input-row">
                                            <label>Vstupn√≠ pr≈Øtok:</label>
                                            <input type="number" id="simple-divider-m1" value="1000" class="calc-input">
                                            <span>kg/h</span>
                                        </div>
                                        <div class="calc-input-row">
                                            <label>Koncentrace etanolu:</label>
                                            <input type="number" id="simple-divider-conc" value="40" class="calc-input">
                                            <span>%</span>
                                        </div>
                                        <div class="calc-input-row">
                                            <label>Separace etanolu do proudu 1:</label>
                                            <input type="number" id="simple-divider-eth-sep" value="80" class="calc-input">
                                            <span>%</span>
                                        </div>
                                        <div class="calc-input-row">
                                            <label>Separace vody do proudu 1:</label>
                                            <input type="number" id="simple-divider-water-sep" value="30" class="calc-input">
                                            <span>%</span>
                                        </div>
                                        <div class="calc-input-row">
                                            <label>Teplota vstupu:</label>
                                            <input type="number" id="simple-divider-temp" value="80" class="calc-input">
                                            <span>¬∞C</span>
                                        </div>
                                    </div>
                                    <button class="calc-button" onclick="solveSimpleDivider()">Vypoƒç√≠tej</button>
                                </div>
                            </div>
                            <div>
                                <div class="calc-result" id="simple-divider-result" style="visibility: visible; opacity: 1; background: #f0f8ff; border: 2px solid #0056b3; border-radius: 0.8rem; padding: 1.5rem; display: block;">
                                    <h4 style="color: #003f88; margin-bottom: 1rem; border-bottom: 2px solid #0056b3; padding-bottom: 0.5rem;">üéØ V√Ωsledek separace ethanol-voda</h4>
                                    
                                    <div style="background: white; padding: 1rem; border-radius: 0.5rem; margin-bottom: 1rem;">
                                        <p><b>Proud 2 (Koncentrovan√Ω):</b> <span id="sep-m2" style="font-weight: bold; color: #003f88;">---</span> kg/h</p>
                                        <p>‚Ä¢ Ethanol: <span id="sep-eth2" style="font-weight: bold; color: #d32f2f;">---</span>% (<span id="sep-eth2-kg" style="font-weight: bold;">---</span> kg/h)</p>
                                        <p>‚Ä¢ Voda: <span id="sep-water2" style="font-weight: bold; color: #1976d2;">---</span>% (<span id="sep-water2-kg" style="font-weight: bold;">---</span> kg/h)</p>
                                        
                                        <p style="margin-top: 1rem;"><b>Proud 3 (Z≈ôedƒõn√Ω):</b> <span id="sep-m3" style="font-weight: bold; color: #003f88;">---</span> kg/h</p>
                                        <p>‚Ä¢ Ethanol: <span id="sep-eth3" style="font-weight: bold; color: #d32f2f;">---</span>% (<span id="sep-eth3-kg" style="font-weight: bold;">---</span> kg/h)</p>
                                        <p>‚Ä¢ Voda: <span id="sep-water3" style="font-weight: bold; color: #1976d2;">---</span>% (<span id="sep-water3-kg" style="font-weight: bold;">---</span> kg/h)</p>
                                    </div>
                                    
                                    <div style="background: #e8f5e8; padding: 0.8rem; border-radius: 0.5rem;">
                                        <b>Kontrola bilance:</b> <span id="sep-check" style="font-weight: bold;">---</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="example-content" id="simple-divider-chyby">
                        <h3>ƒåast√© chyby a jejich prevence</h3>
                        <div class="two-column">
                            <div>
                                <div class="practice-box">
                                    <h3>‚ùå Chyba 1: Stejn√© slo≈æen√≠</h3>
                                    <p><b>Probl√©m:</b> Studenti poƒç√≠taj√≠ se stejn√Ωm slo≈æen√≠m u v√Ωstup≈Ø</p>
                                    <p><b>≈òe≈°en√≠:</b> U separ√°toru slo≈æek se slo≈æen√≠ <b>v≈ædy mƒõn√≠</b></p>
                                </div>
                                
                                <div class="practice-box">
                                    <h3>‚ùå Chyba 2: Separaƒçn√≠ koeficienty</h3>
                                    <p><b>Probl√©m:</b> Nerozli≈°en√≠ mezi separac√≠ slo≈æek A a B</p>
                                    <p><b>≈òe≈°en√≠:</b> Ka≈æd√° slo≈æka m√° sv≈Øj separaƒçn√≠ pomƒõr</p>
                                </div>
                            </div>
                            <div>
                                <div class="practice-box">
                                    <h3>‚ùå Chyba 3: Z√°mƒõna s dƒõliƒçem proudu</h3>
                                    <p><b>Probl√©m:</b> Z√°mƒõna separ√°toru slo≈æek za prost√Ω dƒõliƒç</p>
                                    <p><b>≈òe≈°en√≠:</b> Separ√°tor = r≈Øzn√° slo≈æen√≠, dƒõliƒç = stejn√° slo≈æen√≠</p>
                                </div>
                                
                                <div class="info-box">
                                    <h3>‚úÖ Tip pro kontrolu</h3>
                                    <p>Celkov√° bilance: 500 + 500 = 1000 kg/h ‚úì</p>
                                    <p>Slo≈ækov√° bilance etanolu: 320 + 80 = 400 kg/h ‚úì</p>
                                    <p>V√Ωstupn√≠ slo≈æen√≠ MUS√ç b√Ωt r≈Øzn√©!</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Sn√≠mek 18: Z√°vƒõreƒçn√Ω -->
        <div class="slide final-slide">
            <h1>Dƒõkuji za pozornost</h1>
            <h2>Prostor pro va≈°e dotazy</h2>
        </div>

        <!-- Sn√≠mek 15: Cheat Sheet -->
        <div class="slide cheat-sheet">
            <h2>Souhrn kl√≠ƒçov√Ωch informac√≠</h2>
            
            <div style="columns: 2; column-gap: 2rem;">
                <h3>Univerz√°ln√≠ bilanƒçn√≠ rovnice</h3>
                <div style="background: #eef2f7; padding: 0.8rem; border-radius: 0.25rem; margin: 0.4rem 0;">
                    <b>Obecn√°:</b> VSTUP - V√ùSTUP + ZDROJ - SPOT≈òEBA = AKUMULACE<br>
                    <b>Ust√°len√Ω stav:</b> VSTUP + ZDROJ = V√ùSTUP + SPOT≈òEBA
                </div>

                <h3>Procesn√≠ apar√°ty</h3>
                <ul>
                    <li><b>M√≠siƒç:</b> $\dot{m}_1 + \dot{m}_2 = \dot{m}_3$, slo≈æen√≠ se m√≠s√≠</li>
                    <li><b>Dƒõliƒç proudu:</b> $\dot{m}_1 = \dot{m}_2 + \dot{m}_3$, stejn√© slo≈æen√≠</li>
                    <li><b>Dƒõliƒç slo≈æek:</b> Rozd√≠ln√© slo≈æen√≠, +energie</li>
                    <li><b>V√Ωmƒõn√≠k:</b> $Q_h = Q_c$, oddƒõlen√© proudy</li>
                    <li><b>Reaktor:</b> Stechiometrie, ¬±teplo reakce</li>
                </ul>

                <h3>Reaktor - kl√≠ƒçov√© rovnice</h3>
                <div style="background: #eef2f7; padding: 0.8rem; border-radius: 0.25rem; margin: 0.4rem 0;">
                    <b>Mol√°rn√≠ bilance:</b> $\dot{n}_{i,out} = \dot{n}_{i,in} + \nu_i \cdot \dot{\xi}$<br>
                    <b>Tepeln√° bilance:</b> $Q = \Delta H_1 + \Delta H_2 + \Delta H_3$
                </div>

                <h3>Metodika (7 krok≈Ø)</h3>
                <ol>
                    <li>Pochopit zad√°n√≠</li>
                    <li><b>Nakreslit sch√©ma</b></li>
                    <li>Zvolit z√°klad</li>
                    <li>Napsat rovnice</li>
                    <li>Stupnƒõ volnosti</li>
                    <li>Vy≈ôe≈°it</li>
                    <li>Zkontrolovat</li>
                </ol>

                <h3>ƒåast√© chyby</h3>
                <ul>
                    <li><b>Jednotky</b> - v≈ædy kontrolovat</li>
                    <li><b>Hmotnost vs moly</b> - reaktory = moly!</li>
                    <li><b>Znam√©nka</b> - Q, ŒîH·µ£ smƒõry</li>
                    <li><b>Hranice syst√©mu</b> - spr√°vn√© definov√°n√≠</li>
                </ul>

                <h3>Kontroly</h3>
                <ul>
                    <li><b>Celkov√° hmotnostn√≠ bilance</b> (v≈ædy plat√≠)</li>
                    <li><b>Fyzik√°ln√≠ smysl</b> v√Ωsledk≈Ø</li>
                    <li><b>Jednotky</b> ve v≈°ech kroc√≠ch</li>
                    <li><b>Stupnƒõ volnosti</b> ‚â§ 0</li>
                </ul>

                <h3>Software n√°stroje</h3>
                <ul>
                    <li><b>Excel:</b> Soustavy rovnic, parametrick√© studie</li>
                    <li><b>Python:</b> NumPy.linalg.solve, SciPy.optimize</li>
                    <li><b>DWSIM:</b> Procesn√≠ simulace (zdarma)</li>
                    <li><b>Aspen Plus:</b> Pr≈Ømyslov√Ω standard</li>
                </ul>
            </div>
        </div>
    </div>

    <!-- Navigaƒçn√≠ prvky -->
    <div id="prev-slide" class="nav-arrow">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="15 18 9 12 15 6"></polyline></svg>
    </div>
    <div id="next-slide" class="nav-arrow">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="9 18 15 12 9 6"></polyline></svg>
    </div>
    
    <div id="fullscreen-btn">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M8 3v3a2 2 0 0 1-2 2H3m18 0h-3a2 2 0 0 1-2-2V3m0 18v-3a2 2 0 0 1 2-2h3m-18 0h3a2 2 0 0 1 2 2v3"></path>
        </svg>
    </div>
    
    <div id="progress-bar"></div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            console.log('üü¢ PRESENTATION LOADED');
            
            // Renderov√°n√≠ matematiky pomoc√≠ KaTeX
            renderMathInElement(document.body, {
                delimiters: [
                    {left: '$$', right: '$$', display: true},
                    {left: '$', right: '$', display: false},
                ]
            });

            // Logika prezentace
            const slides = document.querySelectorAll('.slide');
            const prevButton = document.getElementById('prev-slide');
            const nextButton = document.getElementById('next-slide');
            const progressBar = document.getElementById('progress-bar');
            const fullscreenButton = document.getElementById('fullscreen-btn');
            
            let currentSlide = 0;
            const totalSlides = slides.length;
            
            console.log('üìä Found slides:', totalSlides);
            
            function showSlide(index) {
                console.log('üéØ ShowSlide called with index:', index);
                
                if (index >= totalSlides) index = totalSlides - 1;
                if (index < 0) index = 0;

                slides.forEach((slide, i) => {
                    slide.classList.toggle('active', i === index);
                });
                
                currentSlide = index;
                updateControls();
                
                console.log('‚úÖ Slide updated to:', currentSlide + 1);
            }

            function updateControls() {
                // Progress bar
                const progress = (currentSlide) / (totalSlides - 1);
                progressBar.style.width = `${progress * 100}%`;

                // Navigation arrows
                prevButton.style.display = currentSlide === 0 ? 'none' : 'flex';
                nextButton.style.display = currentSlide === totalSlides - 1 ? 'none' : 'flex';
                
                console.log('üîÑ Controls updated - slide:', currentSlide + 1);
            }

            // Event Listeners
            prevButton.addEventListener('click', () => {
                console.log('‚¨ÖÔ∏è Previous button clicked');
                showSlide(currentSlide - 1);
            });
            
            nextButton.addEventListener('click', () => {
                console.log('‚û°Ô∏è Next button clicked');
                showSlide(currentSlide + 1);
            });
            
            // JEDNODUCH√ù FULLSCREEN (zat√≠m bez komplexn√≠ logiky)
            fullscreenButton.addEventListener('click', () => {
                console.log('üéØ KLIK NA FULLSCREEN BUTTON');
                const presentationContainer = document.getElementById('presentation-container');
                
                if (presentationContainer.requestFullscreen) {
                    presentationContainer.requestFullscreen();
                } else if (presentationContainer.mozRequestFullScreen) {
                    presentationContainer.mozRequestFullScreen();
                } else if (presentationContainer.webkitRequestFullscreen) {
                    presentationContainer.webkitRequestFullscreen();
                } else if (presentationContainer.msRequestFullscreen) {
                    presentationContainer.msRequestFullscreen();
                }
            });
            
            // Keyboard navigation
            document.addEventListener('keydown', (e) => {
                if (e.key === 'ArrowRight') {
                    console.log('‚å®Ô∏è Right arrow pressed');
                    showSlide(currentSlide + 1);
                }
                if (e.key === 'ArrowLeft') {
                    console.log('‚å®Ô∏è Left arrow pressed');
                    showSlide(currentSlide - 1);
                }
            });

            // P≈ôid√°n√≠ z√°pat√≠ do v≈°ech slajd≈Ø
            function addFootersToSlides() {
                console.log('üìÑ Adding footers to slides');
                
                slides.forEach((slide, index) => {
                    // P≈ôeskoƒçit tituln√≠, z√°vƒõreƒçn√Ω slajd a souhrn
                    if (slide.classList.contains('title-slide') || 
                        slide.classList.contains('final-slide') ||
                        slide.classList.contains('cheat-sheet')) {
                        return;
                    }
                    
                    // Zkontrolovat, zda u≈æ z√°pat√≠ neexistuje
                    if (slide.querySelector('.slide-footer')) {
                        return;
                    }
                    
                    // Vytvo≈ôen√≠ z√°pat√≠
                    const footer = document.createElement('div');
                    footer.className = 'slide-footer';
                    
                    // Urƒçen√≠ ƒç√≠sla slajdu (pouze norm√°ln√≠ slajdy)
                    let pageNum = 0;
                    for(let i = 1; i <= index; i++) {
                        if (!slides[i].classList.contains('title-slide') && 
                            !slides[i].classList.contains('final-slide') &&
                            !slides[i].classList.contains('cheat-sheet')) {
                           pageNum++;
                        }
                    }
                    
                    // Obsah z√°pat√≠
                    const totalNormalSlides = totalSlides - 2; // Bez tituln√≠ho a z√°vƒõreƒçn√©ho
                    footer.innerHTML = `
                        <div class="footer-left">Hmotnostn√≠ a tepeln√© bilance</div>
                        <div class="footer-right">${pageNum} / ${totalNormalSlides - 1}</div>
                    `;
                    
                    // P≈ôid√°n√≠ z√°pat√≠ do slajdu
                    slide.appendChild(footer);
                    
                    console.log(`‚úÖ Footer added to slide ${index + 1} (page ${pageNum})`);
                });
            }

            // Initialize
            console.log('üöÄ Initializing presentation');
            addFootersToSlides();
            showSlide(0);
            
            // Initialize diagrams
            setTimeout(() => {
                drawSeparatorDiagram();
            }, 100);
            
            // Create charts after initialization
            setTimeout(() => {
                console.log('üìà Creating charts');
                createBalanceScheme();
                createMixerDiagram();
                createSplitterDiagram();
                drawComponentSeparatorSchema();
                createHeatExchangerDiagram();
                createReactorBalance();
                createMixerExampleDiagram();
                createSplitterExampleDiagram();
                createReactorExampleDiagram();
                drawMethodologyDiagram();
                drawDofDiagram();
                drawConversionDiagram();
                createSimpleDividerExampleDiagram();
                // Duplik√°ty pro z√°lo≈æky "V√Ωsledky"
                createMixerExampleDiagram2();
                createSplitterExampleDiagram2();
                createReactorExampleDiagram2();
                createSimpleDividerExampleDiagram2();
            }, 100);
        });

        // Interactive calculators
        function calculateMixer() {
            const m1 = parseFloat(document.getElementById('mixer-m1').value);
            const t1 = parseFloat(document.getElementById('mixer-t1').value);
            const m2 = parseFloat(document.getElementById('mixer-m2').value);
            const t2 = parseFloat(document.getElementById('mixer-t2').value);
            
            // Validace vstup≈Ø
            if (isNaN(m1) || isNaN(m2) || isNaN(t1) || isNaN(t2) || m1 <= 0 || m2 <= 0) {
                alert("Zadejte platn√© kladn√© hodnoty!");
                return;
            }
            
            // V√Ωpoƒçty
            const m3 = m1 + m2;
            const t3 = (m1 * t1 + m2 * t2) / m3;
            
            // Aktualizace statick√Ωch element≈Ø - ≈Ω√ÅDN√ù innerHTML!
            document.getElementById('mixer-flow').textContent = m3.toFixed(2);
            document.getElementById('mixer-temp').textContent = t3.toFixed(1);
            document.getElementById('mixer-check-mass').textContent = `${m1} + ${m2} = ${m3} ‚úì`;
            document.getElementById('mixer-check-temp').textContent = `Mezi ${Math.min(t1,t2)} a ${Math.max(t1,t2)} ¬∞C ‚úì`;
            
            // Zviditelnƒõn√≠ bez zmƒõny layoutu
            document.getElementById('mixer-result').classList.add('visible');
        }

        function drawSeparatorDiagram() {
            const canvas = document.getElementById('separatorDiagram');
            if (!canvas) return;
            const ctx = canvas.getContext('2d');
            
            // Vyƒçi≈°tƒõn√≠
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Barvy
            const separatorColor = '#4a90e2';
            const pipeColor = '#666';
            const textColor = '#333';
            
            // Rozmƒõry
            const centerX = canvas.width / 2;
            const centerY = canvas.height / 2;
            const separatorWidth = 80;
            const separatorHeight = 60;
            
            // Kreslen√≠ hlavn√≠ho separ√°toru
            ctx.fillStyle = separatorColor;
            ctx.fillRect(centerX - separatorWidth/2, centerY - separatorHeight/2, separatorWidth, separatorHeight);
            ctx.strokeStyle = '#2c5282';
            ctx.lineWidth = 2;
            ctx.strokeRect(centerX - separatorWidth/2, centerY - separatorHeight/2, separatorWidth, separatorHeight);
            
            // Text "SEPAR√ÅTOR"
            ctx.fillStyle = 'white';
            ctx.font = 'bold 12px Arial';
            ctx.textAlign = 'center';
            ctx.fillText('SEPAR√ÅTOR', centerX, centerY - 5);
            ctx.fillText('SLO≈ΩEK', centerX, centerY + 10);
            
            // Vstupn√≠ potrub√≠ (zleva)
            ctx.strokeStyle = pipeColor;
            ctx.lineWidth = 4;
            ctx.beginPath();
            ctx.moveTo(50, centerY);
            ctx.lineTo(centerX - separatorWidth/2, centerY);
            ctx.stroke();
            
            // ≈†ipka vstup
            ctx.fillStyle = pipeColor;
            ctx.beginPath();
            ctx.moveTo(centerX - separatorWidth/2 - 10, centerY);
            ctx.lineTo(centerX - separatorWidth/2 - 20, centerY - 5);
            ctx.lineTo(centerX - separatorWidth/2 - 20, centerY + 5);
            ctx.fill();
            
            // V√Ωstupn√≠ potrub√≠ 2 (doprava naho≈ôe)
            ctx.beginPath();
            ctx.moveTo(centerX + separatorWidth/2, centerY - 15);
            ctx.lineTo(canvas.width - 50, centerY - 15);
            ctx.stroke();
            
            // ≈†ipka v√Ωstup 2
            ctx.fillStyle = pipeColor;
            ctx.beginPath();
            ctx.moveTo(canvas.width - 50, centerY - 15);
            ctx.lineTo(canvas.width - 60, centerY - 20);
            ctx.lineTo(canvas.width - 60, centerY - 10);
            ctx.fill();
            
            // V√Ωstupn√≠ potrub√≠ 3 (doprava dole)
            ctx.strokeStyle = pipeColor;
            ctx.lineWidth = 4;
            ctx.beginPath();
            ctx.moveTo(centerX + separatorWidth/2, centerY + 15);
            ctx.lineTo(canvas.width - 50, centerY + 15);
            ctx.stroke();
            
            // ≈†ipka v√Ωstup 3
            ctx.fillStyle = pipeColor;
            ctx.beginPath();
            ctx.moveTo(canvas.width - 50, centerY + 15);
            ctx.lineTo(canvas.width - 60, centerY + 10);
            ctx.lineTo(canvas.width - 60, centerY + 20);
            ctx.fill();
            
            // Popisky
            ctx.fillStyle = textColor;
            ctx.font = '11px Arial';
            ctx.textAlign = 'center';
            
            // Vstup
            ctx.fillText('PROUD 1', 25, centerY - 10);
            ctx.fillText('100 kg/s', 25, centerY + 5);
            ctx.fillText('40% A, 60% B', 25, centerY + 18);
            
            // V√Ωstup 2 (Koncentr√°t)
            ctx.fillText('PROUD 2', canvas.width - 25, centerY - 35);
            ctx.fillText('50 kg/s', canvas.width - 25, centerY - 22);
            ctx.fillText('64% A, 36% B', canvas.width - 25, centerY - 9);
            
            // V√Ωstup 3 (Zbytek)
            ctx.fillText('PROUD 3', canvas.width - 25, centerY + 35);
            ctx.fillText('50 kg/s', canvas.width - 25, centerY + 48);
            ctx.fillText('16% A, 84% B', canvas.width - 25, centerY + 61);
        }

        function updateSeparatorDiagram(m1, conc_a_in, m2, conc_a_2, conc_b_2, m3, conc_a_3, conc_b_3) {
            const canvas = document.getElementById('separatorDiagram');
            if (!canvas) return;
            const ctx = canvas.getContext('2d');
            
            // Vyƒçi≈°tƒõn√≠
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Barvy
            const separatorColor = '#4a90e2';
            const pipeColor = '#666';
            const textColor = '#333';
            
            // Rozmƒõry
            const centerX = canvas.width / 2;
            const centerY = canvas.height / 2;
            const separatorWidth = 80;
            const separatorHeight = 60;
            
            // Kreslen√≠ hlavn√≠ho separ√°toru
            ctx.fillStyle = separatorColor;
            ctx.fillRect(centerX - separatorWidth/2, centerY - separatorHeight/2, separatorWidth, separatorHeight);
            ctx.strokeStyle = '#2c5282';
            ctx.lineWidth = 2;
            ctx.strokeRect(centerX - separatorWidth/2, centerY - separatorHeight/2, separatorWidth, separatorHeight);
            
            // Text "SEPAR√ÅTOR"
            ctx.fillStyle = 'white';
            ctx.font = 'bold 12px Arial';
            ctx.textAlign = 'center';
            ctx.fillText('SEPAR√ÅTOR', centerX, centerY - 5);
            ctx.fillText('SLO≈ΩEK', centerX, centerY + 10);
            
            // Vstupn√≠ potrub√≠ (zleva)
            ctx.strokeStyle = pipeColor;
            ctx.lineWidth = 4;
            ctx.beginPath();
            ctx.moveTo(50, centerY);
            ctx.lineTo(centerX - separatorWidth/2, centerY);
            ctx.stroke();
            
            // ≈†ipka vstup
            ctx.fillStyle = pipeColor;
            ctx.beginPath();
            ctx.moveTo(centerX - separatorWidth/2 - 10, centerY);
            ctx.lineTo(centerX - separatorWidth/2 - 20, centerY - 5);
            ctx.lineTo(centerX - separatorWidth/2 - 20, centerY + 5);
            ctx.fill();
            
            // V√Ωstupn√≠ potrub√≠ 2 (doprava naho≈ôe)
            ctx.strokeStyle = pipeColor;
            ctx.lineWidth = 4;
            ctx.beginPath();
            ctx.moveTo(centerX + separatorWidth/2, centerY - 15);
            ctx.lineTo(canvas.width - 50, centerY - 15);
            ctx.stroke();
            
            // ≈†ipka v√Ωstup 2
            ctx.fillStyle = pipeColor;
            ctx.beginPath();
            ctx.moveTo(canvas.width - 50, centerY - 15);
            ctx.lineTo(canvas.width - 60, centerY - 20);
            ctx.lineTo(canvas.width - 60, centerY - 10);
            ctx.fill();
            
            // V√Ωstupn√≠ potrub√≠ 3 (doprava dole)
            ctx.strokeStyle = pipeColor;
            ctx.lineWidth = 4;
            ctx.beginPath();
            ctx.moveTo(centerX + separatorWidth/2, centerY + 15);
            ctx.lineTo(canvas.width - 50, centerY + 15);
            ctx.stroke();
            
            // ≈†ipka v√Ωstup 3
            ctx.fillStyle = pipeColor;
            ctx.beginPath();
            ctx.moveTo(canvas.width - 50, centerY + 15);
            ctx.lineTo(canvas.width - 60, centerY + 10);
            ctx.lineTo(canvas.width - 60, centerY + 20);
            ctx.fill();
            
            // Popisky s aktu√°ln√≠mi hodnotami
            ctx.fillStyle = textColor;
            ctx.font = '11px Arial';
            ctx.textAlign = 'center';
            
            // Vstup
            ctx.fillText('PROUD 1', 25, centerY - 15);
            ctx.fillText(`${m1} kg/s`, 25, centerY);
            ctx.fillText(`${conc_a_in.toFixed(0)}% A, ${(100-conc_a_in).toFixed(0)}% B`, 25, centerY + 15);
            
            // V√Ωstup 2 (Koncentr√°t)
            ctx.fillText('PROUD 2', canvas.width - 25, centerY - 40);
            ctx.fillText(`${m2.toFixed(1)} kg/s`, canvas.width - 25, centerY - 25);
            ctx.fillText(`${conc_a_2.toFixed(0)}% A, ${conc_b_2.toFixed(0)}% B`, canvas.width - 25, centerY - 10);
            
            // V√Ωstup 3 (Zbytek)
            ctx.fillText('PROUD 3', canvas.width - 25, centerY + 30);
            ctx.fillText(`${m3.toFixed(1)} kg/s`, canvas.width - 25, centerY + 45);
            ctx.fillText(`${conc_a_3.toFixed(0)}% A, ${conc_b_3.toFixed(0)}% B`, canvas.width - 25, centerY + 60);
        }

        function calculateDivider() {
            const m1 = parseFloat(document.getElementById('divider-m1').value);
            const conc_a = parseFloat(document.getElementById('divider-conc').value) / 100; // 0.4
            const split_a = parseFloat(document.getElementById('divider-split-a').value) / 100; // 0.8
            const split_b = parseFloat(document.getElementById('divider-split-b').value) / 100; // 0.3
            const temp = parseFloat(document.getElementById('divider-temp').value);
            
            // Hmotnosti slo≈æek ve vstupn√≠m proudu
            const m_a_in = m1 * conc_a; // kg/s slo≈æky A
            const m_b_in = m1 * (1 - conc_a); // kg/s slo≈æky B
            
            // Separace - kolik z ka≈æd√© slo≈æky jde do proudu 2
            const m_a_2 = m_a_in * split_a; // slo≈æka A do proudu 2
            const m_b_2 = m_b_in * split_b; // slo≈æka B do proudu 2
            const m2 = m_a_2 + m_b_2; // celkov√Ω proud 2
            
            // Zbytek jde do proudu 3
            const m_a_3 = m_a_in * (1 - split_a); // slo≈æka A do proudu 3
            const m_b_3 = m_b_in * (1 - split_b); // slo≈æka B do proudu 3
            const m3 = m_a_3 + m_b_3; // celkov√Ω proud 3
            
            // Slo≈æen√≠ v√Ωstupn√≠ch proud≈Ø
            const conc_a_2 = m_a_2 / m2 * 100; // % A v proudu 2
            const conc_b_2 = m_b_2 / m2 * 100; // % B v proudu 2
            const conc_a_3 = m_a_3 / m3 * 100;
            const conc_b_3 = m_b_3 / m3 * 100;
            
            // Aktualizace statick√Ωch element≈Ø - ≈Ω√ÅDN√ù innerHTML!
            document.getElementById('div-m2').textContent = m2.toFixed(1);
            document.getElementById('div-a2').textContent = conc_a_2.toFixed(1);
            document.getElementById('div-a2-kg').textContent = m_a_2.toFixed(1);
            document.getElementById('div-b2').textContent = conc_b_2.toFixed(1);
            document.getElementById('div-b2-kg').textContent = m_b_2.toFixed(1);
            document.getElementById('div-m3').textContent = m3.toFixed(1);
            document.getElementById('div-a3').textContent = conc_a_3.toFixed(1);
            document.getElementById('div-a3-kg').textContent = m_a_3.toFixed(1);
            document.getElementById('div-b3').textContent = conc_b_3.toFixed(1);
            document.getElementById('div-b3-kg').textContent = m_b_3.toFixed(1);
            document.getElementById('div-temp').textContent = temp;
            document.getElementById('div-check-total').textContent = `${m2.toFixed(1)} + ${m3.toFixed(1)} = ${(m2+m3).toFixed(1)} kg/s ‚úì`;
            document.getElementById('div-check-a').textContent = `${m_a_2.toFixed(1)} + ${m_a_3.toFixed(1)} = ${(m_a_2+m_a_3).toFixed(1)} kg/s ‚úì`;
            
            // Zviditelnƒõn√≠ bez zmƒõny layoutu
            document.getElementById('divider-results').classList.add('visible');
            
            // Aktualizovat diagram s nov√Ωmi hodnotami
            updateSeparatorDiagram(m1, conc_a*100, m2, conc_a_2, conc_b_2, m3, conc_a_3, conc_b_3);
        }

        function calculateHeatExchanger() {
            const mh = parseFloat(document.getElementById('hex-mh').value);
            const th1 = parseFloat(document.getElementById('hex-th1').value);
            const th2 = parseFloat(document.getElementById('hex-th2').value);
            const mc = parseFloat(document.getElementById('hex-mc').value);
            const tc1 = parseFloat(document.getElementById('hex-tc1').value);
            
            // Validace
            if (isNaN(mh) || isNaN(th1) || isNaN(th2) || isNaN(mc) || isNaN(tc1) || mh <= 0 || mc <= 0) {
                alert("Zadejte platn√© kladn√© hodnoty!");
                return;
            }
            
            // V√Ωpoƒçty
            const cp = 4.18; // kJ/kg¬∑K pro vodu
            const qh = mh * cp * (th1 - th2);
            const qc = mc * cp;
            const tc2 = tc1 + qh / qc;
            const balance_check = Math.abs(qh - qc * (tc2 - tc1)) < 0.1;
            
            // Aktualizace statick√Ωch element≈Ø - ≈Ω√ÅDN√ù innerHTML!
            document.getElementById('hex-qh').textContent = qh.toFixed(1);
            document.getElementById('hex-tc2').textContent = tc2.toFixed(1);
            document.getElementById('hex-balance').textContent = `Q_h = ${qh.toFixed(1)} kW ‚âà Q_c = ${(qc * (tc2 - tc1)).toFixed(1)} kW ${balance_check ? '‚úì' : '‚úó'}`;
            
            // Zviditelnƒõn√≠ bez zmƒõny layoutu
            document.getElementById('hex-results').classList.add('visible');
        }

        // Chart creation functions
        function createBalanceScheme() {
            const ctx = document.getElementById('balanceScheme');
            if (!ctx) return;
            
            const context = ctx.getContext('2d');
            context.clearRect(0, 0, 500, 400);
            
            // System boundary
            context.strokeStyle = '#003f88';
            context.lineWidth = 3;
            context.setLineDash([6, 6]);
            context.strokeRect(180, 150, 140, 100);
            
            // System label
            context.fillStyle = '#003f88';
            context.font = '16px Inter';
            context.fillText('SYST√âM', 220, 205);
            
            // Arrows
            context.setLineDash([]);
            context.lineWidth = 3;
            
            // Input
            context.strokeStyle = '#4caf50';
            context.lineWidth = 4;
            context.beginPath();
            context.moveTo(80, 200);
            context.lineTo(175, 200);
            context.stroke();
            
            // Arrow head for input (smƒõ≈ôuje DO syst√©mu)
            context.beginPath();
            context.moveTo(175, 200);
            context.lineTo(165, 195);
            context.moveTo(175, 200);
            context.lineTo(165, 205);
            context.stroke();
            
            // Output  
            context.strokeStyle = '#ff5722';
            context.lineWidth = 4;
            context.beginPath();
            context.moveTo(325, 200);
            context.lineTo(420, 200);
            context.stroke();
            
            // Arrow head for output (OPRAVENO - smƒõ≈ôuje ZE syst√©mu)
            context.beginPath();
            context.moveTo(420, 200);
            context.lineTo(410, 195);
            context.moveTo(420, 200);
            context.lineTo(410, 205);
            context.stroke();
            
            // Source
            context.strokeStyle = '#9c27b0';
            context.lineWidth = 3;
            context.beginPath();
            context.moveTo(250, 80);
            context.lineTo(250, 145);
            context.stroke();
            
            // Arrow head for source (smƒõ≈ôuje DO syst√©mu)
            context.beginPath();
            context.moveTo(250, 145);
            context.lineTo(245, 135);
            context.moveTo(250, 145);
            context.lineTo(255, 135);
            context.stroke();
            
            // Sink
            context.strokeStyle = '#f44336';
            context.lineWidth = 3;
            context.beginPath();
            context.moveTo(250, 255);
            context.lineTo(250, 320);
            context.stroke();
            
            // Arrow head for sink (OPRAVENO - smƒõ≈ôuje ZE syst√©mu)
            context.beginPath();
            context.moveTo(250, 320);
            context.lineTo(245, 310);
            context.moveTo(250, 320);
            context.lineTo(255, 310);
            context.stroke();
            
            // Labels
            context.fillStyle = '#333';
            context.font = '14px Inter';
            context.fillText('VSTUP', 110, 190);
            context.fillText('V√ùSTUP', 360, 190);
            context.fillText('ZDROJ', 210, 70);
            context.fillText('SPOT≈òEBA', 190, 345);
        }

        function createMixerDiagram() {
            const ctx = document.getElementById('mixerDiagram');
            if (!ctx) return;
            
            const context = ctx.getContext('2d');
            context.clearRect(0, 0, 500, 400);
            
            // Mixer - ZVƒöT≈†EN√ù obdeln√≠k z 50x30 na 80x50
            context.fillStyle = '#e3f2fd';
            context.fillRect(200, 175, 80, 50);
            context.strokeStyle = '#1976d2';
            context.lineWidth = 3;
            context.strokeRect(200, 175, 80, 50);
            
            // Streams
            context.lineWidth = 4;
            
            // Input 1
            context.strokeStyle = '#4caf50';
            context.beginPath();
            context.moveTo(80, 185);
            context.lineTo(195, 185);
            context.stroke();
            
            // Input 2
            context.strokeStyle = '#2196f3';
            context.beginPath();
            context.moveTo(80, 215);
            context.lineTo(195, 215);
            context.stroke();
            
            // Output
            context.strokeStyle = '#ff9800';
            context.lineWidth = 5;
            context.beginPath();
            context.moveTo(285, 200);
            context.lineTo(420, 200);
            context.stroke();
            
            // Labels
            context.fillStyle = '#333';
            context.font = '14px Inter';
            context.fillText('·πÅ‚ÇÅ, T‚ÇÅ', 90, 175);
            context.fillText('·πÅ‚ÇÇ, T‚ÇÇ', 90, 210);
            context.fillText('·πÅ‚ÇÉ, T‚ÇÉ', 340, 190);
            context.fillStyle = '#1976d2';
            context.font = '16px Inter';
            context.fillText('MIX', 225, 205);
        }

        function createSplitterDiagram() {
            const ctx = document.getElementById('splitterDiagram');
            if (!ctx) return;
            
            const context = ctx.getContext('2d');
            context.clearRect(0, 0, 500, 400);
            
            // Splitter - ZVƒöT≈†EN√ù obdeln√≠k z 30x20 na 60x40
            context.fillStyle = '#e3f2fd';
            context.fillRect(220, 180, 60, 40);
            context.strokeStyle = '#1976d2';
            context.lineWidth = 3;
            context.strokeRect(220, 180, 60, 40);
            
            // Streams
            context.lineWidth = 4;
            
            // Input
            context.strokeStyle = '#4caf50';
            context.beginPath();
            context.moveTo(80, 200);
            context.lineTo(215, 200);
            context.stroke();
            
            // Output 1
            context.strokeStyle = '#ff9800';
            context.beginPath();
            context.moveTo(285, 200);
            context.lineTo(420, 160);
            context.stroke();
            
            // Output 2
            context.strokeStyle = '#f44336';
            context.beginPath();
            context.moveTo(285, 200);
            context.lineTo(420, 240);
            context.stroke();
            
            // Labels
            context.fillStyle = '#333';
            context.font = '14px Inter';
            context.fillText('·πÅ‚ÇÅ, T‚ÇÅ, x‚ÇÅ', 90, 190);
            context.fillText('·πÅ‚ÇÇ, T‚ÇÅ, x‚ÇÅ', 340, 150);
            context.fillText('·πÅ‚ÇÉ, T‚ÇÅ, x‚ÇÅ', 340, 255);
            context.fillStyle = '#1976d2';
            context.font = '16px Inter';
            context.fillText('SPLIT', 235, 205);
            context.font = '14px Inter';
            context.fillText('T‚ÇÅ = T‚ÇÇ = T‚ÇÉ', 180, 280);
            context.fillText('x‚ÇÅ = x‚ÇÇ = x‚ÇÉ', 120, 195);
        }

        function drawComponentSeparatorSchema() {
            const canvas = document.getElementById('componentSeparatorSchema');
            if (!canvas) return;
            
            const ctx = canvas.getContext('2d');
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Pozad√≠
            ctx.fillStyle = '#f8f9fa';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // Vstupn√≠ proud
            ctx.strokeStyle = '#333';
            ctx.lineWidth = 3;
            ctx.beginPath();
            ctx.moveTo(50, 200);
            ctx.lineTo(150, 200);
            ctx.stroke();
            
            // Separ√°tor - obd√©ln√≠k
            ctx.fillStyle = '#4a90e2';
            ctx.fillRect(150, 150, 120, 100);
            ctx.strokeStyle = '#333';
            ctx.lineWidth = 2;
            ctx.strokeRect(150, 150, 120, 100);
            
            // Text separ√°toru
            ctx.fillStyle = 'white';
            ctx.font = 'bold 14px Inter';
            ctx.textAlign = 'center';
            ctx.fillText('SEPAR√ÅTOR', 210, 195);
            ctx.fillText('SLO≈ΩEK', 210, 210);
            
            // V√Ωstupn√≠ proudy
            ctx.strokeStyle = '#333';
            ctx.lineWidth = 3;
            // Proud 2 (naho≈ôe)
            ctx.beginPath();
            ctx.moveTo(270, 170);
            ctx.lineTo(400, 170);
            ctx.stroke();
            
            // Proud 3 (dole)
            ctx.beginPath();
            ctx.moveTo(270, 230);
            ctx.lineTo(400, 230);
            ctx.stroke();
            
            // ≈†ipky
            ctx.fillStyle = '#333';
            // Vstupn√≠ ≈°ipka
            ctx.beginPath();
            ctx.moveTo(145, 200);
            ctx.lineTo(135, 195);
            ctx.lineTo(135, 205);
            ctx.closePath();
            ctx.fill();
            
            // V√Ωstupn√≠ ≈°ipky
            ctx.beginPath();
            ctx.moveTo(395, 170);
            ctx.lineTo(405, 165);
            ctx.lineTo(405, 175);
            ctx.closePath();
            ctx.fill();
            
            ctx.beginPath();
            ctx.moveTo(395, 230);
            ctx.lineTo(405, 225);
            ctx.lineTo(405, 235);
            ctx.closePath();
            ctx.fill();
            
            // Popisy proud≈Ø
            ctx.fillStyle = '#333';
            ctx.font = 'bold 12px Inter';
            ctx.textAlign = 'center';
            
            // Vstup
            ctx.fillText('PROUD 1', 100, 185);
            ctx.font = '10px Inter';
            ctx.fillText('100 kg/s', 100, 220);
            ctx.fillText('40% A, 60% B', 100, 232);
            
            // V√Ωstup 2 (koncentr√°t)
            ctx.font = 'bold 12px Inter';
            ctx.fillText('PROUD 2', 350, 155);
            ctx.fillText('(Koncentr√°t)', 350, 140);
            ctx.font = '10px Inter';
            ctx.fillText('50 kg/s', 350, 185);
            ctx.fillText('64% A, 36% B', 350, 197);
            
            // V√Ωstup 3 (zbytek)
            ctx.font = 'bold 12px Inter';
            ctx.fillText('PROUD 3', 350, 245);
            ctx.fillText('(Zbytek)', 350, 260);
            ctx.font = '10px Inter';
            ctx.fillText('50 kg/s', 350, 215);
            ctx.fillText('16% A, 84% B', 350, 203);
            
            // Kl√≠ƒçov√Ω princip
            ctx.fillStyle = '#e74c3c';
            ctx.font = 'bold 11px Inter';
            ctx.textAlign = 'center';
            ctx.fillText('ROZD√çLN√â SLO≈ΩEN√ç V√ùSTUP≈Æ!', 210, 290);
            
            // Teplota
            ctx.fillStyle = '#27ae60';
            ctx.font = '10px Inter';
            ctx.fillText('T‚ÇÅ = T‚ÇÇ = T‚ÇÉ = 80¬∞C', 210, 305);
        }

        function createHeatExchangerDiagram() {
            const ctx = document.getElementById('heatExchangerDiagram');
            if (!ctx) return;
            
            const context = ctx.getContext('2d');
            context.clearRect(0, 0, 500, 400);
            
            // Heat exchanger - ZVƒöT≈†EN√ù obdeln√≠k z 110x90 na 160x120
            context.fillStyle = '#e3f2fd';
            context.fillRect(170, 140, 160, 120);
            context.strokeStyle = '#1976d2';
            context.lineWidth = 3;
            context.strokeRect(170, 140, 160, 120);
            
            // Hot stream
            context.strokeStyle = '#f44336';
            context.lineWidth = 4;
            context.beginPath();
            context.moveTo(60, 180);
            context.lineTo(420, 180);
            context.stroke();
            
            // Cold stream
            context.strokeStyle = '#2196f3';
            context.beginPath();
            context.moveTo(420, 220);
            context.lineTo(60, 220);
            context.stroke();
            
            // Labels
            context.fillStyle = '#333';
            context.font = '14px Inter';
            context.fillText('T_h,in', 70, 170);
            context.fillText('T_h,out', 350, 170);
            context.fillText('T_c,out', 70, 240);
            context.fillText('T_c,in', 350, 240);
            
            // Heat transfer
            context.fillStyle = '#ff9800';
            context.font = '20px Inter';
            context.fillText('Q', 240, 205);
            
            context.fillStyle = '#1976d2';
            context.font = '16px Inter';
            context.fillText('HEAT EXCHANGER', 200, 130);
        }

        function createReactorBalance() {
            const ctx = document.getElementById('reactorBalance');
            if (!ctx) return;
            
            new Chart(ctx, {
                type: 'line',
                data: {
                    labels: ['0', '25', '50', '75', '100'],
                    datasets: [{
                        label: 'N‚ÇÇ',
                        data: [100, 75, 50, 25, 0],
                        borderColor: '#1976d2',
                        tension: 0.1,
                        borderWidth: 2
                    }, {
                        label: 'H‚ÇÇ', 
                        data: [300, 225, 150, 75, 0],
                        borderColor: '#4caf50',
                        tension: 0.1,
                        borderWidth: 2
                    }, {
                        label: 'NH‚ÇÉ',
                        data: [0, 50, 100, 150, 200],
                        borderColor: '#ff9800',
                        tension: 0.1,
                        borderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: 'N‚ÇÇ + 3H‚ÇÇ ‚Üí 2NH‚ÇÉ',
                            font: { size: 14 }
                        }
                    },
                    scales: {
                        x: { title: { display: true, text: 'Konverze (%)' } },
                        y: { title: { display: true, text: 'Tok (mol/s)' } }
                    }
                }
            });
        }

        // INTERAKTIVN√ç P≈ò√çKLADY - FUNKCE PRO P≈òEP√çN√ÅN√ç TAB≈Æ
        function switchTab(example, tab) {
            // Deaktivovat v≈°echny taby a obsah pro dan√Ω p≈ô√≠klad
            document.querySelectorAll(`#${example}-zadani, #${example}-postup, #${example}-reseni, #${example}-vysledky, #${example}-chyby`).forEach(content => {
                content.classList.remove('active');
            });
            document.querySelectorAll(`.example-tab`).forEach(tabBtn => {
                tabBtn.classList.remove('active');
            });
            
            // Aktivovat vybran√Ω tab a obsah
            const targetContent = document.getElementById(`${example}-${tab}`);
            const targetTab = event.target;
            
            if (targetContent && targetTab) {
                targetContent.classList.add('active');
                targetTab.classList.add('active');
            }
        }

        // INTERAKTIVN√ç V√ùPOƒåTY
        function solveMixer() {
            const m1 = parseFloat(document.getElementById('mixer-m1').value);
            const w1 = parseFloat(document.getElementById('mixer-w1').value) / 100;
            const m2 = parseFloat(document.getElementById('mixer-m2').value);
            const w2 = parseFloat(document.getElementById('mixer-w2').value) / 100;
            
            // Validace
            if (isNaN(m1) || isNaN(m2) || isNaN(w1*100) || isNaN(w2*100) || m1 <= 0 || m2 <= 0) {
                alert("Zadejte platn√© kladn√© hodnoty!");
                return;
            }
            
            // V√Ωpoƒçty
            const m3 = m1 + m2;
            const w3 = (m1 * w1 + m2 * w2) / m3;
            const tempEstimate = 25 + (w3*100 - w1*100) * 2;
            
            // Kontroly
            const checks = [];
            if (w3 > Math.min(w1, w2) && w3 < Math.max(w1, w2)) {
                checks.push(`‚úì Koncentrace ${(w3*100).toFixed(1)}% je mezi krajn√≠mi hodnotami`);
            } else {
                checks.push(`‚ö†Ô∏è Koncentrace mimo oƒçek√°van√Ω rozsah`);
            }
            
            // Aktualizace statick√Ωch element≈Ø - ≈Ω√ÅDN√ù innerHTML!
            document.getElementById('mixer-mass-balance').textContent = `${m1} + ${m2} = ${m3.toFixed(0)} kg/h`;
            document.getElementById('mixer-component-balance').textContent = `${m1} √ó ${w1.toFixed(2)} + ${m2} √ó ${w2.toFixed(2)} = ${m3} √ó ${w3.toFixed(3)}`;
            document.getElementById('mixer-component-kg').textContent = `${(m1*w1).toFixed(1)} + ${(m2*w2).toFixed(1)} = ${(m3*w3).toFixed(1)} kg/h H‚ÇÇSO‚ÇÑ`;
            document.getElementById('mixer-final-conc').textContent = `${(w3*100).toFixed(1)} % hm.`;
            document.getElementById('mixer-checks').innerHTML = `<b>Tepeln√° bilance:</b><br>Teplota smƒõsi: p≈ôibli≈ænƒõ ${tempEstimate.toFixed(0)}¬∞C<br>${checks.join('<br>')}`;
            
            // Zviditelnƒõn√≠ bez zmƒõny layoutu
            document.getElementById('mixer-result').classList.add('visible');
        }

        // Funkce pro slajd 14 - s ID mixer2-*
        function solveMixer2() {
            const m1 = parseFloat(document.getElementById('mixer2-m1').value);
            const w1 = parseFloat(document.getElementById('mixer2-w1').value) / 100;
            const m2 = parseFloat(document.getElementById('mixer2-m2').value);
            const w2 = parseFloat(document.getElementById('mixer2-w2').value) / 100;
            
            // Validace
            if (isNaN(m1) || isNaN(m2) || isNaN(w1*100) || isNaN(w2*100) || m1 <= 0 || m2 <= 0) {
                alert("Zadejte platn√© kladn√© hodnoty!");
                return;
            }
            
            // V√Ωpoƒçty
            const m3 = m1 + m2;
            const w3 = (m1 * w1 + m2 * w2) / m3;
            const tempEstimate = 25 + (w3*100 - w1*100) * 2;
            
            // Kontroly
            const checks = [];
            if (w3 > Math.min(w1, w2) && w3 < Math.max(w1, w2)) {
                checks.push(`‚úì Koncentrace ${(w3*100).toFixed(1)}% je mezi krajn√≠mi hodnotami`);
            } else {
                checks.push(`‚ö†Ô∏è Koncentrace mimo oƒçek√°van√Ω rozsah`);
            }
            
            // Aktualizace statick√Ωch element≈Ø - ≈Ω√ÅDN√ù innerHTML!
            document.getElementById('mixer2-mass-balance').textContent = `${m1} + ${m2} = ${m3.toFixed(0)} kg/h`;
            document.getElementById('mixer2-component-balance').textContent = `${m1} √ó ${w1.toFixed(2)} + ${m2} √ó ${w2.toFixed(2)} = ${m3} √ó ${w3.toFixed(3)}`;
            document.getElementById('mixer2-component-kg').textContent = `${(m1*w1).toFixed(1)} + ${(m2*w2).toFixed(1)} = ${(m3*w3).toFixed(1)} kg/h H‚ÇÇSO‚ÇÑ`;
            document.getElementById('mixer2-final-conc').textContent = `${(w3*100).toFixed(1)} % hm.`;
            document.getElementById('mixer2-checks').innerHTML = `<b>Tepeln√° bilance:</b><br>Teplota smƒõsi: p≈ôibli≈ænƒõ ${tempEstimate.toFixed(0)}¬∞C<br>${checks.join('<br>')}`;
            
            // Zviditelnƒõn√≠ bez zmƒõny layoutu
            document.getElementById('mixer2-result').classList.add('visible');
        }

        function solveSplitter() {
            const m1 = parseFloat(document.getElementById('splitter-m1').value);
            const split = parseFloat(document.getElementById('splitter-split').value) / 100;
            
            // Validace
            if (isNaN(m1) || isNaN(split*100) || m1 <= 0 || split <= 0 || split >= 1) {
                alert("Zadejte platn√© hodnoty! Split mus√≠ b√Ωt mezi 0-100%.");
                return;
            }
            
            // V√Ωpoƒçty
            const m2 = m1 * split;
            const m3 = m1 * (1 - split);
            
            // Aktualizace statick√Ωch element≈Ø - ≈Ω√ÅDN√ù innerHTML!
            document.getElementById('splitter-m2').textContent = m2.toFixed(0);
            document.getElementById('splitter-perc2').textContent = (split*100).toFixed(0);
            document.getElementById('splitter-m3').textContent = m3.toFixed(0);
            document.getElementById('splitter-perc3').textContent = ((1-split)*100).toFixed(0);
            document.getElementById('splitter-check').textContent = `${m2.toFixed(0)} + ${m3.toFixed(0)} = ${(m2+m3).toFixed(0)} kg/h ‚úì`;
            document.getElementById('splitter-notes').innerHTML = `<b>Slo≈æen√≠ obou proud≈Ø:</b> nezmƒõnƒõno<br><b>Teplota:</b> T‚ÇÅ = T‚ÇÇ = T‚ÇÉ (nezmƒõnƒõno)`;
            
            // Zviditelnƒõn√≠ bez zmƒõny layoutu
            document.getElementById('splitter-result').classList.add('visible');
        }

        function solveSimpleDivider() {
            const m1 = parseFloat(document.getElementById('simple-divider-m1').value);
            const conc_eth = parseFloat(document.getElementById('simple-divider-conc').value) / 100;
            const eth_sep = parseFloat(document.getElementById('simple-divider-eth-sep').value) / 100;
            const water_sep = parseFloat(document.getElementById('simple-divider-water-sep').value) / 100;
            const temp = parseFloat(document.getElementById('simple-divider-temp').value);
            
            // Validace
            if (isNaN(m1) || isNaN(conc_eth*100) || isNaN(eth_sep*100) || isNaN(water_sep*100) || m1 <= 0) {
                alert("Zadejte platn√© hodnoty!");
                return;
            }
            
            // Hmotnosti slo≈æek ve vstupn√≠m proudu
            const m_eth_in = m1 * conc_eth;
            const m_water_in = m1 * (1 - conc_eth);
            
            // Separace - kolik z ka≈æd√© slo≈æky jde do proudu 2
            const m_eth_2 = m_eth_in * eth_sep;
            const m_water_2 = m_water_in * water_sep;
            const m2 = m_eth_2 + m_water_2;
            
            // Zbytek jde do proudu 3
            const m_eth_3 = m_eth_in * (1 - eth_sep);
            const m_water_3 = m_water_in * (1 - water_sep);
            const m3 = m_eth_3 + m_water_3;
            
            // Slo≈æen√≠ v√Ωstupn√≠ch proud≈Ø
            const conc_eth_2 = m_eth_2 / m2 * 100;
            const conc_water_2 = m_water_2 / m2 * 100;
            const conc_eth_3 = m_eth_3 / m3 * 100;
            const conc_water_3 = m_water_3 / m3 * 100;
            
            // Aktualizace statick√Ωch element≈Ø - ≈Ω√ÅDN√ù innerHTML!
            document.getElementById('sep-m2').textContent = m2.toFixed(0);
            document.getElementById('sep-eth2').textContent = conc_eth_2.toFixed(1);
            document.getElementById('sep-eth2-kg').textContent = m_eth_2.toFixed(0);
            document.getElementById('sep-water2').textContent = conc_water_2.toFixed(1);
            document.getElementById('sep-water2-kg').textContent = m_water_2.toFixed(0);
            document.getElementById('sep-m3').textContent = m3.toFixed(0);
            document.getElementById('sep-eth3').textContent = conc_eth_3.toFixed(1);
            document.getElementById('sep-eth3-kg').textContent = m_eth_3.toFixed(0);
            document.getElementById('sep-water3').textContent = conc_water_3.toFixed(1);
            document.getElementById('sep-water3-kg').textContent = m_water_3.toFixed(0);
            document.getElementById('sep-check').textContent = `${m2.toFixed(0)} + ${m3.toFixed(0)} = ${(m2+m3).toFixed(0)} kg/h ‚úì`;
            
            // Zviditelnƒõn√≠ bez zmƒõny layoutu
            document.getElementById('simple-divider-result').classList.add('visible');
        }

        // DIAGRAMY PRO P≈ò√çKLADY
        function createMixerExampleDiagram() {
            const ctx = document.getElementById('mixerExampleDiagram');
            if (!ctx) return;
            
            const context = ctx.getContext('2d');
            context.clearRect(0, 0, 400, 300);
            
            // Mixer box
            context.fillStyle = '#e3f2fd';
            context.fillRect(175, 125, 60, 40);
            context.strokeStyle = '#1976d2';
            context.lineWidth = 3;
            context.strokeRect(175, 125, 60, 40);
            
            // Input streams
            context.lineWidth = 4;
            
            // Input 1 (20% H2SO4)
            context.strokeStyle = '#4caf50';
            context.beginPath();
            context.moveTo(50, 135);
            context.lineTo(170, 135);
            context.stroke();
            
            // Arrow for input 1
            context.beginPath();
            context.moveTo(170, 135);
            context.lineTo(160, 130);
            context.moveTo(170, 135);
            context.lineTo(160, 140);
            context.stroke();
            
            // Input 2 (98% H2SO4)
            context.strokeStyle = '#ff9800';
            context.beginPath();
            context.moveTo(50, 155);
            context.lineTo(170, 155);
            context.stroke();
            
            // Arrow for input 2
            context.beginPath();
            context.moveTo(170, 155);
            context.lineTo(160, 150);
            context.moveTo(170, 155);
            context.lineTo(160, 160);
            context.stroke();
            
            // Output stream
            context.strokeStyle = '#2196f3';
            context.lineWidth = 5;
            context.beginPath();
            context.moveTo(240, 145);
            context.lineTo(350, 145);
            context.stroke();
            
            // Arrow for output
            context.beginPath();
            context.moveTo(350, 145);
            context.lineTo(340, 140);
            context.moveTo(350, 145);
            context.lineTo(340, 150);
            context.stroke();
            
            // Labels - VƒöT≈†√ç A ƒåITELNƒöJ≈†√ç TEXT
            context.fillStyle = '#000';
            context.font = 'bold 14px Inter';
            context.fillText('200 kg/h', 55, 125);
            context.fillText('20% H‚ÇÇSO‚ÇÑ', 55, 140);
            context.fillText('50 kg/h', 55, 170);
            context.fillText('98% H‚ÇÇSO‚ÇÑ', 55, 185);
            context.fillText('? kg/h', 275, 130);
            context.fillText('? % H‚ÇÇSO‚ÇÑ', 275, 160);
            
            context.fillStyle = '#1976d2';
            context.font = 'bold 16px Inter';
            context.fillText('MIX', 190, 150);
        }

        function createSplitterExampleDiagram() {
            const ctx = document.getElementById('splitterExampleDiagram');
            if (!ctx) return;
            
            const context = ctx.getContext('2d');
            context.clearRect(0, 0, 400, 300);
            
            // Splitter box
            context.fillStyle = '#e3f2fd';
            context.fillRect(175, 135, 50, 30);
            context.strokeStyle = '#1976d2';
            context.lineWidth = 3;
            context.strokeRect(175, 135, 50, 30);
            
            // Input stream
            context.strokeStyle = '#4caf50';
            context.lineWidth = 4;
            context.beginPath();
            context.moveTo(50, 150);
            context.lineTo(170, 150);
            context.stroke();
            
            // Arrow for input
            context.beginPath();
            context.moveTo(170, 150);
            context.lineTo(160, 145);
            context.moveTo(170, 150);
            context.lineTo(160, 155);
            context.stroke();
            
            // Output 1 (70%)
            context.strokeStyle = '#2196f3';
            context.beginPath();
            context.moveTo(230, 150);
            context.lineTo(350, 120);
            context.stroke();
            
            // Arrow for output 1
            context.beginPath();
            context.moveTo(350, 120);
            context.lineTo(340, 125);
            context.moveTo(350, 120);
            context.lineTo(345, 130);
            context.stroke();
            
            // Output 2 (30%)
            context.strokeStyle = '#ff9800';
            context.beginPath();
            context.moveTo(230, 150);
            context.lineTo(350, 180);
            context.stroke();
            
            // Arrow for output 2
            context.beginPath();
            context.moveTo(350, 180);
            context.lineTo(340, 175);
            context.moveTo(350, 180);
            context.lineTo(345, 170);
            context.stroke();
            
            // Labels - VƒöT≈†√ç A ƒåITELNƒöJ≈†√ç TEXT
            context.fillStyle = '#000';
            context.font = 'bold 14px Inter';
            context.fillText('500 kg/h', 55, 130);
            context.fillText('60% toluen', 55, 145);
            context.fillText('40% benzen', 55, 160);
            
            context.fillText('70% = ? kg/h', 270, 100);
            context.fillText('60% toluen', 270, 115);
            context.fillText('40% benzen', 270, 130);
            
            context.fillText('30% = ? kg/h', 270, 190);
            context.fillText('60% toluen', 270, 205);
            context.fillText('40% benzen', 270, 220);
            
            context.fillStyle = '#1976d2';
            context.font = 'bold 16px Inter';
            context.fillText('SPLIT', 180, 155);
        }

        function createReactorExampleDiagram() {
            const ctx = document.getElementById('reactorExampleDiagram');
            if (!ctx) return;
            
            const context = ctx.getContext('2d');
            context.clearRect(0, 0, 400, 300);
            
            // Reactor vessel
            context.fillStyle = '#fff3e0';
            context.fillRect(160, 120, 80, 60);
            context.strokeStyle = '#ff6f00';
            context.lineWidth = 3;
            context.strokeRect(160, 120, 80, 60);
            
            // Input stream 1 (N2)
            context.strokeStyle = '#4caf50';
            context.lineWidth = 4;
            context.beginPath();
            context.moveTo(50, 140);
            context.lineTo(155, 140);
            context.stroke();
            
            // Arrow for input 1
            context.beginPath();
            context.moveTo(155, 140);
            context.lineTo(145, 135);
            context.moveTo(155, 140);
            context.lineTo(145, 145);
            context.stroke();
            
            // Input stream 2 (H2)
            context.strokeStyle = '#2196f3';
            context.beginPath();
            context.moveTo(50, 160);
            context.lineTo(155, 160);
            context.stroke();
            
            // Arrow for input 2
            context.beginPath();
            context.moveTo(155, 160);
            context.lineTo(145, 155);
            context.moveTo(155, 160);
            context.lineTo(145, 165);
            context.stroke();
            
            // Output stream (NH3)
            context.strokeStyle = '#e91e63';
            context.beginPath();
            context.moveTo(245, 150);
            context.lineTo(350, 150);
            context.stroke();
            
            // Arrow for output
            context.beginPath();
            context.moveTo(350, 150);
            context.lineTo(340, 145);
            context.moveTo(350, 150);
            context.lineTo(340, 155);
            context.stroke();
            
            // Labels - VƒöT≈†√ç A ƒåITELNƒöJ≈†√ç TEXT
            context.fillStyle = '#000';
            context.font = 'bold 14px Inter';
            context.fillText('? mol/h N‚ÇÇ', 5, 125);
            context.fillText('100 mol/h H‚ÇÇ', 5, 145);
            context.fillText('konverze 80%', 5, 175);
            context.fillText('? mol/h NH‚ÇÉ', 270, 135);
            context.fillText('+ zbytek N‚ÇÇ,H‚ÇÇ', 270, 165);
            
            context.fillStyle = '#ff6f00';
            context.font = 'bold 16px Inter';
            context.fillText('REAKTOR', 170, 155);
            
            // Reakce
            context.fillStyle = '#000';
            context.font = 'bold 12px Inter';
            context.fillText('N‚ÇÇ + 3H‚ÇÇ ‚Üí 2NH‚ÇÉ', 165, 200);
        }

        function solveReactor() {
            const h2Input = parseFloat(document.getElementById('reactorH2Input').value);
            const conversion = parseFloat(document.getElementById('reactorConversionInput').value) / 100;
            
            // Validace
            if (isNaN(h2Input) || isNaN(conversion) || h2Input <= 0 || conversion <= 0 || conversion >= 1) {
                alert('Zadejte platn√© hodnoty! Konverze mus√≠ b√Ωt mezi 0-100%.');
                return;
            }
            
            // Stechiometrick√© pomƒõry: N2 + 3H2 ‚Üí 2NH3
            const n2Input = h2Input / 3; // Stechiometrick√Ω pomƒõr N2:H2 = 1:3
            
            // Reakƒçn√≠ extent p≈ôi dan√© konverzi N2
            const xi = conversion * n2Input;
            
            // V√Ωstupy podle bilanƒçn√≠ rovnice: n_out = n_in + nu * xi
            const n2_out = n2Input - xi;     // nu_N2 = -1
            const h2_out = h2Input - 3 * xi; // nu_H2 = -3  
            const nh3_out = 0 + 2 * xi;      // nu_NH3 = +2
            
            // Hmotnostn√≠ bilance (g/h)
            const mass_in = n2Input * 28 + h2Input * 2;
            const mass_out = n2_out * 28 + h2_out * 2 + nh3_out * 17;
            const balance_ok = Math.abs(mass_in - mass_out) < 0.1;
            
            // Aktualizace statick√Ωch element≈Ø - ≈Ω√ÅDN√ù innerHTML!
            document.getElementById('react-n2-in').textContent = n2Input.toFixed(1);
            document.getElementById('react-h2-in').textContent = h2Input.toFixed(1);
            document.getElementById('react-n2-out').textContent = n2_out.toFixed(1);
            document.getElementById('react-h2-out').textContent = h2_out.toFixed(1);
            document.getElementById('react-nh3-out').textContent = nh3_out.toFixed(1);
            document.getElementById('react-check').textContent = `${mass_in.toFixed(1)} g/h in = ${mass_out.toFixed(1)} g/h out ${balance_ok ? '‚úì' : '‚úó'}`;
            document.getElementById('react-conv').textContent = `${(conversion*100).toFixed(1)}% N‚ÇÇ`;
            document.getElementById('react-extent').textContent = `Œæ = ${xi.toFixed(1)} mol/h`;
            
            // Zviditelnƒõn√≠ bez zmƒõny layoutu
            document.getElementById('reactor-result').classList.add('visible');
        }

        function createSimpleDividerExampleDiagram() {
            const ctx = document.getElementById('simpleDividerExampleDiagram');
            if (!ctx) return;
            
            const context = ctx.getContext('2d');
            context.clearRect(0, 0, 400, 300);
            
            // Divider box
            context.fillStyle = '#fff3e0';
            context.fillRect(175, 135, 50, 30);
            context.strokeStyle = '#ff9800';
            context.lineWidth = 3;
            context.strokeRect(175, 135, 50, 30);
            
            // Input stream
            context.strokeStyle = '#4caf50';
            context.lineWidth = 4;
            context.beginPath();
            context.moveTo(50, 150);
            context.lineTo(170, 150);
            context.stroke();
            
            // Arrow for input
            context.beginPath();
            context.moveTo(170, 150);
            context.lineTo(160, 145);
            context.moveTo(170, 150);
            context.lineTo(160, 155);
            context.stroke();
            
            // Output 1 (prodej - 75%)
            context.strokeStyle = '#2196f3';
            context.beginPath();
            context.moveTo(230, 150);
            context.lineTo(350, 120);
            context.stroke();
            
            // Arrow for output 1
            context.beginPath();
            context.moveTo(350, 120);
            context.lineTo(340, 125);
            context.moveTo(350, 120);
            context.lineTo(345, 130);
            context.stroke();
            
            // Output 2 (recykl - 25%)
            context.strokeStyle = '#9c27b0';
            context.beginPath();
            context.moveTo(230, 150);
            context.lineTo(350, 180);
            context.stroke();
            
            // Arrow for output 2
            context.beginPath();
            context.moveTo(350, 180);
            context.lineTo(340, 175);
            context.moveTo(350, 180);
            context.lineTo(345, 170);
            context.stroke();
            
            // Labels - VƒöT≈†√ç A ƒåITELNƒöJ≈†√ç TEXT s spr√°vn√Ωmi hodnotami separ√°toru
            context.fillStyle = '#000';
            context.font = 'bold 13px Inter';
            context.fillText('1000 kg/h VSTUP', 45, 125);
            context.fillText('40% etanol', 55, 140);
            context.fillText('80¬∞C', 70, 155);
            
            context.fillText('500 kg/h PROUD 1', 245, 95);
            context.fillText('64% etanol', 255, 110);
            context.fillText('36% voda', 255, 125);
            
            context.fillText('500 kg/h PROUD 2', 245, 190);
            context.fillText('16% etanol', 255, 205);
            context.fillText('84% voda', 255, 220);
            
            context.fillStyle = '#ff9800';
            context.font = 'bold 14px Inter';
            context.fillText('SEP', 185, 155);
        }

        // Duplikaƒçn√≠ funkce pro z√°lo≈æky "V√Ωsledky"
        function createMixerExampleDiagram2() {
            const ctx = document.getElementById('mixerExampleDiagram2');
            if (!ctx) return;
            
            const context = ctx.getContext('2d');
            context.clearRect(0, 0, 400, 300);
            
            // Mixer box
            context.fillStyle = '#e3f2fd';
            context.fillRect(175, 125, 60, 40);
            context.strokeStyle = '#1976d2';
            context.lineWidth = 3;
            context.strokeRect(175, 125, 60, 40);
            
            // Input streams
            context.strokeStyle = '#4caf50';
            context.lineWidth = 4;
            context.beginPath();
            context.moveTo(50, 135);
            context.lineTo(170, 135);
            context.stroke();
            
            context.strokeStyle = '#ff9800';
            context.beginPath();
            context.moveTo(50, 155);
            context.lineTo(170, 155);
            context.stroke();
            
            // Output stream
            context.strokeStyle = '#e91e63';
            context.beginPath();
            context.moveTo(240, 145);
            context.lineTo(350, 145);
            context.stroke();
            
            // Arrows
            context.beginPath();
            context.moveTo(170, 135);
            context.lineTo(160, 130);
            context.moveTo(170, 135);
            context.lineTo(160, 140);
            context.stroke();
            
            context.strokeStyle = '#ff9800';
            context.beginPath();
            context.moveTo(170, 155);
            context.lineTo(160, 150);
            context.moveTo(170, 155);
            context.lineTo(160, 160);
            context.stroke();
            
            context.strokeStyle = '#e91e63';
            context.beginPath();
            context.moveTo(350, 145);
            context.lineTo(340, 140);
            context.moveTo(350, 145);
            context.lineTo(340, 150);
            context.stroke();
            
            // Labels
            context.fillStyle = '#000';
            context.font = 'bold 14px Inter';
            context.fillText('200 kg/h', 55, 125);
            context.fillText('20% H‚ÇÇSO‚ÇÑ', 55, 140);
            context.fillText('50 kg/h', 55, 170);
            context.fillText('98% H‚ÇÇSO‚ÇÑ', 55, 185);
            context.fillText('? kg/h', 275, 130);
            context.fillText('? % H‚ÇÇSO‚ÇÑ', 275, 160);
            
            context.fillStyle = '#1976d2';
            context.font = 'bold 16px Inter';
            context.fillText('MIX', 190, 150);
        }

        function createSplitterExampleDiagram2() {
            const ctx = document.getElementById('splitterExampleDiagram2');
            if (!ctx) return;
            
            const context = ctx.getContext('2d');
            context.clearRect(0, 0, 400, 300);
            
            // Splitter box
            context.fillStyle = '#e3f2fd';
            context.fillRect(175, 135, 50, 30);
            context.strokeStyle = '#1976d2';
            context.lineWidth = 3;
            context.strokeRect(175, 135, 50, 30);
            
            // Input and output streams with arrows and labels (same as original)
            context.strokeStyle = '#4caf50';
            context.lineWidth = 4;
            context.beginPath();
            context.moveTo(50, 150);
            context.lineTo(170, 150);
            context.stroke();
            
            // Arrows and labels - same as original splitter diagram
            context.fillStyle = '#000';
            context.font = 'bold 14px Inter';
            context.fillText('500 kg/h', 55, 130);
            context.fillText('60% toluen', 55, 145);
            
            context.fillStyle = '#1976d2';
            context.font = 'bold 16px Inter';
            context.fillText('SPLIT', 180, 155);
        }

        function createReactorExampleDiagram2() {
            const ctx = document.getElementById('reactorExampleDiagram2');
            if (!ctx) return;
            
            const context = ctx.getContext('2d');
            context.clearRect(0, 0, 400, 300);
            
            // Reactor vessel (same as original)
            context.fillStyle = '#fff3e0';
            context.fillRect(160, 120, 80, 60);
            context.strokeStyle = '#ff6f00';
            context.lineWidth = 3;
            context.strokeRect(160, 120, 80, 60);
            
            // Labels and streams (same as original)
            context.fillStyle = '#000';
            context.font = 'bold 14px Inter';
            context.fillText('? mol/h N‚ÇÇ', 5, 125);
            context.fillText('100 mol/h H‚ÇÇ', 5, 145);
            
            context.fillStyle = '#ff6f00';
            context.font = 'bold 16px Inter';
            context.fillText('REAKTOR', 170, 155);
        }

        function createSimpleDividerExampleDiagram2() {
            const ctx = document.getElementById('simpleDividerExampleDiagram2');
            if (!ctx) return;
            
            const context = ctx.getContext('2d');
            context.clearRect(0, 0, 400, 300);
            
            // Divider box (same as original)
            context.fillStyle = '#fff3e0';
            context.fillRect(175, 135, 50, 30);
            context.strokeStyle = '#ff9800';
            context.lineWidth = 3;
            context.strokeRect(175, 135, 50, 30);
            
            // Labels (same as original)
            context.fillStyle = '#000';
            context.font = 'bold 14px Inter';
            context.fillText('1000 kg/h', 55, 125);
            context.fillText('40% etanol', 55, 140);
            
            context.fillStyle = '#ff9800';
            context.font = 'bold 16px Inter';
            context.fillText('DIV', 185, 155);
        }

        function drawMethodologyDiagram() {
            const canvas = document.getElementById('methodologyDiagram');
            if (!canvas) return;
            
            const ctx = canvas.getContext('2d');
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Pozad√≠
            ctx.fillStyle = '#f8f9fa';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // Flowchart krok≈Ø
            const steps = [
                { x: 100, y: 50, text: '1. POCHOP', color: '#e3f2fd' },
                { x: 300, y: 50, text: '2. SCH√âMA', color: '#f3e5f5' },
                { x: 100, y: 130, text: '3. Z√ÅKLAD', color: '#e8f5e8' },
                { x: 300, y: 130, text: '4. ROVNICE', color: '#fff3e0' },
                { x: 100, y: 210, text: '5. DOF', color: '#ffebee' },
                { x: 300, y: 210, text: '6. ≈òE≈†√çM', color: '#e1f5fe' },
                { x: 200, y: 290, text: '7. KONTROLA', color: '#f1f8e9' }
            ];
            
            // Kreslen√≠ box≈Ø a textu
            steps.forEach(step => {
                // Box
                ctx.fillStyle = step.color;
                ctx.fillRect(step.x - 40, step.y - 20, 80, 40);
                ctx.strokeStyle = '#333';
                ctx.lineWidth = 2;
                ctx.strokeRect(step.x - 40, step.y - 20, 80, 40);
                
                // Text
                ctx.fillStyle = '#333';
                ctx.font = 'bold 11px Inter';
                ctx.textAlign = 'center';
                ctx.fillText(step.text, step.x, step.y + 3);
            });
            
            // ≈†ipky mezi kroky
            ctx.strokeStyle = '#666';
            ctx.lineWidth = 2;
            
            // 1 ‚Üí 2
            ctx.beginPath();
            ctx.moveTo(140, 50);
            ctx.lineTo(260, 50);
            ctx.stroke();
            
            // 2 ‚Üí 3  
            ctx.beginPath();
            ctx.moveTo(300, 70);
            ctx.lineTo(300, 100);
            ctx.lineTo(100, 100);
            ctx.lineTo(100, 110);
            ctx.stroke();
            
            // 3 ‚Üí 4
            ctx.beginPath();
            ctx.moveTo(140, 130);
            ctx.lineTo(260, 130);
            ctx.stroke();
            
            // 4 ‚Üí 5
            ctx.beginPath();
            ctx.moveTo(300, 150);
            ctx.lineTo(300, 180);
            ctx.lineTo(100, 180);
            ctx.lineTo(100, 190);
            ctx.stroke();
            
            // 5 ‚Üí 6
            ctx.beginPath();
            ctx.moveTo(140, 210);
            ctx.lineTo(260, 210);
            ctx.stroke();
            
            // 6 ‚Üí 7
            ctx.beginPath();
            ctx.moveTo(300, 230);
            ctx.lineTo(300, 270);
            ctx.lineTo(240, 270);
            ctx.stroke();
            
            // ≈†ipky (hlavy)
            const arrows = [
                { x: 260, y: 50 },
                { x: 100, y: 110 },
                { x: 260, y: 130 },
                { x: 100, y: 190 },
                { x: 260, y: 210 },
                { x: 240, y: 270 }
            ];
            
            arrows.forEach(arrow => {
                ctx.fillStyle = '#666';
                ctx.beginPath();
                ctx.moveTo(arrow.x, arrow.y);
                ctx.lineTo(arrow.x - 5, arrow.y - 3);
                ctx.lineTo(arrow.x - 5, arrow.y + 3);
                ctx.closePath();
                ctx.fill();
            });
            
            // D≈Øraz na DOF
            ctx.fillStyle = '#d32f2f';
            ctx.font = 'bold 14px Inter';
            ctx.textAlign = 'center';
            ctx.fillText('DOF = 0?', 400, 210);
            
            // Pozn√°mka
            ctx.fillStyle = '#666';
            ctx.font = '10px Inter';
            ctx.textAlign = 'left';
            ctx.fillText('DOF = Stupnƒõ volnosti', 350, 240);
            ctx.fillText('(Degrees of Freedom)', 350, 252);
        }

        function drawDofDiagram() {
            const canvas = document.getElementById('dofDiagram');
            if (!canvas) return;
            
            const ctx = canvas.getContext('2d');
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Pozad√≠
            ctx.fillStyle = '#f8f9fa';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // T≈ôi p≈ô√≠pady DOF
            const cases = [
                { x: 100, y: 100, dof: -1, color: '#ffcdd2', label: 'DOF < 0', desc: 'P≈òESPECIFIKOVAN√ù\n≈Ω√°dn√© ≈ôe≈°en√≠' },
                { x: 250, y: 100, dof: 0, color: '#c8e6c9', label: 'DOF = 0', desc: 'SPR√ÅVNƒö URƒåEN√ù\nJedin√© ≈ôe≈°en√≠' },
                { x: 400, y: 100, dof: 1, color: '#fff3e0', label: 'DOF > 0', desc: 'PODSPECIFIKOVAN√ù\nNekoneƒçnƒõ ≈ôe≈°en√≠' }
            ];
            
            // Kreslen√≠ box≈Ø pro jednotliv√© p≈ô√≠pady
            cases.forEach(case_ => {
                // Hlavn√≠ box
                ctx.fillStyle = case_.color;
                ctx.fillRect(case_.x - 50, case_.y - 40, 100, 80);
                ctx.strokeStyle = '#333';
                ctx.lineWidth = 2;
                ctx.strokeRect(case_.x - 50, case_.y - 40, 100, 80);
                
                // Label
                ctx.fillStyle = '#333';
                ctx.font = 'bold 14px Inter';
                ctx.textAlign = 'center';
                ctx.fillText(case_.label, case_.x, case_.y - 10);
                
                // Popis
                const lines = case_.desc.split('\n');
                ctx.font = '10px Inter';
                lines.forEach((line, i) => {
                    ctx.fillText(line, case_.x, case_.y + 5 + i * 12);
                });
            });
            
            // P≈ô√≠klad n√≠≈æe
            ctx.fillStyle = '#333';
            ctx.font = 'bold 16px Inter';
            ctx.textAlign = 'center';
            ctx.fillText('P≈ô√≠klad: M√≠siƒç se 2 proudy na vstupu', 250, 220);
            
            // Tabulka p≈ô√≠kladu
            ctx.font = '12px Inter';
            ctx.textAlign = 'left';
            ctx.fillText('Nezn√°m√©:', 80, 250);
            ctx.fillText('‚Ä¢ Pr≈Øtok produktu: ·πÅ‚ÇÉ', 90, 270);
            ctx.fillText('‚Ä¢ Slo≈æen√≠ produktu: x‚ÇÉ', 90, 285);
            ctx.fillText('‚Ä¢ Teplota produktu: T‚ÇÉ', 90, 300);
            ctx.fillText('CELKEM: 3 nezn√°m√©', 90, 320);
            
            ctx.fillText('Rovnice:', 280, 250);
            ctx.fillText('‚Ä¢ Celkov√° hmot. bilance', 290, 270);
            ctx.fillText('‚Ä¢ Slo≈ækov√° bilance', 290, 285);
            ctx.fillText('‚Ä¢ Tepeln√° bilance', 290, 300);
            ctx.fillText('CELKEM: 3 nez√°visl√©', 290, 320);
            
            // V√Ωsledek
            ctx.fillStyle = '#2e7d32';
            ctx.font = 'bold 14px Inter';
            ctx.textAlign = 'center';
            ctx.fillText('DOF = 3 - 3 = 0 ‚Üí Syst√©m ≈ôe≈°iteln√Ω!', 250, 350);
            
            // ≈†ipka ukazuj√≠c√≠ na spr√°vn√Ω p≈ô√≠pad
            ctx.strokeStyle = '#2e7d32';
            ctx.lineWidth = 3;
            ctx.beginPath();
            ctx.moveTo(250, 330);
            ctx.lineTo(250, 180);
            ctx.stroke();
            
            // ≈†ipka (hlava)
            ctx.fillStyle = '#2e7d32';
            ctx.beginPath();
            ctx.moveTo(250, 180);
            ctx.lineTo(245, 190);
            ctx.lineTo(255, 190);
            ctx.closePath();
            ctx.fill();
        }

        function drawConversionDiagram() {
            const canvas = document.getElementById('conversionDiagram');
            if (!canvas) return;
            
            const ctx = canvas.getContext('2d');
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Pozad√≠
            ctx.fillStyle = '#f8f9fa';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // P≈ô√≠klad reakce N‚ÇÇ + 3H‚ÇÇ ‚Üí 2NH‚ÇÉ
            ctx.fillStyle = '#333';
            ctx.font = 'bold 16px Inter';
            ctx.textAlign = 'center';
            ctx.fillText('P≈ô√≠klad: N‚ÇÇ + 3H‚ÇÇ ‚Üí 2NH‚ÇÉ', 250, 30);
            
            // Vstup
            ctx.fillStyle = '#e3f2fd';
            ctx.fillRect(50, 60, 120, 80);
            ctx.strokeStyle = '#1976d2';
            ctx.lineWidth = 2;
            ctx.strokeRect(50, 60, 120, 80);
            
            ctx.fillStyle = '#333';
            ctx.font = 'bold 14px Inter';
            ctx.textAlign = 'center';
            ctx.fillText('VSTUP', 110, 85);
            ctx.font = '12px Inter';
            ctx.fillText('N‚ÇÇ: 100 mol/s', 110, 105);
            ctx.fillText('H‚ÇÇ: 300 mol/s', 110, 120);
            
            // Reaktor
            ctx.fillStyle = '#fff3e0';
            ctx.fillRect(200, 60, 100, 80);
            ctx.strokeStyle = '#ff9800';
            ctx.lineWidth = 2;
            ctx.strokeRect(200, 60, 100, 80);
            
            ctx.fillStyle = '#333';
            ctx.font = 'bold 14px Inter';
            ctx.fillText('REAKTOR', 250, 90);
            ctx.font = '12px Inter';
            ctx.fillText('X_N‚ÇÇ = 0.8', 250, 110);
            ctx.fillText('(80% konverze)', 250, 125);
            
            // V√Ωstup
            ctx.fillStyle = '#e8f5e8';
            ctx.fillRect(330, 60, 120, 80);
            ctx.strokeStyle = '#4caf50';
            ctx.lineWidth = 2;
            ctx.strokeRect(330, 60, 120, 80);
            
            ctx.fillStyle = '#333';
            ctx.font = 'bold 14px Inter';
            ctx.textAlign = 'center';
            ctx.fillText('V√ùSTUP', 390, 85);
            ctx.font = '12px Inter';
            ctx.fillText('N‚ÇÇ: 20 mol/s', 390, 105);
            ctx.fillText('H‚ÇÇ: 60 mol/s', 390, 120);
            ctx.fillText('NH‚ÇÉ: 160 mol/s', 390, 135);
            
            // ≈†ipky
            ctx.strokeStyle = '#666';
            ctx.lineWidth = 3;
            ctx.beginPath();
            ctx.moveTo(170, 100);
            ctx.lineTo(200, 100);
            ctx.stroke();
            
            ctx.beginPath();
            ctx.moveTo(300, 100);
            ctx.lineTo(330, 100);
            ctx.stroke();
            
            // V√Ωpoƒçet
            ctx.fillStyle = '#333';
            ctx.font = 'bold 14px Inter';
            ctx.textAlign = 'left';
            ctx.fillText('V√Ωpoƒçet:', 50, 180);
            
            ctx.font = '12px Inter';
            ctx.fillText('1. Reakƒçn√≠ rozsah: Œæ = X_N‚ÇÇ √ó n_N‚ÇÇ,in / (-ŒΩ_N‚ÇÇ) = 0.8 √ó 100 / 1 = 80 mol/s', 50, 200);
            ctx.fillText('2. Mol√°rn√≠ bilance N‚ÇÇ: n_out = 100 - 80 = 20 mol/s', 50, 220);
            ctx.fillText('3. Mol√°rn√≠ bilance H‚ÇÇ: n_out = 300 - 3√ó80 = 60 mol/s', 50, 240);
            ctx.fillText('4. Mol√°rn√≠ bilance NH‚ÇÉ: n_out = 0 + 2√ó80 = 160 mol/s', 50, 260);
            
            // Graf konverze vs ƒças (ilustrativn√≠)
            ctx.fillStyle = '#333';
            ctx.font = 'bold 12px Inter';
            ctx.textAlign = 'center';
            ctx.fillText('Typick√° z√°vislost konverze na ƒçase', 300, 300);
            
            // Jednoduch√° k≈ôivka
            ctx.strokeStyle = '#d32f2f';
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.moveTo(200, 350);
            for (let x = 200; x <= 400; x += 2) {
                const t = (x - 200) / 200 * 5; // ƒças 0-5
                const conv = 0.9 * (1 - Math.exp(-0.8 * t)); // exponenci√°ln√≠ r≈Øst
                const y = 350 - conv * 50; // ≈°k√°lov√°n√≠
                ctx.lineTo(x, y);
            }
            ctx.stroke();
            
            // Osy grafu
            ctx.strokeStyle = '#333';
            ctx.lineWidth = 1;
            ctx.beginPath();
            ctx.moveTo(200, 350);
            ctx.lineTo(400, 350);
            ctx.moveTo(200, 350);
            ctx.lineTo(200, 300);
            ctx.stroke();
            
            ctx.font = '10px Inter';
            ctx.textAlign = 'center';
            ctx.fillText('0', 200, 365);
            ctx.fillText('X_A = 1', 200, 295);
            ctx.fillText('ƒças', 300, 375);
        }
    </script>
</body>
</html>