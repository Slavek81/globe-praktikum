<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interpolace a aproximace - Matematické praktikum</title>
    <!-- Import pro renderování LaTeX matematických vzorců -->
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>

    <link rel="stylesheet" href="unified-style.css">

    <style>
        /* Additional styles for calculators and interactive elements */
        .calculator {
            background: #fff3e0;
            border: 2px solid #ff9800;
            border-radius: 12px;
            padding: 1rem;
            margin: 1rem 0;
        }

        .calc-input {
            width: 100%;
            padding: 0.5rem;
            border: 1px solid #ddd;
            border-radius: 4px;
            margin: 0.3rem 0;
            font-size: 0.9rem;
        }

        .calc-result {
            background: #e8f5e8;
            border: 1px solid #4caf50;
            border-radius: 8px;
            padding: 1rem;
            margin-top: 1rem;
            display: none;
        }

        .calc-result.visible {
            display: block;
        }

        .calc-button {
            background: #ff9800;
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 4px;
            cursor: pointer;
            font-weight: bold;
            margin-top: 0.5rem;
        }

        .calc-button:hover {
            background: #f57c00;
        }

        .info-box {
            background: #e8f4fd;
            border: 1px solid #2196f3;
            border-left: 4px solid #2196f3;
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 8px;
        }

        .method-card {
            background: white;
            border-radius: 12px;
            padding: 1.5rem;
            margin: 1rem 0;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            border-left: 6px solid #bc5090;
        }

        .interpolation-card { border-left-color: #bc5090; }
        .approximation-card { border-left-color: #ff6361; }
        .polynomial-card { border-left-color: #ffa600; }
        .spline-card { border-left-color: #58508d; }
    </style>
</head>
<body>
    <main>
        <header>
            <h1>Interpolace a aproximace</h1>
            <p>Metody zpracování dat pro získání kontinuálních funkcí z diskrétních bodů</p>
        </header>

        <section class="intro-box">
            <h2>Co je interpolace a aproximace?</h2>
            <p>Představte si, že máte naměřená data v několika bodech a potřebujete odhadnout hodnoty mezi těmito body nebo najít obecný trend. <strong>Interpolace a aproximace</strong> jsou matematické metody, které nám pomohou vytvořit spojité funkce z diskrétních dat.</p>

            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem; margin: 2rem 0;">
                <div style="background: linear-gradient(135deg, #bc5090, #ff6361); color: white; padding: 2rem; border-radius: 12px; text-align: center;">
                    <h3 style="color: white; margin-bottom: 1rem; font-size: 1.5rem;">INTERPOLACE</h3>
                    <p style="font-size: 1.1rem; margin-bottom: 0.5rem;">Procházíme přesně všemi danými body</p>
                    <p style="font-size: 0.9rem; opacity: 0.9;">f(xi) = yi pro všechna i</p>
                </div>
                <div style="background: linear-gradient(135deg, #ffa600, #58508d); color: white; padding: 2rem; border-radius: 12px; text-align: center;">
                    <h3 style="color: white; margin-bottom: 1rem; font-size: 1.5rem;">APROXIMACE</h3>
                    <p style="font-size: 1.1rem; margin-bottom: 0.5rem;">Hledáme nejlepší celkový trend</p>
                    <p style="font-size: 0.9rem; opacity: 0.9;">Minimalizujeme celkovou chybu</p>
                </div>
            </div>

            <div class="info-box">
                <h3>Klíčový rozdíl</h3>
                <p><strong>Interpolace</strong> přesně prochází všemi body, <strong>aproximace (regrese)</strong> hledá nejlepší celkový fit pro celý dataset. Interpolace je vhodná pro přesná data, aproximace pro data s chybami a pro hledání trendů.</p>
            </div>
        </section>

        <!-- Concept Comparison Graph -->
        <section class="unit-section">
            <h2>Vizuální srovnání přístupů</h2>
            <div class="example">
                <div style="background: white; border-radius: 12px; padding: 1rem; margin: 1rem 0; box-shadow: 0 4px 15px rgba(0,0,0,0.1); border: 2px solid #58508d;">
                    <div id="concept-comparison" style="height: 400px;"></div>
                </div>
            </div>
        </section>

        <!-- Linear Interpolation -->
        <section class="unit-section">
            <h2>1. Lineární interpolace</h2>
            <p><strong>Princip:</strong> Nejjednodušší metoda interpolace. Spojujeme sousední body přímkami. Je to ekvivalent "spojování teček" rovnými čarami.</p>

            <div class="equations">
                <h3>Matematický vzorec</h3>
                <p><strong>Pro body (x₀, y₀) a (x₁, y₁):</strong>
                $$ y = y_0 + (y_1 - y_0) \cdot \frac{x - x_0}{x_1 - x_0} $$</p>

                <h4>Postup výpočtu:</h4>
                <ol>
                    <li>Najdeme dva nejbližší body (x₀, y₀) a (x₁, y₁)</li>
                    <li>Použijeme vzorec pro přímku procházející těmito body</li>
                    <li>Vypočteme hodnotu y pro požadované x</li>
                </ol>
            </div>

            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem; margin: 2rem 0;">
                <div>
                    <div class="method-card interpolation-card">
                        <h4>✅ Výhody:</h4>
                        <ul>
                            <li><strong>Jednoduchost:</strong> Rychlá implementace a výpočet</li>
                            <li><strong>Stabilita:</strong> Vždy funguje pro dva body</li>
                            <li><strong>Monotónnost:</strong> Zachovává monotónnost dat</li>
                        </ul>
                    </div>
                </div>
                <div>
                    <div class="method-card approximation-card">
                        <h4>❌ Nevýhody:</h4>
                        <ul>
                            <li><strong>Nespojitá derivace:</strong> "Zlomy" v bodech</li>
                            <li><strong>Není hladká:</strong> Viditelné přechody mezi úseky</li>
                            <li><strong>Omezená přesnost:</strong> Jen pro lokální aproximace</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="calculator">
                <h4>Kalkulátor lineární interpolace</h4>
                <label>x₀: <input type="number" id="x0" class="calc-input" value="1" step="0.1"></label>
                <label>y₀: <input type="number" id="y0" class="calc-input" value="2" step="0.1"></label>
                <label>x₁: <input type="number" id="x1" class="calc-input" value="3" step="0.1"></label>
                <label>y₁: <input type="number" id="y1" class="calc-input" value="6" step="0.1"></label>
                <label>x (hledané): <input type="number" id="x-interp" class="calc-input" value="2" step="0.1"></label>
                <button class="calc-button" onclick="calculateLinearInterpolation()">Vypočítej</button>
                <div id="linear-result" class="calc-result"></div>
            </div>

            <div class="example">
                <h3>Vizualizace metody</h3>
                <div style="background: white; border-radius: 12px; padding: 1rem; margin: 1rem 0; box-shadow: 0 4px 15px rgba(0,0,0,0.1); border: 2px solid #58508d;">
                    <div id="linear-interpolation" style="height: 400px;"></div>
                </div>
            </div>
        </section>

        <!-- Polynomial Interpolation -->
        <section class="unit-section">
            <h2>2. Polynomiální interpolace</h2>
            <p><strong>Princip:</strong> Pro n bodů hledáme polynom stupně n-1, který prochází všemi body. Nejčastěji používáme Lagrangeovu metodu.</p>

            <div class="equations">
                <h3>Lagrangeova metoda</h3>
                <p><strong>Obecný vzorec:</strong>
                $$ L(x) = \sum_{i=0}^{n-1} y_i \cdot l_i(x) $$
                kde
                $$ l_i(x) = \prod_{\substack{j=0 \\ j \neq i}}^{n-1} \frac{x - x_j}{x_i - x_j} $$</p>

                <h4>Vlastnosti polynomiální interpolace:</h4>
                <ul>
                    <li><strong>Jednoznačnost:</strong> Pro n bodů existuje jediný polynom stupně n-1</li>
                    <li><strong>Hladkost:</strong> Polynom je nekonečněkrát diferencovatelný</li>
                    <li><strong>Globální charakter:</strong> Změna jednoho bodu ovlivní celý polynom</li>
                </ul>
            </div>

            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem; margin: 2rem 0;">
                <div>
                    <div class="method-card polynomial-card">
                        <h4>✅ Výhody:</h4>
                        <ul>
                            <li><strong>Hladká křivka:</strong> Nekonečněkrát diferencovatelná</li>
                            <li><strong>Jednoznačnost:</strong> Vždy existuje jediné řešení</li>
                            <li><strong>Analytická forma:</strong> Máme explicitní vzorec</li>
                        </ul>
                    </div>
                </div>
                <div>
                    <div class="method-card spline-card">
                        <h4>❌ Nevýhody:</h4>
                        <ul>
                            <li><strong>Rungeův fenomén:</strong> Oscilace na krajích intervalu</li>
                            <li><strong>Vysoký stupeň:</strong> Pro více bodů nestabilní</li>
                            <li><strong>Globální povaha:</strong> Změna jednoho bodu ovlivní vše</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="info-box">
                <h4>Příklad pro 3 body</h4>
                <p><strong>Body:</strong> (0,1), (1,4), (2,1)</p>
                <p><strong>Polynom 2. stupně:</strong> \(y = -2x^2 + 5x + 1\)</p>
                <p><strong>Ověření:</strong> f(0)=1, f(1)=4, f(2)=1 ✓</p>
            </div>

            <div class="example">
                <h3>Vizualizace metody</h3>
                <div style="background: white; border-radius: 12px; padding: 1rem; margin: 1rem 0; box-shadow: 0 4px 15px rgba(0,0,0,0.1); border: 2px solid #58508d;">
                    <div id="polynomial-interpolation" style="height: 400px;"></div>
                </div>
            </div>
        </section>

        <!-- Spline Interpolation -->
        <section class="unit-section">
            <h2>3. Kubické spliny</h2>
            <p><strong>Princip:</strong> Nejlepší kompromis mezi hladkostí a stabilitou. Používáme kubické polynomy po částech s podmínkami spojitosti derivací.</p>

            <div class="equations">
                <h3>Podmínky pro kubický spline</h3>
                <p><strong>Na každém intervalu [xᵢ, xᵢ₊₁]:</strong>
                $$ S_i(x) = a_i + b_i(x - x_i) + c_i(x - x_i)^2 + d_i(x - x_i)^3 $$</p>

                <h4>Podmínky spojitosti:</h4>
                <ol>
                    <li><strong>Interpolace:</strong> S(xᵢ) = yᵢ pro všechna i</li>
                    <li><strong>Spojitost funkce:</strong> S je spojitá</li>
                    <li><strong>Spojitost 1. derivace:</strong> S' je spojitá</li>
                    <li><strong>Spojitost 2. derivace:</strong> S'' je spojitá</li>
                </ol>
            </div>

            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem; margin: 2rem 0;">
                <div>
                    <div class="method-card spline-card">
                        <h4>✅ Výhody splinů:</h4>
                        <ul>
                            <li><strong>Minimální oscilace:</strong> Nejhladší možná křivka</li>
                            <li><strong>Lokální charakter:</strong> Změna bodu ovlivní jen okolí</li>
                            <li><strong>Numerická stabilita:</strong> Dobře podmíněná úloha</li>
                            <li><strong>Přirozený vzhled:</strong> Křivky vypadají "přirozeně"</li>
                        </ul>
                    </div>
                </div>
                <div>
                    <div class="info-box">
                        <h4>Použití v praxi</h4>
                        <ul>
                            <li><strong>CAD systémy:</strong> Návrh křivek a povrchů</li>
                            <li><strong>Animace:</strong> Hladké trajektorie</li>
                            <li><strong>Vědecké aplikace:</strong> Interpolace experimentálních dat</li>
                            <li><strong>Grafika:</strong> Vyhlazování křivek</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="example">
                <h3>Srovnání s lineární interpolací</h3>
                <div style="background: white; border-radius: 12px; padding: 1rem; margin: 1rem 0; box-shadow: 0 4px 15px rgba(0,0,0,0.1); border: 2px solid #58508d;">
                    <div id="spline-interpolation" style="height: 400px;"></div>
                </div>
            </div>
        </section>

        <!-- Linear Regression -->
        <section class="unit-section">
            <h2>4. Lineární regrese (metoda nejmenších čtverců)</h2>
            <p><strong>Princip:</strong> Hledáme přímku, která nejlépe popisuje trend v datech. Minimalizujeme součet čtverců odchylek od této přímky.</p>

            <div class="equations">
                <h3>Matematické odvození</h3>
                <p><strong>Hledáme přímku:</strong> \(y = ax + b\)</p>
                <p><strong>Minimalizujeme:</strong> \(\sum_{i=1}^{n} (y_i - (ax_i + b))^2\)</p>
                <p><strong>Řešení:</strong>
                $$ a = \frac{n\sum x_i y_i - \sum x_i \sum y_i}{n\sum x_i^2 - (\sum x_i)^2} $$
                $$ b = \frac{\sum y_i - a\sum x_i}{n} $$</p>

                <h4>Korelační koeficient</h4>
                <p><strong>Míra lineární závislosti:</strong>
                $$ r = \frac{n\sum x_i y_i - \sum x_i \sum y_i}{\sqrt{(n\sum x_i^2 - (\sum x_i)^2)(n\sum y_i^2 - (\sum y_i)^2)}} $$</p>
                <p><strong>Interpretace:</strong> r ∈ [-1, 1], |r| > 0.8 znamená silnou lineární závislost</p>
            </div>

            <div class="calculator">
                <h4>Kalkulátor lineární regrese</h4>
                <p>Zadej body (x,y) oddělené čárkami a středníky:</p>
                <input type="text" id="regression-points" class="calc-input"
                       value="1,2;2,3;3,5;4,4;5,6" placeholder="x1,y1;x2,y2;...">
                <button class="calc-button" onclick="calculateLinearRegression()">Vypočítej regresi</button>
                <div id="regression-result" class="calc-result"></div>
            </div>

            <div class="example">
                <h3>Vizualizace metody</h3>
                <div style="background: white; border-radius: 12px; padding: 1rem; margin: 1rem 0; box-shadow: 0 4px 15px rgba(0,0,0,0.1); border: 2px solid #58508d;">
                    <div id="linear-regression" style="height: 400px;"></div>
                </div>
            </div>
        </section>

        <!-- Polynomial Regression -->
        <section class="unit-section">
            <h2>5. Polynomiální a exponenciální regrese</h2>
            <p><strong>Princip:</strong> Rozšíření lineární regrese pro složitější trendy. Používáme vyšší stupně polynomů nebo exponenciální funkce.</p>

            <div class="equations">
                <h3>Typy regresí</h3>

                <div class="method-card polynomial-card">
                    <h4>Polynomiální regrese</h4>
                    <p><strong>Obecný tvar:</strong> \(y = a_0 + a_1x + a_2x^2 + \ldots + a_nx^n\)</p>
                    <p><strong>Použití:</strong> Data s více lokálními extrémy, křivky s inflexními body</p>
                </div>

                <div class="method-card approximation-card">
                    <h4>Exponenciální regrese</h4>
                    <p><strong>Exponenciální:</strong> \(y = ae^{bx}\)</p>
                    <p><strong>Mocninná:</strong> \(y = ax^b\)</p>
                    <p><strong>Použití:</strong> Růstové procesy, rozpadové procesy, biologické modely</p>
                </div>

                <h4>Koeficient determinace R²</h4>
                <p><strong>Kvalita fitu:</strong>
                $$ R^2 = 1 - \frac{\sum(y_i - \hat{y}_i)^2}{\sum(y_i - \bar{y})^2} $$</p>
                <p><strong>Interpretace:</strong> R² ∈ [0, 1], vyšší hodnoty = lepší fit</p>
            </div>

            <div class="info-box">
                <h4>Volba stupně polynomu</h4>
                <ul>
                    <li><strong>Stupeň 1:</strong> Lineární trend (přímka)</li>
                    <li><strong>Stupeň 2:</strong> Parabola (jeden extrém)</li>
                    <li><strong>Stupeň 3:</strong> Kubika (inflexní bod, dva extrémy)</li>
                    <li><strong>Vyšší stupně:</strong> Pozor na přeučení (overfitting)!</li>
                </ul>
            </div>

            <div class="example">
                <h3>Srovnání lineární a kvadratické regrese</h3>
                <div style="background: white; border-radius: 12px; padding: 1rem; margin: 1rem 0; box-shadow: 0 4px 15px rgba(0,0,0,0.1); border: 2px solid #58508d;">
                    <div id="polynomial-regression" style="height: 400px;"></div>
                </div>
            </div>
        </section>

        <!-- Comparison Section -->
        <section class="unit-section">
            <h2>6. Srovnání metod a praktické použití</h2>

            <h3>Kdy použít kterou metodu?</h3>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem; margin: 2rem 0;">
                <div>
                    <h4>Interpolace - kdy použít?</h4>
                    <ul>
                        <li>Máme přesné hodnoty v několika bodech</li>
                        <li>Chceme odhadnout hodnoty mezi měřeními</li>
                        <li>Data jsou bez chyb nebo s malými chybami</li>
                        <li><strong>Příklady:</strong> tabulky funkcí, technické grafy, CAD systémy</li>
                    </ul>
                </div>
                <div>
                    <h4>Aproximace - kdy použít?</h4>
                    <ul>
                        <li>Máme velký dataset s experimentálními chybami</li>
                        <li>Chceme najít obecný trend v datech</li>
                        <li>Potřebujeme model pro předpovědi</li>
                        <li><strong>Příklady:</strong> ekonomická data, biologické výzkumy, fyzikální experimenty</li>
                    </ul>
                </div>
            </div>

            <h3>Srovnávací tabulka metod</h3>
            <table>
                <tr><th>Metoda</th><th>Typ</th><th>Výhody</th><th>Nevýhody</th><th>Typické použití</th></tr>
                <tr><td><strong>Lineární interpolace</strong></td><td>Interpolace</td><td>Jednoduchá, rychlá</td><td>Není hladká</td><td>Základní odhady</td></tr>
                <tr><td><strong>Polynomiální interpolace</strong></td><td>Interpolace</td><td>Hladká křivka</td><td>Oscilace, nestabilita</td><td>Málo bodů (< 6)</td></tr>
                <tr><td><strong>Kubické spliny</strong></td><td>Interpolace</td><td>Hladké, stabilní</td><td>Složitější výpočet</td><td>Technické aplikace</td></tr>
                <tr><td><strong>Lineární regrese</strong></td><td>Aproximace</td><td>Robustní, interpretovatelná</td><td>Pouze lineární trendy</td><td>Základní analýzy</td></tr>
                <tr><td><strong>Polynomiální regrese</strong></td><td>Aproximace</td><td>Složitější trendy</td><td>Přeučení, nestabilita</td><td>Nelineární závislosti</td></tr>
            </table>

            <h3>Praktická doporučení</h3>
            <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 1rem; margin: 2rem 0;">
                <div style="background: #e8f5e8; padding: 1rem; border-radius: 8px; text-align: center;">
                    <strong>💡 Tip pro praxi</strong><br>
                    <span style="font-size: 0.9rem;">Začněte jednoduše, postupně přidávejte složitost</span>
                </div>
                <div style="background: #fff3e0; padding: 1rem; border-radius: 8px; text-align: center;">
                    <strong>⚠️ Pozor</strong><br>
                    <span style="font-size: 0.9rem;">Vysoký stupeň ≠ lepší výsledek</span>
                </div>
                <div style="background: #e3f2fd; padding: 1rem; border-radius: 8px; text-align: center;">
                    <strong>📊 Validace</strong><br>
                    <span style="font-size: 0.9rem;">Vždy ověřte výsledky na testovacích datech</span>
                </div>
            </div>

            <div class="info-box">
                <h4>Rozhodovací strom pro výběr metody</h4>
                <ol>
                    <li><strong>Máte přesná data bez chyb?</strong> → Interpolace</li>
                    <li><strong>Máte experimentální data s chybami?</strong> → Aproximace (regrese)</li>
                    <li><strong>Pro interpolaci: Kolik bodů máte?</strong>
                        <ul>
                            <li>2 body → Lineární interpolace</li>
                            <li>3-5 bodů → Polynomiální interpolace</li>
                            <li>Více bodů → Kubické spliny</li>
                        </ul>
                    </li>
                    <li><strong>Pro regresi: Jaký trend vidíte?</strong>
                        <ul>
                            <li>Lineární → Lineární regrese</li>
                            <li>Zakřivený → Polynomiální regrese</li>
                            <li>Exponenciální růst → Exponenciální regrese</li>
                        </ul>
                    </li>
                </ol>
            </div>
        </section>

    </main>

    <script>
        // Configure MathJax
        window.MathJax = {
            tex: {
                inlineMath: [['\\(', '\\)']],
                displayMath: [['$$', '$$']],
                processEscapes: true,
                processEnvironments: true
            },
            options: {
                skipHtmlTags: ['script', 'noscript', 'style', 'textarea', 'pre']
            }
        };

        // Calculator functions
        function calculateLinearInterpolation() {
            const x0 = parseFloat(document.getElementById('x0').value);
            const y0 = parseFloat(document.getElementById('y0').value);
            const x1 = parseFloat(document.getElementById('x1').value);
            const y1 = parseFloat(document.getElementById('y1').value);
            const x = parseFloat(document.getElementById('x-interp').value);

            const y = y0 + (y1 - y0) * (x - x0) / (x1 - x0);

            const result = document.getElementById('linear-result');
            result.innerHTML = `
                <h4>Výsledek lineární interpolace:</h4>
                <p><strong>y(${x}) = ${y.toFixed(3)}</strong></p>
                <p>Vzorec: y = ${y0} + (${y1} - ${y0}) × (${x} - ${x0})/(${x1} - ${x0})</p>
                <p>Substituce: y = ${y0} + ${(y1 - y0).toFixed(3)} × ${((x - x0)/(x1 - x0)).toFixed(3)} = ${y.toFixed(3)}</p>
            `;
            result.classList.add('visible');
        }

        function calculateLinearRegression() {
            const input = document.getElementById('regression-points').value;
            const points = input.split(';').map(point => {
                const [x, y] = point.split(',').map(parseFloat);
                return {x, y};
            });

            const n = points.length;
            const sumX = points.reduce((sum, p) => sum + p.x, 0);
            const sumY = points.reduce((sum, p) => sum + p.y, 0);
            const sumXY = points.reduce((sum, p) => sum + p.x * p.y, 0);
            const sumX2 = points.reduce((sum, p) => sum + p.x * p.x, 0);
            const sumY2 = points.reduce((sum, p) => sum + p.y * p.y, 0);

            const a = (n * sumXY - sumX * sumY) / (n * sumX2 - sumX * sumX);
            const b = (sumY - a * sumX) / n;

            // Correlation coefficient
            const r = (n * sumXY - sumX * sumY) / Math.sqrt((n * sumX2 - sumX * sumX) * (n * sumY2 - sumY * sumY));

            const result = document.getElementById('regression-result');
            result.innerHTML = `
                <h4>Výsledek lineární regrese:</h4>
                <p><strong>y = ${a.toFixed(3)}x + ${b.toFixed(3)}</strong></p>
                <p>Korelační koeficient: r = ${r.toFixed(3)}</p>
                <p>Kvalita fitu: ${Math.abs(r) > 0.8 ? 'Silná' : Math.abs(r) > 0.5 ? 'Střední' : 'Slabá'} závislost</p>
                <p>R² = ${(r*r).toFixed(3)} (${(r*r*100).toFixed(1)}% variability vysvětleno)</p>
            `;
            result.classList.add('visible');

            // Update regression graph
            createLinearRegressionGraph(points, a, b);
        }

        // Graph functions
        function createConceptComparison() {
            // Sample data points
            const points = [
                {x: 1, y: 2},
                {x: 2, y: 3.5},
                {x: 3, y: 2.8},
                {x: 4, y: 4.2},
                {x: 5, y: 4.8}
            ];

            // Interpolation (spline-like)
            const interpX = [];
            const interpY = [];
            for (let x = 1; x <= 5; x += 0.1) {
                interpX.push(x);
                // Simple cubic interpolation approximation
                let y = 2 + 0.5*x + 0.1*x*x - 0.02*x*x*x;
                if (x > 2.5) y += Math.sin((x-2.5)*3) * 0.3;
                interpY.push(y);
            }

            // Linear regression
            const n = points.length;
            const sumX = points.reduce((sum, p) => sum + p.x, 0);
            const sumY = points.reduce((sum, p) => sum + p.y, 0);
            const sumXY = points.reduce((sum, p) => sum + p.x * p.y, 0);
            const sumX2 = points.reduce((sum, p) => sum + p.x * p.x, 0);
            const a = (n * sumXY - sumX * sumY) / (n * sumX2 - sumX * sumX);
            const b = (sumY - a * sumX) / n;

            const regressionX = [1, 5];
            const regressionY = [a * 1 + b, a * 5 + b];

            const traces = [
                {
                    x: points.map(p => p.x),
                    y: points.map(p => p.y),
                    mode: 'markers',
                    marker: {color: 'black', size: 10},
                    name: 'Naměřená data'
                },
                {
                    x: interpX,
                    y: interpY,
                    mode: 'lines',
                    line: {color: '#bc5090', width: 3},
                    name: 'Interpolace (prochází všemi body)'
                },
                {
                    x: regressionX,
                    y: regressionY,
                    mode: 'lines',
                    line: {color: '#ffa600', width: 3, dash: 'dash'},
                    name: 'Regrese (nejlepší fit)'
                }
            ];

            const layout = {
                title: 'Interpolace vs. Aproximace',
                xaxis: {title: 'x'},
                yaxis: {title: 'y'},
                showlegend: true,
                margin: {l: 40, r: 40, t: 40, b: 40}
            };

            Plotly.newPlot('concept-comparison', traces, layout, {responsive: true});
        }

        function createLinearInterpolation() {
            const x0 = 1, y0 = 2, x1 = 3, y1 = 6;

            const lineX = [x0, x1];
            const lineY = [y0, y1];

            // Interpolated point
            const x = 2;
            const y = y0 + (y1 - y0) * (x - x0) / (x1 - x0);

            const traces = [
                {
                    x: [x0, x1],
                    y: [y0, y1],
                    mode: 'markers',
                    marker: {color: 'blue', size: 12},
                    name: 'Známé body'
                },
                {
                    x: lineX,
                    y: lineY,
                    mode: 'lines',
                    line: {color: '#bc5090', width: 3},
                    name: 'Lineární interpolace'
                },
                {
                    x: [x],
                    y: [y],
                    mode: 'markers',
                    marker: {color: 'red', size: 12, symbol: 'star'},
                    name: 'Interpolovaný bod'
                }
            ];

            const layout = {
                title: 'Lineární interpolace',
                xaxis: {title: 'x', range: [0.5, 3.5]},
                yaxis: {title: 'y', range: [1, 7]},
                showlegend: true,
                margin: {l: 40, r: 40, t: 40, b: 40}
            };

            Plotly.newPlot('linear-interpolation', traces, layout, {responsive: true});
        }

        function createPolynomialInterpolation() {
            const points = [
                {x: 0, y: 1},
                {x: 1, y: 4},
                {x: 2, y: 1},
                {x: 3, y: 6}
            ];

            // Polynomial through all points (degree 3)
            const polyX = [];
            const polyY = [];
            for (let x = -0.5; x <= 3.5; x += 0.05) {
                polyX.push(x);
                // Lagrange interpolation result (calculated separately)
                const y = 1 + 7.5*x - 4.5*x*x + 0.5*x*x*x;
                polyY.push(y);
            }

            const traces = [
                {
                    x: points.map(p => p.x),
                    y: points.map(p => p.y),
                    mode: 'markers',
                    marker: {color: 'black', size: 12},
                    name: 'Body k interpolaci'
                },
                {
                    x: polyX,
                    y: polyY,
                    mode: 'lines',
                    line: {color: '#ffa600', width: 3},
                    name: 'Polynom 3. stupně'
                }
            ];

            const layout = {
                title: 'Polynomiální interpolace',
                xaxis: {title: 'x', range: [-0.5, 3.5]},
                yaxis: {title: 'y'},
                showlegend: true,
                margin: {l: 40, r: 40, t: 40, b: 40}
            };

            Plotly.newPlot('polynomial-interpolation', traces, layout, {responsive: true});
        }

        function createSplineInterpolation() {
            const points = [
                {x: 0, y: 0},
                {x: 1, y: 1},
                {x: 2, y: 4},
                {x: 3, y: 3},
                {x: 4, y: 2},
                {x: 5, y: 5}
            ];

            // Smooth spline approximation
            const splineX = [];
            const splineY = [];
            for (let x = 0; x <= 5; x += 0.05) {
                splineX.push(x);
                // Smooth curve through points
                let y = 0;
                if (x <= 1) y = x;
                else if (x <= 2) y = 1 + 3*(x-1) - 2*(x-1)*(x-1) + (x-1)*(x-1)*(x-1);
                else if (x <= 3) y = 4 - (x-2) - 0.5*(x-2)*(x-2);
                else if (x <= 4) y = 3 - (x-3) + 0.5*(x-3)*(x-3);
                else y = 2 + 3*(x-4) - (x-4)*(x-4) + 0.5*(x-4)*(x-4)*(x-4);
                splineY.push(y);
            }

            // Linear interpolation for comparison
            const linearX = [];
            const linearY = [];
            for (let i = 0; i < points.length - 1; i++) {
                const p1 = points[i];
                const p2 = points[i + 1];
                for (let x = p1.x; x <= p2.x; x += 0.05) {
                    linearX.push(x);
                    const y = p1.y + (p2.y - p1.y) * (x - p1.x) / (p2.x - p1.x);
                    linearY.push(y);
                }
            }

            const traces = [
                {
                    x: points.map(p => p.x),
                    y: points.map(p => p.y),
                    mode: 'markers',
                    marker: {color: 'black', size: 10},
                    name: 'Kontrolní body'
                },
                {
                    x: linearX,
                    y: linearY,
                    mode: 'lines',
                    line: {color: 'gray', width: 2, dash: 'dash'},
                    name: 'Lineární interpolace'
                },
                {
                    x: splineX,
                    y: splineY,
                    mode: 'lines',
                    line: {color: '#58508d', width: 3},
                    name: 'Kubický spline'
                }
            ];

            const layout = {
                title: 'Kubické spliny vs. lineární interpolace',
                xaxis: {title: 'x'},
                yaxis: {title: 'y'},
                showlegend: true,
                margin: {l: 40, r: 40, t: 40, b: 40}
            };

            Plotly.newPlot('spline-interpolation', traces, layout, {responsive: true});
        }

        function createLinearRegressionGraph(points = null, a = null, b = null) {
            if (!points) {
                points = [
                    {x: 1, y: 2.1},
                    {x: 2, y: 2.9},
                    {x: 3, y: 5.1},
                    {x: 4, y: 4.2},
                    {x: 5, y: 5.8}
                ];
            }

            if (a === null || b === null) {
                const n = points.length;
                const sumX = points.reduce((sum, p) => sum + p.x, 0);
                const sumY = points.reduce((sum, p) => sum + p.y, 0);
                const sumXY = points.reduce((sum, p) => sum + p.x * p.y, 0);
                const sumX2 = points.reduce((sum, p) => sum + p.x * p.x, 0);
                a = (n * sumXY - sumX * sumY) / (n * sumX2 - sumX * sumX);
                b = (sumY - a * sumX) / n;
            }

            const regressionX = [Math.min(...points.map(p => p.x)), Math.max(...points.map(p => p.x))];
            const regressionY = regressionX.map(x => a * x + b);

            const traces = [
                {
                    x: points.map(p => p.x),
                    y: points.map(p => p.y),
                    mode: 'markers',
                    marker: {color: 'blue', size: 10},
                    name: 'Naměřená data'
                },
                {
                    x: regressionX,
                    y: regressionY,
                    mode: 'lines',
                    line: {color: '#ff6361', width: 3},
                    name: 'Lineární regrese'
                }
            ];

            const layout = {
                title: 'Lineární regrese (metoda nejmenších čtverců)',
                xaxis: {title: 'x'},
                yaxis: {title: 'y'},
                showlegend: true,
                margin: {l: 40, r: 40, t: 40, b: 40}
            };

            Plotly.newPlot('linear-regression', traces, layout, {responsive: true});
        }

        function createPolynomialRegression() {
            // Sample data with quadratic trend + noise
            const points = [
                {x: 1, y: 1.2}, {x: 1.5, y: 2.1}, {x: 2, y: 3.8}, {x: 2.5, y: 6.2},
                {x: 3, y: 8.9}, {x: 3.5, y: 12.1}, {x: 4, y: 15.8}, {x: 4.5, y: 19.9},
                {x: 5, y: 24.2}
            ];

            // Linear regression
            const n = points.length;
            const sumX = points.reduce((sum, p) => sum + p.x, 0);
            const sumY = points.reduce((sum, p) => sum + p.y, 0);
            const sumXY = points.reduce((sum, p) => sum + p.x * p.y, 0);
            const sumX2 = points.reduce((sum, p) => sum + p.x * p.x, 0);
            const aLin = (n * sumXY - sumX * sumY) / (n * sumX2 - sumX * sumX);
            const bLin = (sumY - aLin * sumX) / n;

            // Quadratic regression (simplified)
            const aQuad = 1.2;
            const bQuad = -2.3;
            const cQuad = 1.8;

            const x = [];
            const yLinear = [];
            const yQuadratic = [];

            for (let xi = 1; xi <= 5; xi += 0.1) {
                x.push(xi);
                yLinear.push(aLin * xi + bLin);
                yQuadratic.push(aQuad * xi * xi + bQuad * xi + cQuad);
            }

            const traces = [
                {
                    x: points.map(p => p.x),
                    y: points.map(p => p.y),
                    mode: 'markers',
                    marker: {color: 'black', size: 8},
                    name: 'Data'
                },
                {
                    x: x,
                    y: yLinear,
                    mode: 'lines',
                    line: {color: '#ff6361', width: 2, dash: 'dash'},
                    name: 'Lineární regrese'
                },
                {
                    x: x,
                    y: yQuadratic,
                    mode: 'lines',
                    line: {color: '#ffa600', width: 3},
                    name: 'Kvadratická regrese'
                }
            ];

            const layout = {
                title: 'Polynomiální regrese - srovnání stupňů',
                xaxis: {title: 'x'},
                yaxis: {title: 'y'},
                showlegend: true,
                margin: {l: 40, r: 40, t: 40, b: 40}
            };

            Plotly.newPlot('polynomial-regression', traces, layout, {responsive: true});
        }

        // Initialize graphs when DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(() => {
                createConceptComparison();
                createLinearInterpolation();
                createPolynomialInterpolation();
                createSplineInterpolation();
                createLinearRegressionGraph();
                createPolynomialRegression();
            }, 100);
        });
    </script>
</body>
</html>